<html><head><meta http-equiv="content-type" content="text/html; charset=utf8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="COMM">// ==========================================================================</span><span class="WHIT">
<span class='line'>  2</span> </span><span class="COMM">// Project:   SproutCore</span><span class="WHIT">
<span class='line'>  3</span> </span><span class="COMM">// Copyright: @2013 7x7 Software, Inc.</span><span class="WHIT">
<span class='line'>  4</span> </span><span class="COMM">// License:   Licensed under MIT license (see license.js)</span><span class="WHIT">
<span class='line'>  5</span> </span><span class="COMM">// ==========================================================================</span><span class="WHIT">
<span class='line'>  6</span> </span><span class="NAME">sc_require</span><span class="PUNC">(</span><span class="STRN">'views/view'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>  7</span> 
<span class='line'>  8</span> 
<span class='line'>  9</span> </span><span class="NAME">SC.mixin</span><span class="PUNC">(</span><span class="NAME">SC.View</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 10</span> </span><span class="WHIT">  </span><span class="COMM">/** @scope SC.View */</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 11</span> 
<span class='line'> 12</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 13</span>     This child layout plugin automatically positions the view's child views in a
<span class='line'> 14</span>     vertical stack and optionally adjusts the parent view's height to fit.  It
<span class='line'> 15</span>     does this by checking the height of each child view and positioning the
<span class='line'> 16</span>     following child view accordingly.  By default any time that a child view's
<span class='line'> 17</span>     height changes, the view will use this plugin to re-adjust all other child
<span class='line'> 18</span>     views and its own height appropriately.
<span class='line'> 19</span> 
<span class='line'> 20</span>     A typical usage scenario is a long "form" made of multiple subsection
<span class='line'> 21</span>     views.  If we want to adjust the height of a subsection, to make space for
<span class='line'> 22</span>     an error label for example, it would be a lot of work to manually
<span class='line'> 23</span>     reposition all the following sections below it.  A much easier to code and
<span class='line'> 24</span>     cleaner solution is to just set the childViewLayout plugin on the wrapper
<span class='line'> 25</span>     view.
<span class='line'> 26</span> 
<span class='line'> 27</span>     For example,
<span class='line'> 28</span> 
<span class='line'> 29</span>         MyApp.MyView = SC.View.extend({
<span class='line'> 30</span> 
<span class='line'> 31</span>           // Child views will be stacked in order vertically.
<span class='line'> 32</span>           childViewLayout: SC.View.VERTICAL_STACK,
<span class='line'> 33</span> 
<span class='line'> 34</span>           // The order of child views is important!
<span class='line'> 35</span>           childViews: ['sectionA', 'sectionB', 'sectionC'],
<span class='line'> 36</span> 
<span class='line'> 37</span>           // Actual layout will become { left: 10, right: 10, top: 20, height: 270 }
<span class='line'> 38</span>           layout: { left: 10, right: 10, top: 20 }, // Don't need to specify layout.height, this is automatic.
<span class='line'> 39</span> 
<span class='line'> 40</span>           sectionA: SC.View.design({
<span class='line'> 41</span>             // Actual layout will become { left: 0, right: 0, top: 0, height: 100 }
<span class='line'> 42</span>             layout: { height: 100 } // Don't need to specify layout.top, this is automatic.
<span class='line'> 43</span>           }),
<span class='line'> 44</span> 
<span class='line'> 45</span>           sectionB: SC.View.design({
<span class='line'> 46</span>             // Actual layout will become { border: 1, left: 0, right: 0, top: 100, height: 50 }
<span class='line'> 47</span>             layout: { border: 1, height: 50 } // Don't need to specify layout.top, this is automatic.
<span class='line'> 48</span>           }),
<span class='line'> 49</span> 
<span class='line'> 50</span>           sectionC: SC.View.design({
<span class='line'> 51</span>             // Actual layout will become { left: 10, right: 10, top: 150, height: 120 }
<span class='line'> 52</span>             layout: { left: 10, right: 10, height: 120 } // Don't need to specify layout.top, this is automatic.
<span class='line'> 53</span>           })
<span class='line'> 54</span> 
<span class='line'> 55</span>         });
<span class='line'> 56</span> 
<span class='line'> 57</span>     ## Modify all child view layouts with `childViewLayoutOptions`
<span class='line'> 58</span> 
<span class='line'> 59</span>     To modify the plugin behavior for all child view layouts, you can set the
<span class='line'> 60</span>     following child view layout options in `childViewLayoutOptions` on the view:
<span class='line'> 61</span> 
<span class='line'> 62</span>       - paddingBefore - Adds padding before the first child view.  Default: 0
<span class='line'> 63</span>       - paddingAfter - Adds padding after the last child view.  Default: 0
<span class='line'> 64</span>       - spacing - Adds spacing between each child view.  Default: 0
<span class='line'> 65</span>       - resizeToFit - Whether to resize the view to fit the child views (requires that each child view has a layout height).  Default: true
<span class='line'> 66</span> 
<span class='line'> 67</span>     For example,
<span class='line'> 68</span> 
<span class='line'> 69</span>         MyApp.MyView = SC.View.extend({
<span class='line'> 70</span> 
<span class='line'> 71</span>           // Child views will be stacked in order vertically.
<span class='line'> 72</span>           childViewLayout: SC.View.VERTICAL_STACK,
<span class='line'> 73</span> 
<span class='line'> 74</span>           // Change the behavior of the VERTICAL_STACK plugin
<span class='line'> 75</span>           childViewLayoutOptions: {
<span class='line'> 76</span>             paddingBefore: 10,
<span class='line'> 77</span>             paddingAfter: 20,
<span class='line'> 78</span>             spacing: 5
<span class='line'> 79</span>           },
<span class='line'> 80</span> 
<span class='line'> 81</span>           // The order of child views is important!
<span class='line'> 82</span>           childViews: ['sectionA', 'sectionB', 'sectionC'],
<span class='line'> 83</span> 
<span class='line'> 84</span>           // Actual layout will become { left: 10, right: 10, top: 20, height: 310 }
<span class='line'> 85</span>           layout: { left: 10, right: 10, top: 20 }, // Don't need to specify layout.height, this is automatic.
<span class='line'> 86</span> 
<span class='line'> 87</span>           sectionA: SC.View.design({
<span class='line'> 88</span>             // Actual layout will become { left: 0, right: 0, top: 10, height: 100 }
<span class='line'> 89</span>             layout: { height: 100 } // Don't need to specify layout.top, this is automatic.
<span class='line'> 90</span>           }),
<span class='line'> 91</span> 
<span class='line'> 92</span>           sectionB: SC.View.design({
<span class='line'> 93</span>             // Actual layout will become { border: 1, left: 0, right: 0, top: 115, height: 50 }
<span class='line'> 94</span>             layout: { border: 1, height: 50 } // Don't need to specify layout.top, this is automatic.
<span class='line'> 95</span>           }),
<span class='line'> 96</span> 
<span class='line'> 97</span>           sectionC: SC.View.design({
<span class='line'> 98</span>             // Actual layout will become { left: 10, right: 10, top: 170, height: 120 }
<span class='line'> 99</span>             layout: { left: 10, right: 10, height: 120 } // Don't need to specify layout.top, this is automatic.
<span class='line'>100</span>           })
<span class='line'>101</span> 
<span class='line'>102</span>         });
<span class='line'>103</span> 
<span class='line'>104</span>     If `resizeToFit` is set to `false`, the view will not adjust itself to fit
<span class='line'>105</span>     its child views.  This means that when `resizeToFit` is false, the view should
<span class='line'>106</span>     specify its height component in its layout.  This also means that you can
<span class='line'>107</span>     ignore the last child view's layout height if you want the last child view
<span class='line'>108</span>     to stretch to fill the parent view.
<span class='line'>109</span> 
<span class='line'>110</span>     For example,
<span class='line'>111</span> 
<span class='line'>112</span>         MyApp.MyView = SC.View.extend({
<span class='line'>113</span> 
<span class='line'>114</span>           // Child views will be stacked in order vertically.
<span class='line'>115</span>           childViewLayout: SC.View.VERTICAL_STACK,
<span class='line'>116</span> 
<span class='line'>117</span>           // Change the behavior of the VERTICAL_STACK plugin
<span class='line'>118</span>           childViewLayoutOptions: {
<span class='line'>119</span>             paddingBefore: 10,
<span class='line'>120</span>             paddingAfter: 20,
<span class='line'>121</span>             spacing: 5,
<span class='line'>122</span>             resizeToFit: false
<span class='line'>123</span>           },
<span class='line'>124</span> 
<span class='line'>125</span>           // The order of child views is important!
<span class='line'>126</span>           childViews: ['sectionA', 'sectionB', 'sectionC'],
<span class='line'>127</span> 
<span class='line'>128</span>           // Actual layout will become { left: 10, right: 10, top: 20, height: 500 }
<span class='line'>129</span>           layout: { left: 10, right: 10, top: 20, height: 500 }, // Need to specify layout.height.
<span class='line'>130</span> 
<span class='line'>131</span>           sectionA: SC.View.design({
<span class='line'>132</span>             // Actual layout will become { left: 0, right: 0, top: 10, height: 100 }
<span class='line'>133</span>             layout: { height: 100 } // Don't need to specify layout.top, this is automatic.
<span class='line'>134</span>           }),
<span class='line'>135</span> 
<span class='line'>136</span>           sectionB: SC.View.design({
<span class='line'>137</span>             // Actual layout will become { border: 1, left: 0, right: 0, top: 115, height: 50 }
<span class='line'>138</span>             layout: { border: 1, height: 50 } // Don't need to specify layout.top, this is automatic.
<span class='line'>139</span>           }),
<span class='line'>140</span> 
<span class='line'>141</span>           sectionC: SC.View.design({
<span class='line'>142</span>             // Actual layout will become { left: 10, right: 10, top: 170, bottom: 20 }
<span class='line'>143</span>             layout: { left: 10, right: 10 } // Don't need to specify layout.top, layout.bottom or layout.height, this is automatic.
<span class='line'>144</span>           })
<span class='line'>145</span> 
<span class='line'>146</span>         });
<span class='line'>147</span> 
<span class='line'>148</span>     ## Modify specific child view layouts
<span class='line'>149</span> 
<span class='line'>150</span>     To adjust the child layout on a granular level per child view, you can
<span class='line'>151</span>     also set the following properties on each child view:
<span class='line'>152</span> 
<span class='line'>153</span>       - marginBefore - Specify the minimum spacing above the child view.
<span class='line'>154</span>       - marginAfter - Specify the minimum spacing below the child view.
<span class='line'>155</span>       - useAbsoluteLayout - Don't include this child view in automatic layout, use absolute positioning based on the child view's `layout` property.
<span class='line'>156</span>       - useStaticLayout - Don't include this child view in automatic layout.  This child view uses relative positioning and is not eligible for automatic layout.
<span class='line'>157</span>       - isVisible - Non-visible child views are not included in the stack.
<span class='line'>158</span> 
<span class='line'>159</span>     For example,
<span class='line'>160</span> 
<span class='line'>161</span>         MyApp.MyView = SC.View.extend({
<span class='line'>162</span> 
<span class='line'>163</span>           // Child views will be stacked in order vertically.
<span class='line'>164</span>           childViewLayout: SC.View.VERTICAL_STACK,
<span class='line'>165</span> 
<span class='line'>166</span>           // Actual layout will become { left: 10, right: 10, top: 20, height: 570 }
<span class='line'>167</span>           layout: { left: 10, right: 10, top: 20 },
<span class='line'>168</span> 
<span class='line'>169</span>           // Keep the child views ordered!
<span class='line'>170</span>           childViews: ['sectionA', 'float', 'sectionB', 'sectionC'],
<span class='line'>171</span> 
<span class='line'>172</span>           sectionA: SC.View.design({
<span class='line'>173</span>             // Actual layout will become { left: 0, right: 50, top: 0, height: 100 }
<span class='line'>174</span>             layout: { right: 50, height: 100 },
<span class='line'>175</span>             // The following child view will be at least 50px further down.
<span class='line'>176</span>             marginAfter: 50
<span class='line'>177</span>           }),
<span class='line'>178</span> 
<span class='line'>179</span>           float: SC.View.design({
<span class='line'>180</span>             // This view will not be included in automatic layout and will not effect the stack.
<span class='line'>181</span>             layout: { top: 5, right: 5, width: 50, height: 50 },
<span class='line'>182</span>             useAbsoluteLayout: true
<span class='line'>183</span>           }),
<span class='line'>184</span> 
<span class='line'>185</span>           sectionB: SC.View.design({
<span class='line'>186</span>             // Actual layout will become { left: 0, right: 0, top: 150, height: 120 }
<span class='line'>187</span>             layout: { height: 120 }
<span class='line'>188</span>           }),
<span class='line'>189</span> 
<span class='line'>190</span>           sectionC: SC.View.design({
<span class='line'>191</span>             // Actual layout will become { left: 0, bottom: 0, top: 470, height: 100 }
<span class='line'>192</span>             layout: { height: 100 },
<span class='line'>193</span>             // This child view will be at least 200px below the previous.
<span class='line'>194</span>             marginBefore: 200
<span class='line'>195</span>           })
<span class='line'>196</span> 
<span class='line'>197</span>         });
<span class='line'>198</span> 
<span class='line'>199</span>     ### A Note About Spacing
<span class='line'>200</span> 
<span class='line'>201</span>     Note that the spacing attribute in `childViewLayoutOptions` becomes the
<span class='line'>202</span>     _minimum margin between child views, without explicitly overriding it from
<span class='line'>203</span>     both sides using `marginAfter` and `marginBefore`_.  For example, if `spacing`
<span class='line'>204</span>     is 25, setting `marginAfter` to 10 on a child view will not result in the
<span class='line'>205</span>     next child view being 10px below it, unless the next child view also
<span class='line'>206</span>     specified `marginBefore` as 10.
<span class='line'>207</span> 
<span class='line'>208</span>     What this means is that it takes less configuration if you set `spacing` to
<span class='line'>209</span>     be the _smallest margin you wish to exist between child views_ and then use
<span class='line'>210</span>     the overrides to grow the margin if necessary.  For example, if `spacing`
<span class='line'>211</span>     is 5, setting `marginAfter` to 10 on a child view will result in the next
<span class='line'>212</span>     child view being 10px below it, without having to also specify `marginBefore`
<span class='line'>213</span>     on that next child view.
<span class='line'>214</span> 
<span class='line'>215</span>     @extends SC.ChildViewLayoutProtocol
<span class='line'>216</span>     @since Version 1.10
<span class='line'>217</span>   */</span><span class="WHIT">
<span class='line'>218</span> </span><span class="WHIT">  </span><span class="NAME">VERTICAL_STACK</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>219</span> 
<span class='line'>220</span> </span><span class="WHIT">    </span><span class="COMM">/** @private Properties to observe on child views that affect the overall child view layout. */</span><span class="WHIT">
<span class='line'>221</span> </span><span class="WHIT">    </span><span class="NAME">childLayoutProperties</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'marginBefore'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'marginAfter'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'isVisible'</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>222</span> 
<span class='line'>223</span> </span><span class="WHIT">    </span><span class="COMM">/** @private */</span><span class="WHIT">
<span class='line'>224</span> </span><span class="WHIT">    </span><span class="NAME">layoutChildViews</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">view</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>225</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">childViews</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">view.get</span><span class="PUNC">(</span><span class="STRN">'childViews'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>226</span> </span><span class="WHIT">        </span><span class="NAME">options</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">view.get</span><span class="PUNC">(</span><span class="STRN">'childViewLayoutOptions'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>227</span> </span><span class="WHIT">        </span><span class="NAME">resizeToFit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.none</span><span class="PUNC">(</span><span class="NAME">options.resizeToFit</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">options.resizeToFit</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>228</span> </span><span class="WHIT">        </span><span class="NAME">lastMargin</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// Used to avoid adding spacing to the final margin.</span><span class="WHIT">
<span class='line'>229</span> </span><span class="WHIT">        </span><span class="NAME">marginAfter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">options.paddingBefore</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>230</span> </span><span class="WHIT">        </span><span class="NAME">paddingAfter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">options.paddingAfter</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>231</span> </span><span class="WHIT">        </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>232</span> </span><span class="WHIT">        </span><span class="NAME">spacing</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">options.spacing</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>233</span> </span><span class="WHIT">        </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>234</span> 
<span class='line'>235</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">childViews.get</span><span class="PUNC">(</span><span class="STRN">'length'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>236</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">childView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">childViews.objectAt</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>237</span> </span><span class="WHIT">          </span><span class="NAME">layout</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>238</span> </span><span class="WHIT">          </span><span class="NAME">marginBefore</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>239</span> 
<span class='line'>240</span> </span><span class="WHIT">        </span><span class="COMM">// Ignore child views with useAbsoluteLayout true, useStaticLayout true or that are not visible.</span><span class="WHIT">
<span class='line'>241</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">childView.get</span><span class="PUNC">(</span><span class="STRN">'isVisible'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>242</span> </span><span class="WHIT">          </span><span class="NAME">childView.get</span><span class="PUNC">(</span><span class="STRN">'useAbsoluteLayout'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>243</span> </span><span class="WHIT">          </span><span class="NAME">childView.get</span><span class="PUNC">(</span><span class="STRN">'useStaticLayout'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>244</span> </span><span class="WHIT">          </span><span class="KEYW">continue</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>245</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>246</span> 
<span class='line'>247</span> </span><span class="WHIT">        </span><span class="NAME">layout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">childView.get</span><span class="PUNC">(</span><span class="STRN">'layout'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>248</span> </span><span class="WHIT">        </span><span class="COMM">//@if(debug)</span><span class="WHIT">
<span class='line'>249</span> </span><span class="WHIT">        </span><span class="COMM">// Add some developer support.</span><span class="WHIT">
<span class='line'>250</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">SC.none</span><span class="PUNC">(</span><span class="NAME">layout.height</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">resizeToFit</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>251</span> </span><span class="WHIT">          </span><span class="NAME">SC.warn</span><span class="PUNC">(</span><span class="STRN">'Developer Warning: The SC.View.VERTICAL_STACK plugin requires that each childView layout contains at least a height and optionally also left and right, left and width, right and width or centerX and width.  The childView %@ has an invalid layout: %@'</span><span class="PUNC">.</span><span class="NAME">fmt</span><span class="PUNC">(</span><span class="NAME">childView</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.stringFromLayout</span><span class="PUNC">(</span><span class="NAME">layout</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>252</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>253</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>254</span> </span><span class="WHIT">        </span><span class="COMM">//@endif</span><span class="WHIT">
<span class='line'>255</span> 
<span class='line'>256</span> </span><span class="WHIT">        </span><span class="COMM">// Determine the top margin.</span><span class="WHIT">
<span class='line'>257</span> </span><span class="WHIT">        </span><span class="NAME">marginBefore</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">childView.get</span><span class="PUNC">(</span><span class="STRN">'marginBefore'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>258</span> </span><span class="WHIT">        </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">marginAfter</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">marginBefore</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>259</span> 
<span class='line'>260</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">layout.top</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">position</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>261</span> </span><span class="WHIT">          </span><span class="NAME">childView.adjust</span><span class="PUNC">(</span><span class="STRN">'top'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">position</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>262</span> 
<span class='line'>263</span> </span><span class="WHIT">          </span><span class="COMM">// Allow the last child view to stretch.</span><span class="WHIT">
<span class='line'>264</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">resizeToFit</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">layout.height</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">layout.bottom</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>265</span> </span><span class="WHIT">            </span><span class="NAME">childView.adjust</span><span class="PUNC">(</span><span class="STRN">'bottom'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">paddingAfter</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>266</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>267</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>268</span> </span><span class="WHIT">        </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">childView.getPath</span><span class="PUNC">(</span><span class="STRN">'borderFrame.height'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>269</span> 
<span class='line'>270</span> </span><span class="WHIT">        </span><span class="COMM">// Determine the bottom margin.</span><span class="WHIT">
<span class='line'>271</span> </span><span class="WHIT">        </span><span class="NAME">lastMargin</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">childView.get</span><span class="PUNC">(</span><span class="STRN">'marginAfter'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>272</span> </span><span class="WHIT">        </span><span class="NAME">marginAfter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">lastMargin</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">spacing</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>273</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>274</span> 
<span class='line'>275</span> </span><span class="WHIT">      </span><span class="COMM">// Adjust our frame to fit as well, this ensures that scrolling works.</span><span class="WHIT">
<span class='line'>276</span> </span><span class="WHIT">      </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">lastMargin</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">paddingAfter</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>277</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">resizeToFit</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">view.getPath</span><span class="PUNC">(</span><span class="STRN">'layout.height'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">position</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>278</span> </span><span class="WHIT">        </span><span class="NAME">view.adjust</span><span class="PUNC">(</span><span class="STRN">'height'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">position</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>279</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>280</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>281</span> 
<span class='line'>282</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>283</span> 
<span class='line'>284</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>285</span> </span></pre></body></html>