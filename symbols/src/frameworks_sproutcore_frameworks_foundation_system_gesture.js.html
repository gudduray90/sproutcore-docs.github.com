<html><head><meta http-equiv="content-type" content="text/html; charset=utf8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="COMM">// ==========================================================================</span><span class="WHIT">
<span class='line'>  2</span> </span><span class="COMM">// Project:   SproutCore - JavaScript Application Framework</span><span class="WHIT">
<span class='line'>  3</span> </span><span class="COMM">// Copyright: ©2006-2011 Strobe Inc. and contributors.</span><span class="WHIT">
<span class='line'>  4</span> </span><span class="COMM">//            Portions ©2008-2011 Apple Inc. All rights reserved.</span><span class="WHIT">
<span class='line'>  5</span> </span><span class="COMM">// License:   Licensed under MIT license (see license.js)</span><span class="WHIT">
<span class='line'>  6</span> </span><span class="COMM">// ==========================================================================</span><span class="WHIT">
<span class='line'>  7</span> 
<span class='line'>  8</span> 
<span class='line'>  9</span> </span><span class="COMM">/**
<span class='line'> 10</span>   @class
<span class='line'> 11</span> 
<span class='line'> 12</span>   An SC.Gesture analyzes SC.Touch objects and determines if they are part
<span class='line'> 13</span>   of a gesture. If they are, SC.Gestures keep the views that own them up-to-date
<span class='line'> 14</span>   as that gesture progresses, informing it when it starts, when some aspect of
<span class='line'> 15</span>   it changes, when it ends, and—for convenience—when it is considered to have
<span class='line'> 16</span>   been "triggered".
<span class='line'> 17</span> 
<span class='line'> 18</span>   Gestures can call the following methods on their views:
<span class='line'> 19</span> 
<span class='line'> 20</span>   - [gestureName](args...): called when the gesture has occurred. This is
<span class='line'> 21</span>     useful for event-style gestures, where you aren't interested in when it starts or
<span class='line'> 22</span>     ends, but just that it has occurred. SC.SwipeGesture triggers this after the
<span class='line'> 23</span>     swipe has moved a minimum amount—40px by default.
<span class='line'> 24</span> 
<span class='line'> 25</span>   - [gestureName]Start(args...): called when the gesture is first recognized.
<span class='line'> 26</span>     For instance, a swipe gesture may be recognized after the finger has moved a
<span class='line'> 27</span>     minimum distance in a horizontal.
<span class='line'> 28</span> 
<span class='line'> 29</span>   - [gestureName]Changed(args...): called when some property of the gesture
<span class='line'> 30</span>     has changed. For instance, this may be called continuously as the user swipes as
<span class='line'> 31</span>     the swipe's distance changes.
<span class='line'> 32</span> 
<span class='line'> 33</span>   - [gestureName]Cancelled(args...): called when a gesture, for one reason
<span class='line'> 34</span>     or another, is no longer recognized. For instance, a horizontal swipe gesture
<span class='line'> 35</span>     could cancel if the user moves too far in a vertical direction.
<span class='line'> 36</span> 
<span class='line'> 37</span>   - [gestureName]End(args...): called when a gesture ends. A swipe would end
<span class='line'> 38</span>     when the user lifts their finger.
<span class='line'> 39</span> 
<span class='line'> 40</span>   Gesture Lifecycle
<span class='line'> 41</span>   ------------------------
<span class='line'> 42</span>   Gestures start receiving events when their view—usually mixing in SC.Gesturable—tells it
<span class='line'> 43</span>   about activities with "unassigned" touches. "Unassigned" touches are touches that have
<span class='line'> 44</span>   not _yet_ been assigned to a gesture.
<span class='line'> 45</span> 
<span class='line'> 46</span>   The touch becomes "assigned" when the gesture's touchIsInGesture method returns YES.
<span class='line'> 47</span>   When a touch is assigned to a gesture, the gesture becomes the touch's touch responder;
<span class='line'> 48</span>   this means that it will receive a touchStart event (to which it must return YES), and
<span class='line'> 49</span>   then, all further touch events will be sent _directly_ to the gesture—the gesture's view
<span class='line'> 50</span>   will not receive them at all.
<span class='line'> 51</span> 
<span class='line'> 52</span>   At any point, the gesture may tell the view that it has started, ended, or changed. In
<span class='line'> 53</span>   addition, the gesture may tell the view it has been "triggered." A gesture is not
<span class='line'> 54</span>   necessarily "triggered" when it starts and ends; for instance, a swipe gesture might
<span class='line'> 55</span>   only be triggered if the swipe moves more than a specified amount. The ability to track
<span class='line'> 56</span>   when the gesture has been triggered allows views to easily handle the gesture as its own
<span class='line'> 57</span>   event, rather than as the individual events that are part of it.
<span class='line'> 58</span> 
<span class='line'> 59</span>   If, at some point, the gesture must release the touch back (perhaps the gesture had _thought_
<span class='line'> 60</span>   the touch was a part of it, but turned out to be incorrect), the release(touch) method releases
<span class='line'> 61</span>   it back to the view.
<span class='line'> 62</span> 
<span class='line'> 63</span>   Exclusivity
<span class='line'> 64</span>   ---------------------------------
<span class='line'> 65</span>   The concept described above gives the gestures a way to be either exclusive or inclusive as-needed:
<span class='line'> 66</span>   they can choose to take exclusive control of a touch if they think it is theirs, but if they are
<span class='line'> 67</span>   not sure, they can wait and see.
<span class='line'> 68</span> 
<span class='line'> 69</span>   Status Object
<span class='line'> 70</span>   ---------------------------------
<span class='line'> 71</span>   It is a common need to track some data related to the touch, but without modifying the touch itself.
<span class='line'> 72</span>   SC.Gesture is able to keep track of simple hashes for you, mapping them to the SC.Touch object,
<span class='line'> 73</span>   so that you can maintain some state related to the touch.
<span class='line'> 74</span> 
<span class='line'> 75</span>   For instance, you could set status.failed in touchesDragged, if a touch that you previously
<span class='line'> 76</span>   thought may have been part of the gesture turned out not to be, and then check for
<span class='line'> 77</span>   status.failed in touchIsInGesture, returning NO if present. This would cause the touch
<span class='line'> 78</span>   to never be considered for your gesture again.
<span class='line'> 79</span> 
<span class='line'> 80</span>   touchIsInGesture is called with the status hash provided in the second argument. You may look
<span class='line'> 81</span>   up the status hash for a touch at any time by calling this.statusForTouch(touch).
<span class='line'> 82</span> 
<span class='line'> 83</span> 
<span class='line'> 84</span>   Implementing a Gesture
<span class='line'> 85</span>   ---------------------------------
<span class='line'> 86</span>   To write a gesture, you would generally implement the following methods:
<span class='line'> 87</span> 
<span class='line'> 88</span>   - touchIsInGesture: Return YES when the touch is—or is likely enough to be that you
<span class='line'> 89</span>     want your gesture to have exclusive control over the touch. You usually do not
<span class='line'> 90</span>     perform much gesture logic here—instead, you save it for touchStart, which will
<span class='line'> 91</span>     get called after you return YES from this method.
<span class='line'> 92</span> 
<span class='line'> 93</span>   - touchStart: Return YES to accept control of the touch. If you do not return YES,
<span class='line'> 94</span>     your gesture will not receive touchesDragged nor touchEnd events. At this point,
<span class='line'> 95</span>     you may (or may not) wish to tell the view that the gesture has started by using the
<span class='line'> 96</span>     start(args...) method.
<span class='line'> 97</span> 
<span class='line'> 98</span>   - touchesDragged: Use this as you would use it in an SC.View to track the touches
<span class='line'> 99</span>     assigned to the gesture. At this point, you might want to tell the view that the
<span class='line'>100</span>     gesture has updated by using the change(args...) method.
<span class='line'>101</span> 
<span class='line'>102</span>   - touchEnd: Again, use this like you would in an SC.View to track when touches
<span class='line'>103</span>     assigned to the gesture have ended. This is also a potential time to alert the view
<span class='line'>104</span>     that the gesture has ended, by using the end(args...) method. Further, this may
<span class='line'>105</span>     also be the time to "trigger" the gesture.
<span class='line'>106</span> 
<span class='line'>107</span> */</span><span class="WHIT">
<span class='line'>108</span> </span><span class="NAME">SC.Gesture</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.Object.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>109</span> 
<span class='line'>110</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Tracks when the gesture is active or not. */</span><span class="WHIT">
<span class='line'>111</span> </span><span class="WHIT">  </span><span class="NAME">_sc_isActive</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>112</span> 
<span class='line'>113</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>114</span>     Whether to receive touch events for each distinct touch (rather than only the first touch start
<span class='line'>115</span>     and last touch end).
<span class='line'>116</span> 
<span class='line'>117</span>     @type Boolean
<span class='line'>118</span>     @default false
<span class='line'>119</span>     @see SC.View#acceptsMultitouch
<span class='line'>120</span>   */</span><span class="WHIT">
<span class='line'>121</span> </span><span class="WHIT">  </span><span class="NAME">acceptsMultitouch</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>122</span> 
<span class='line'>123</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>124</span>     The gesture's name. When calling events on the owning SC.View, this name will
<span class='line'>125</span>     be prefixed to the methods. For instance, if the method to be called is
<span class='line'>126</span>     'Start', and the gesture's name is 'swipe', SC.Gesture will call 'swipeStart'.
<span class='line'>127</span> 
<span class='line'>128</span>     @type String
<span class='line'>129</span>     @default "gesture"
<span class='line'>130</span>   */</span><span class="WHIT">
<span class='line'>131</span> </span><span class="WHIT">  </span><span class="NAME">name</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"gesture"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>132</span> 
<span class='line'>133</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>134</span>     Return YES to take exclusive control over the touch. In addition to the
<span class='line'>135</span>     SC.Touch object you may take control of, you are also provided a "status"
<span class='line'>136</span>     hash, which is unique for both the gesture instance and the touch instance,
<span class='line'>137</span>     which you may use for your own purposes.
<span class='line'>138</span> 
<span class='line'>139</span>     @param {SC.Touch} touch The touch.
<span class='line'>140</span>     @param {Object} status A unique status hash for the given touch.
<span class='line'>141</span>     @returns {Boolean} true if the gesture should claim the touch; false to leave it unclaimed.
<span class='line'>142</span>   */</span><span class="WHIT">
<span class='line'>143</span> </span><span class="WHIT">  </span><span class="NAME">touchIsInGesture</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">status</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>144</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>145</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>146</span> 
<span class='line'>147</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>148</span>     After you return YES from touchIsInGesture (or otherwise 'take' a touch, perhaps
<span class='line'>149</span>     using the 'take' method), touchStart will be called.
<span class='line'>150</span> 
<span class='line'>151</span>     This is where you do any logic needed now that the touch is part of the gesture.
<span class='line'>152</span>     For instance, you could inform the view that the gesture has started by calling
<span class='line'>153</span>     this.start().
<span class='line'>154</span> 
<span class='line'>155</span>     NOTE: SC.Gesture is just like SC.View in that it has an acceptsMultitouch property.
<span class='line'>156</span>     If NO (the default), the gesture will only receive touchStart for the first touch
<span class='line'>157</span>     assigned to it, and only receive touchEnd for the last touch that ends.
<span class='line'>158</span> 
<span class='line'>159</span>     @param {SC.Touch} touch The touch that started.
<span class='line'>160</span>     @returns {Boolean} true if the gesture should respond to the touch; false otherwise (this should always return true)
<span class='line'>161</span>     @see SC.ResponderProtocol#touchStart
<span class='line'>162</span>   */</span><span class="WHIT">
<span class='line'>163</span> </span><span class="WHIT">  </span><span class="NAME">touchStart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>164</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>165</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>166</span> 
<span class='line'>167</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>168</span>     Called when a touch assigned to the gesture ends.
<span class='line'>169</span> 
<span class='line'>170</span>     If there are no remaining touches on the gesture, you may want to call end() to
<span class='line'>171</span>     notify the view that the gesture has ended (if you haven't ended the gesture
<span class='line'>172</span>     already).
<span class='line'>173</span> 
<span class='line'>174</span>     NOTE: SC.Gesture is just like SC.View in that it has an acceptsMultitouch property.
<span class='line'>175</span>     If NO (the default), the gesture will only receive touchStart for the first touch
<span class='line'>176</span>     assigned to it, and only receive touchEnd for the last touch that ends.
<span class='line'>177</span> 
<span class='line'>178</span>     @name touchEnd
<span class='line'>179</span>     @function
<span class='line'>180</span>     @param {SC.Touch} touch The touch that ended.
<span class='line'>181</span>   */</span><span class="WHIT">
<span class='line'>182</span> 
<span class='line'>183</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>184</span>     Starts the gesture (marking it as "active"), and notifies the view.
<span class='line'>185</span> 
<span class='line'>186</span>     You can pass any number of arguments to start. They will, along with
<span class='line'>187</span>     the gesture instance itself, will be passed to the appropriate gesture
<span class='line'>188</span>     event on the SC.View.
<span class='line'>189</span>   */</span><span class="WHIT">
<span class='line'>190</span> </span><span class="WHIT">  </span><span class="NAME">start</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>191</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._sc_isActive</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>192</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_isActive</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>193</span> 
<span class='line'>194</span> </span><span class="WHIT">      </span><span class="COMM">// var argumentsLength = arguments.length,</span><span class="WHIT">
<span class='line'>195</span> </span><span class="WHIT">      </span><span class="COMM">//     args = new Array(argumentsLength + 1);</span><span class="WHIT">
<span class='line'>196</span> 
<span class='line'>197</span> </span><span class="WHIT">      </span><span class="COMM">// // Unshift this to the front of arguments.</span><span class="WHIT">
<span class='line'>198</span> </span><span class="WHIT">      </span><span class="COMM">// args[0] = this;</span><span class="WHIT">
<span class='line'>199</span> </span><span class="WHIT">      </span><span class="COMM">// for (var i = 0, len = argumentsLength; i &lt; len; i++) { args[i + 1] = arguments[i]; }</span><span class="WHIT">
<span class='line'>200</span> 
<span class='line'>201</span> </span><span class="WHIT">      </span><span class="COMM">// var act = this.name + "Start";</span><span class="WHIT">
<span class='line'>202</span> </span><span class="WHIT">      </span><span class="COMM">// if (this.view[act]) this.view[act].apply(this.view, args);</span><span class="WHIT">
<span class='line'>203</span> 
<span class='line'>204</span> </span><span class="WHIT">      </span><span class="COMM">// Fast arguments access. Don't materialize the `arguments` object, it is costly.</span><span class="WHIT">
<span class='line'>205</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">argumentsLength</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>206</span> </span><span class="WHIT">          </span><span class="NAME">args</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="NAME">argumentsLength</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>207</span> 
<span class='line'>208</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">argumentsLength</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>209</span> 
<span class='line'>210</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">act</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.name</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"Start"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>211</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.view</span><span class="PUNC">[</span><span class="NAME">act</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">this.view</span><span class="PUNC">[</span><span class="NAME">act</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">this.view</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>212</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>213</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>214</span> 
<span class='line'>215</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>216</span>     Ends the gesture, if it is active (marking it as not active), and notifies
<span class='line'>217</span>     the view.
<span class='line'>218</span> 
<span class='line'>219</span>     You may pass any number of arguments to end(). They, along with your gesture
<span class='line'>220</span>     instance itself, will be passed to the appropriate gesture event on the SC.View.
<span class='line'>221</span>   */</span><span class="WHIT">
<span class='line'>222</span> </span><span class="WHIT">  </span><span class="NAME">end</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>223</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_isActive</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>224</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_isActive</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>225</span> 
<span class='line'>226</span> </span><span class="WHIT">      </span><span class="COMM">// var argumentsLength = arguments.length,</span><span class="WHIT">
<span class='line'>227</span> </span><span class="WHIT">      </span><span class="COMM">//     args = new Array(argumentsLength + 1);</span><span class="WHIT">
<span class='line'>228</span> 
<span class='line'>229</span> </span><span class="WHIT">      </span><span class="COMM">// // Unshift this to the front of arguments.</span><span class="WHIT">
<span class='line'>230</span> </span><span class="WHIT">      </span><span class="COMM">// args[0] = this;</span><span class="WHIT">
<span class='line'>231</span> </span><span class="WHIT">      </span><span class="COMM">// for (var i = 0, len = argumentsLength; i &lt; len; i++) { args[i + 1] = arguments[i]; }</span><span class="WHIT">
<span class='line'>232</span> 
<span class='line'>233</span> </span><span class="WHIT">      </span><span class="COMM">// var act = this.name + "End";</span><span class="WHIT">
<span class='line'>234</span> </span><span class="WHIT">      </span><span class="COMM">// if (this.view[act]) this.view[act].apply(this.view, args);</span><span class="WHIT">
<span class='line'>235</span> 
<span class='line'>236</span> </span><span class="WHIT">      </span><span class="COMM">// Fast arguments access. Don't materialize the `arguments` object, it is costly.</span><span class="WHIT">
<span class='line'>237</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">argumentsLength</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>238</span> </span><span class="WHIT">          </span><span class="NAME">args</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="NAME">argumentsLength</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>239</span> 
<span class='line'>240</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">argumentsLength</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>241</span> 
<span class='line'>242</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">act</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.name</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"End"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>243</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.view</span><span class="PUNC">[</span><span class="NAME">act</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">this.view</span><span class="PUNC">[</span><span class="NAME">act</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">this.view</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>244</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>245</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>246</span> 
<span class='line'>247</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>248</span>     If the gesture is active, notifies the view that the gesture has
<span class='line'>249</span>     changed.
<span class='line'>250</span> 
<span class='line'>251</span>     The gesture, along with any arguments to change(), will be passed to
<span class='line'>252</span>     the appropriate method on the SC.View.
<span class='line'>253</span>   */</span><span class="WHIT">
<span class='line'>254</span> </span><span class="WHIT">  </span><span class="NAME">change</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>255</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_isActive</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>256</span> </span><span class="WHIT">      </span><span class="COMM">// var argumentsLength = arguments.length,</span><span class="WHIT">
<span class='line'>257</span> </span><span class="WHIT">      </span><span class="COMM">//     args = new Array(argumentsLength + 1);</span><span class="WHIT">
<span class='line'>258</span> 
<span class='line'>259</span> </span><span class="WHIT">      </span><span class="COMM">// // Unshift this to the front of arguments.</span><span class="WHIT">
<span class='line'>260</span> </span><span class="WHIT">      </span><span class="COMM">// args[0] = this;</span><span class="WHIT">
<span class='line'>261</span> </span><span class="WHIT">      </span><span class="COMM">// for (var i = 0, len = argumentsLength; i &lt; len; i++) { args[i + 1] = arguments[i]; }</span><span class="WHIT">
<span class='line'>262</span> 
<span class='line'>263</span> </span><span class="WHIT">      </span><span class="COMM">// var act = this.name + "Changed";</span><span class="WHIT">
<span class='line'>264</span> </span><span class="WHIT">      </span><span class="COMM">// if (this.view[act]) this.view[act].apply(this.view, args);</span><span class="WHIT">
<span class='line'>265</span> 
<span class='line'>266</span> </span><span class="WHIT">      </span><span class="COMM">// Fast arguments access. Don't materialize the `arguments` object, it is costly.</span><span class="WHIT">
<span class='line'>267</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">argumentsLength</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>268</span> </span><span class="WHIT">          </span><span class="NAME">args</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="NAME">argumentsLength</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>269</span> 
<span class='line'>270</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">argumentsLength</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>271</span> 
<span class='line'>272</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">act</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.name</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"Changed"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>273</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.view</span><span class="PUNC">[</span><span class="NAME">act</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">this.view</span><span class="PUNC">[</span><span class="NAME">act</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">this.view</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>274</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>275</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>276</span> 
<span class='line'>277</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>278</span>     Cancels the gesture, if it is active, and notifies the view that the
<span class='line'>279</span>     gesture has been cancelled.
<span class='line'>280</span> 
<span class='line'>281</span>     Gestures are cancelled when they have ended, but any action that would
<span class='line'>282</span>     normally be appropriate due to their ending should not be performed.
<span class='line'>283</span> 
<span class='line'>284</span>     The gesture, along with any arguments to cancel(), will be passed to the
<span class='line'>285</span>     appropriate method on the SC.View.
<span class='line'>286</span>   */</span><span class="WHIT">
<span class='line'>287</span> </span><span class="WHIT">  </span><span class="NAME">cancel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>288</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_isActive</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>289</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_isActive</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>290</span> 
<span class='line'>291</span> </span><span class="WHIT">      </span><span class="COMM">// var argumentsLength = arguments.length,</span><span class="WHIT">
<span class='line'>292</span> </span><span class="WHIT">      </span><span class="COMM">//     args = new Array(argumentsLength + 1);</span><span class="WHIT">
<span class='line'>293</span> 
<span class='line'>294</span> </span><span class="WHIT">      </span><span class="COMM">// // Unshift this to the front of arguments.</span><span class="WHIT">
<span class='line'>295</span> </span><span class="WHIT">      </span><span class="COMM">// args[0] = this;</span><span class="WHIT">
<span class='line'>296</span> </span><span class="WHIT">      </span><span class="COMM">// for (var i = 0, len = argumentsLength; i &lt; len; i++) { args[i + 1] = arguments[i]; }</span><span class="WHIT">
<span class='line'>297</span> 
<span class='line'>298</span> </span><span class="WHIT">      </span><span class="COMM">// var act = this.name + "Cancelled";</span><span class="WHIT">
<span class='line'>299</span> </span><span class="WHIT">      </span><span class="COMM">// if (this.view[act]) this.view[act].apply(this.view, args);</span><span class="WHIT">
<span class='line'>300</span> 
<span class='line'>301</span> </span><span class="WHIT">      </span><span class="COMM">// Fast arguments access. Don't materialize the `arguments` object, it is costly.</span><span class="WHIT">
<span class='line'>302</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">argumentsLength</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>303</span> </span><span class="WHIT">          </span><span class="NAME">args</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="NAME">argumentsLength</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>304</span> 
<span class='line'>305</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">argumentsLength</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>306</span> 
<span class='line'>307</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">act</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.name</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"Cancelled"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>308</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.view</span><span class="PUNC">[</span><span class="NAME">act</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">this.view</span><span class="PUNC">[</span><span class="NAME">act</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">this.view</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>309</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>310</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>311</span> 
<span class='line'>312</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>313</span>     Triggers the gesture, notifying the view that the gesture has happened.
<span class='line'>314</span> 
<span class='line'>315</span>     You should trigger a gesture where it would be natural to say it has "happened";
<span class='line'>316</span>     for instance, if a touch moves a couple of pixels, you probably wouldn't say
<span class='line'>317</span>     a swipe has occurred—though you might say it has "begun." And you wouldn't necessarily
<span class='line'>318</span>     wait until the touch has ended either. Once the touch has moved a certain amount,
<span class='line'>319</span>     there has definitely been a swipe. By calling trigger() at this point, you will
<span class='line'>320</span>     tell the view that it has occurred.
<span class='line'>321</span> 
<span class='line'>322</span>     For SC.SwipeGesture, this allows a view to implement only swipe(), and then be
<span class='line'>323</span>     automatically notified whenever any swipe has occurred.
<span class='line'>324</span>   */</span><span class="WHIT">
<span class='line'>325</span> </span><span class="WHIT">  </span><span class="NAME">trigger</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>326</span> </span><span class="WHIT">    </span><span class="COMM">// Fast arguments access. Don't materialize the `arguments` object, it is costly.</span><span class="WHIT">
<span class='line'>327</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">argumentsLength</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>328</span> </span><span class="WHIT">        </span><span class="COMM">// args = new Array(argumentsLength + 1);</span><span class="WHIT">
<span class='line'>329</span> </span><span class="WHIT">        </span><span class="NAME">args</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="NAME">argumentsLength</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>330</span> 
<span class='line'>331</span> </span><span class="WHIT">    </span><span class="COMM">// // Unshift this to the front of arguments.</span><span class="WHIT">
<span class='line'>332</span> </span><span class="WHIT">    </span><span class="COMM">// args[0] = this;</span><span class="WHIT">
<span class='line'>333</span> </span><span class="WHIT">    </span><span class="COMM">// for (var i = 0, len = argumentsLength; i &lt; len; i++) { args[i + 1] = arguments[i]; }</span><span class="WHIT">
<span class='line'>334</span> 
<span class='line'>335</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">argumentsLength</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>336</span> 
<span class='line'>337</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">act</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.name</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>338</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.view</span><span class="PUNC">[</span><span class="NAME">act</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">this.view</span><span class="PUNC">[</span><span class="NAME">act</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">this.view</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>339</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>340</span> 
<span class='line'>341</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>342</span>     Takes possession of a touch.
<span class='line'>343</span> 
<span class='line'>344</span>     This is called automatically when you return YES from touchIsInGesture.
<span class='line'>345</span>   */</span><span class="WHIT">
<span class='line'>346</span> </span><span class="WHIT">  </span><span class="COMM">// take: function(touch) {</span><span class="WHIT">
<span class='line'>347</span> </span><span class="WHIT">  </span><span class="COMM">//   if (!touch.isTaken) {</span><span class="WHIT">
<span class='line'>348</span> </span><span class="WHIT">  </span><span class="COMM">//     touch.isTaken = YES; // because even changing responder won't prevent it from being used this cycle.</span><span class="WHIT">
<span class='line'>349</span> </span><span class="WHIT">  </span><span class="COMM">//     if (SC.none(touch.touchResponder) || touch.touchResponder !== this) touch.makeTouchResponder(this, YES);</span><span class="WHIT">
<span class='line'>350</span> </span><span class="WHIT">  </span><span class="COMM">//   }</span><span class="WHIT">
<span class='line'>351</span> </span><span class="WHIT">  </span><span class="COMM">//   //@if(debug)</span><span class="WHIT">
<span class='line'>352</span> </span><span class="WHIT">  </span><span class="COMM">//   else {</span><span class="WHIT">
<span class='line'>353</span> </span><span class="WHIT">  </span><span class="COMM">//     SC.warn("Developer Warning: A gesture tried to take a touch that was already taken: %@".fmt(this));</span><span class="WHIT">
<span class='line'>354</span> </span><span class="WHIT">  </span><span class="COMM">//   }</span><span class="WHIT">
<span class='line'>355</span> </span><span class="WHIT">  </span><span class="COMM">//   //@endif</span><span class="WHIT">
<span class='line'>356</span> </span><span class="WHIT">  </span><span class="COMM">// },</span><span class="WHIT">
<span class='line'>357</span> 
<span class='line'>358</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>359</span>     Releases a touch back to its previous owner, which is usually the view. This allows
<span class='line'>360</span>     you to give back control of a touch that it turns out is not part of the gesture.
<span class='line'>361</span> 
<span class='line'>362</span>     This takes effect immediately, because you would usually call this from
<span class='line'>363</span>     touchesDragged or such.
<span class='line'>364</span>   */</span><span class="WHIT">
<span class='line'>365</span> </span><span class="WHIT">  </span><span class="COMM">// release: function(touch) {</span><span class="WHIT">
<span class='line'>366</span> </span><span class="WHIT">  </span><span class="COMM">//   if (touch.isTaken) {</span><span class="WHIT">
<span class='line'>367</span> </span><span class="WHIT">  </span><span class="COMM">//     touch.isTaken = NO;</span><span class="WHIT">
<span class='line'>368</span> </span><span class="WHIT">  </span><span class="COMM">//     if (touch.nextTouchResponder) touch.makeTouchResponder(touch.nextTouchResponder);</span><span class="WHIT">
<span class='line'>369</span> </span><span class="WHIT">  </span><span class="COMM">//   }</span><span class="WHIT">
<span class='line'>370</span> </span><span class="WHIT">  </span><span class="COMM">//   //@if(debug)</span><span class="WHIT">
<span class='line'>371</span> </span><span class="WHIT">  </span><span class="COMM">//   else {</span><span class="WHIT">
<span class='line'>372</span> </span><span class="WHIT">  </span><span class="COMM">//     SC.warn("Developer Warning: A gesture tried to release a touch that was not taken: %@".fmt(this));</span><span class="WHIT">
<span class='line'>373</span> </span><span class="WHIT">  </span><span class="COMM">//   }</span><span class="WHIT">
<span class='line'>374</span> </span><span class="WHIT">  </span><span class="COMM">//   //@endif</span><span class="WHIT">
<span class='line'>375</span> </span><span class="WHIT">  </span><span class="COMM">// },</span><span class="WHIT">
<span class='line'>376</span> 
<span class='line'>377</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>378</span>     Discards a touch, making its responder null. This makes the touch go away and never
<span class='line'>379</span>     come back—not to this gesture, nor to any other, nor to the view, nor to any other
<span class='line'>380</span>     view.
<span class='line'>381</span>   */</span><span class="WHIT">
<span class='line'>382</span> </span><span class="WHIT">  </span><span class="COMM">// discardTouch: function(touch) {</span><span class="WHIT">
<span class='line'>383</span> </span><span class="WHIT">  </span><span class="COMM">//   touch.isTaken = YES; // because even changing responder won't prevent it from being used this cycle.</span><span class="WHIT">
<span class='line'>384</span> </span><span class="WHIT">  </span><span class="COMM">//   touch.makeTouchResponder(null);</span><span class="WHIT">
<span class='line'>385</span> </span><span class="WHIT">  </span><span class="COMM">// },</span><span class="WHIT">
<span class='line'>386</span> 
<span class='line'>387</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>388</span>     Called by the view when a touch session has begun.
<span class='line'>389</span> 
<span class='line'>390</span>     You should override this method in your custom SC.Gesturable subclasses to set up any touch
<span class='line'>391</span>     session state. For example, you may want to track the initial touch start time in order to
<span class='line'>392</span>     decide how to react when or if additional touches start later.
<span class='line'>393</span> 
<span class='line'>394</span>     @param {SC.Touch} touch The touch that started the session.
<span class='line'>395</span>     @returns {void}
<span class='line'>396</span>     */</span><span class="WHIT">
<span class='line'>397</span> </span><span class="WHIT">  </span><span class="NAME">touchSessionStarted</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>398</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>399</span> 
<span class='line'>400</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>401</span>     Called by the view when the touch session has ended.
<span class='line'>402</span> 
<span class='line'>403</span>     This will occur because all touches in the session have finished.
<span class='line'>404</span> 
<span class='line'>405</span>     You should override this method in your custom SC.Gesturable subclasses to clean up any state
<span class='line'>406</span>     variables used in the touch session.
<span class='line'>407</span> 
<span class='line'>408</span>     @returns {void}
<span class='line'>409</span>    */</span><span class="WHIT">
<span class='line'>410</span> </span><span class="WHIT">  </span><span class="NAME">touchSessionEnded</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>411</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>412</span> 
<span class='line'>413</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>414</span>     Called by the view when the touch session was cancelled.
<span class='line'>415</span> 
<span class='line'>416</span>     This will occur because this gesture returned `false` in any of `touchAddedToSession`,
<span class='line'>417</span>     `touchesMovedInSession`, `touchEndedInSession`, `touchCancelledInSession` to indicate that the
<span class='line'>418</span>     gesture is no longer interested in the session or because another gesture claimed the touch
<span class='line'>419</span>     session for itself, forcing all other gestures out (rare).
<span class='line'>420</span> 
<span class='line'>421</span>     You should override this method in your custom SC.Gesturable subclasses to clean up any state
<span class='line'>422</span>     variables used in the touch session.
<span class='line'>423</span> 
<span class='line'>424</span>     @returns {void}
<span class='line'>425</span>    */</span><span class="WHIT">
<span class='line'>426</span> </span><span class="WHIT">  </span><span class="NAME">touchSessionCancelled</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>427</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>428</span> 
<span class='line'>429</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>430</span>     @param {SC.Touch} touch The touch to be added to the session.
<span class='line'>431</span>     @param {Array} touchesInSession The touches already in the session.
<span class='line'>432</span>     @returns {Boolean} True if the gesture is still interested in the touch session; false to stop getting notified for any further touch changes in the touch session.
<span class='line'>433</span>     */</span><span class="WHIT">
<span class='line'>434</span> </span><span class="WHIT">  </span><span class="NAME">touchAddedToSession</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touchesInSession</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>435</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Most gestures should theoretically be interested in a new touch session.</span><span class="WHIT">
<span class='line'>436</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>437</span> 
<span class='line'>438</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>439</span>     @param {SC.Touch} touch The touch to be removed from the session.
<span class='line'>440</span>     @param {Array} touchesInSession The touches still remaining in the session.
<span class='line'>441</span>     @returns {Boolean} True if the gesture is still interested in the touch session; false to stop getting notified for any further touch changes in the touch session.
<span class='line'>442</span>     */</span><span class="WHIT">
<span class='line'>443</span> </span><span class="WHIT">  </span><span class="NAME">touchCancelledInSession</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touchesInSession</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>444</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>445</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>446</span> 
<span class='line'>447</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>448</span>     @param {SC.Touch} touch The touch to be removed from the session.
<span class='line'>449</span>     @param {Array} touchesInSession The touches still remaining in the session.
<span class='line'>450</span>     @returns {Boolean} True if the gesture is still interested in the touch session; false to stop getting notified for any further touch changes in the touch session.
<span class='line'>451</span>     */</span><span class="WHIT">
<span class='line'>452</span> </span><span class="WHIT">  </span><span class="NAME">touchEndedInSession</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touchesInSession</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>453</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>454</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>455</span> 
<span class='line'>456</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>457</span>     @param {Array} touchesInSession The touches in the session.
<span class='line'>458</span>     @returns {Boolean} True if the gesture is still interested in the touch session; false to stop getting notified for any further touch changes in the touch session.
<span class='line'>459</span>     */</span><span class="WHIT">
<span class='line'>460</span> </span><span class="WHIT">  </span><span class="NAME">touchesMovedInSession</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touchesInSession</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>461</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>462</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>463</span> 
<span class='line'>464</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>465</span> </span></pre></body></html>