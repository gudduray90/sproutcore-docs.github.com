<html><head><meta http-equiv="content-type" content="text/html; charset=utf8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="COMM">// ==========================================================================</span><span class="WHIT">
<span class='line'>  2</span> </span><span class="COMM">// Project:   SproutCore - JavaScript Application Framework</span><span class="WHIT">
<span class='line'>  3</span> </span><span class="COMM">// Copyright: ©2014 7x7 Software Inc. All rights reserved.</span><span class="WHIT">
<span class='line'>  4</span> </span><span class="COMM">//            Portions ©2008-2011 Apple Inc. All rights reserved.</span><span class="WHIT">
<span class='line'>  5</span> </span><span class="COMM">// License:   Licensed under MIT license (see license.js)</span><span class="WHIT">
<span class='line'>  6</span> </span><span class="COMM">// ==========================================================================</span><span class="WHIT">
<span class='line'>  7</span> </span><span class="NAME">sc_require</span><span class="PUNC">(</span><span class="STRN">'views/scroller'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>  8</span> 
<span class='line'>  9</span> 
<span class='line'> 10</span> </span><span class="NAME">SC.SCROLL</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 11</span> 
<span class='line'> 12</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 13</span>     The rate of deceleration in pixels per square millisecond after scrolling from a drag gesture.
<span class='line'> 14</span> 
<span class='line'> 15</span>     @static
<span class='line'> 16</span>     @type Number
<span class='line'> 17</span>     @default 3.0
<span class='line'> 18</span>   */</span><span class="WHIT">
<span class='line'> 19</span> </span><span class="WHIT">  </span><span class="NAME">DRAG_SCROLL_DECELERATION</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">3.0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 20</span> 
<span class='line'> 21</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 22</span>     The number of pixels a gesture needs to move before it should be considered a scroll gesture.
<span class='line'> 23</span> 
<span class='line'> 24</span>     @static
<span class='line'> 25</span>     @type Number
<span class='line'> 26</span>     @default 5
<span class='line'> 27</span>   */</span><span class="WHIT">
<span class='line'> 28</span> </span><span class="WHIT">  </span><span class="NAME">SCROLL_GESTURE_THRESHOLD</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 29</span> 
<span class='line'> 30</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 31</span>     The number of pixels a gesture needs to move in only a single direction, before it should be
<span class='line'> 32</span>     considered as a locked scrolling direction (i.e. no gestures in the other direction will scroll
<span class='line'> 33</span>     in that direction).
<span class='line'> 34</span> 
<span class='line'> 35</span>     @static
<span class='line'> 36</span>     @type Number
<span class='line'> 37</span>     @default 50
<span class='line'> 38</span>   */</span><span class="WHIT">
<span class='line'> 39</span> </span><span class="WHIT">  </span><span class="NAME">SCROLL_LOCK_GESTURE_THRESHOLD</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">50</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 40</span> 
<span class='line'> 41</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 42</span>     The number of pixels a gesture needs to expand or contract before it should be considered a scale gesture.
<span class='line'> 43</span> 
<span class='line'> 44</span>     @static
<span class='line'> 45</span>     @type Number
<span class='line'> 46</span>     @default 5
<span class='line'> 47</span>   */</span><span class="WHIT">
<span class='line'> 48</span> </span><span class="WHIT">  </span><span class="NAME">SCALE_GESTURE_THRESHOLD</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">3</span><span class="WHIT">
<span class='line'> 49</span> 
<span class='line'> 50</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 51</span> 
<span class='line'> 52</span> 
<span class='line'> 53</span> </span><span class="COMM">/** @class
<span class='line'> 54</span>   Implements a complete scroll view. SproutCore implements its own JS-based scrolling in order
<span class='line'> 55</span>   to unify scrolling behavior across platforms, and to enable progressive rendering (via the
<span class='line'> 56</span>   clipping frame) during scroll on all devices.
<span class='line'> 57</span> 
<span class='line'> 58</span>   Important Properties
<span class='line'> 59</span>   -----
<span class='line'> 60</span> 
<span class='line'> 61</span>   ScrollView positions its contentView according to three properties: `verticalScrollOffset`,
<span class='line'> 62</span>   `horizontalScrollOffset`, and `scale`. These properties are bindable and observable, but you
<span class='line'> 63</span>   should not override them.
<span class='line'> 64</span> 
<span class='line'> 65</span>   Gutter vs. Overlaid Scrollers
<span class='line'> 66</span>   -----
<span class='line'> 67</span> 
<span class='line'> 68</span>   Scroll views use swappable scroll-bar views with various behavior (see `verticalScrollerView`
<span class='line'> 69</span>   and `horizontalScrollerView`). `SC.ScrollerView` is a gutter-based scroller which persists and
<span class='line'> 70</span>   takes up fourteen pixels. (By default, no scroller is shown for content that is too small to
<span class='line'> 71</span>   scroll; see `autohidesHorizontalScroller` and `autohidesVerticalScroller`.) `SC.OverlayScrollerView`
<span class='line'> 72</span>   is a gutterless view which fades when not scrolling. If you would like your view to always have
<span class='line'> 73</span>   OS X-style fading overlaid scrollers, you can use the following:
<span class='line'> 74</span> 
<span class='line'> 75</span>         SC.ScrollView.extend({
<span class='line'> 76</span>           horizontalOverlay: true,
<span class='line'> 77</span>           verticalOverlay: true
<span class='line'> 78</span>         });
<span class='line'> 79</span> 
<span class='line'> 80</span>   @extends SC.View
<span class='line'> 81</span>   @since SproutCore 1.0
<span class='line'> 82</span> */</span><span class="WHIT">
<span class='line'> 83</span> </span><span class="NAME">SC.ScrollView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.View.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 84</span> </span><span class="COMM">/** @scope SC.ScrollView.prototype */</span><span class="WHIT">
<span class='line'> 85</span> 
<span class='line'> 86</span> </span><span class="WHIT">  </span><span class="COMM">// ---------------------------------------------------------------------------------------------</span><span class="WHIT">
<span class='line'> 87</span> </span><span class="WHIT">  </span><span class="COMM">// Properties</span><span class="WHIT">
<span class='line'> 88</span> </span><span class="WHIT">  </span><span class="COMM">//</span><span class="WHIT">
<span class='line'> 89</span> 
<span class='line'> 90</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag used to determine whether to animate the adjustment. */</span><span class="WHIT">
<span class='line'> 91</span> </span><span class="WHIT">  </span><span class="NAME">_sc_animationDuration</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 92</span> 
<span class='line'> 93</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The animation timing to use. */</span><span class="WHIT">
<span class='line'> 94</span> </span><span class="WHIT">  </span><span class="NAME">_sc_animationTiming</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 95</span> 
<span class='line'> 96</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The cached height of the container. */</span><span class="WHIT">
<span class='line'> 97</span> </span><span class="WHIT">  </span><span class="NAME">_sc_containerHeight</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 98</span> 
<span class='line'> 99</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The cached offset of the container. */</span><span class="WHIT">
<span class='line'>100</span> </span><span class="WHIT">  </span><span class="NAME">_sc_containerOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>101</span> 
<span class='line'>102</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The cached width of the container. */</span><span class="WHIT">
<span class='line'>103</span> </span><span class="WHIT">  </span><span class="NAME">_sc_containerWidth</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>104</span> 
<span class='line'>105</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The cached height of the content. */</span><span class="WHIT">
<span class='line'>106</span> </span><span class="WHIT">  </span><span class="NAME">_sc_contentHeight</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>107</span> 
<span class='line'>108</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag used to react accordingly when the content's height changes. */</span><span class="WHIT">
<span class='line'>109</span> </span><span class="WHIT">  </span><span class="NAME">_sc_contentHeightDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>110</span> 
<span class='line'>111</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The cached scale of the content. */</span><span class="WHIT">
<span class='line'>112</span> </span><span class="WHIT">  </span><span class="NAME">_sc_contentScale</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>113</span> 
<span class='line'>114</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag used to react accordingly when the content's scale changes. */</span><span class="WHIT">
<span class='line'>115</span> </span><span class="WHIT">  </span><span class="NAME">_sc_contentScaleDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>116</span> 
<span class='line'>117</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The cached width of the content. */</span><span class="WHIT">
<span class='line'>118</span> </span><span class="WHIT">  </span><span class="NAME">_sc_contentWidth</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>119</span> 
<span class='line'>120</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag used to react accordingly when the content's width changes. */</span><span class="WHIT">
<span class='line'>121</span> </span><span class="WHIT">  </span><span class="NAME">_sc_contentWidthDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>122</span> 
<span class='line'>123</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The anchor horizontal offset of the touch gesture. */</span><span class="WHIT">
<span class='line'>124</span> </span><span class="WHIT">  </span><span class="NAME">_sc_gestureAnchorHOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>125</span> 
<span class='line'>126</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The anchor position of the initial touch gesture. */</span><span class="WHIT">
<span class='line'>127</span> </span><span class="WHIT">  </span><span class="NAME">_sc_gestureAnchorTotalD</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>128</span> 
<span class='line'>129</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The anchor position of the initial touch gesture. */</span><span class="WHIT">
<span class='line'>130</span> </span><span class="WHIT">  </span><span class="NAME">_sc_gestureAnchorTotalX</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>131</span> 
<span class='line'>132</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The anchor position of the initial touch gesture. */</span><span class="WHIT">
<span class='line'>133</span> </span><span class="WHIT">  </span><span class="NAME">_sc_gestureAnchorTotalY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>134</span> 
<span class='line'>135</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The anchor vertical offset of the touch gesture. */</span><span class="WHIT">
<span class='line'>136</span> </span><span class="WHIT">  </span><span class="NAME">_sc_gestureAnchorVOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>137</span> 
<span class='line'>138</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The anchor position of the last touch gesture. */</span><span class="WHIT">
<span class='line'>139</span> </span><span class="WHIT">  </span><span class="NAME">_sc_gestureAnchorX</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>140</span> 
<span class='line'>141</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The anchor position of the last touch gesture. */</span><span class="WHIT">
<span class='line'>142</span> </span><span class="WHIT">  </span><span class="NAME">_sc_gestureAnchorY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>143</span> 
<span class='line'>144</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The anchor distance from center of the last touch gesture. */</span><span class="WHIT">
<span class='line'>145</span> </span><span class="WHIT">  </span><span class="NAME">_sc_gestureAnchorD</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>146</span> 
<span class='line'>147</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The original scale before a touch gesture. */</span><span class="WHIT">
<span class='line'>148</span> </span><span class="WHIT">  </span><span class="NAME">_sc_gestureAnchorScale</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>149</span> 
<span class='line'>150</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The timer used to fade out this scroller. */</span><span class="WHIT">
<span class='line'>151</span> </span><span class="WHIT">  </span><span class="NAME">_sc_horizontalFadeOutTimer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>152</span> 
<span class='line'>153</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The actual horizontal scroll offset. */</span><span class="WHIT">
<span class='line'>154</span> </span><span class="WHIT">  </span><span class="NAME">_sc_horizontalScrollOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>155</span> 
<span class='line'>156</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The percentage offset scrolled horizontally. Used to maintain the horizontal position when the content size changes. */</span><span class="WHIT">
<span class='line'>157</span> </span><span class="WHIT">  </span><span class="NAME">_sc_horizontalPct</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>158</span> 
<span class='line'>159</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag is true when scaling. Used in capturing touches. */</span><span class="WHIT">
<span class='line'>160</span> </span><span class="WHIT">  </span><span class="NAME">_sc_isTouchScaling</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>161</span> 
<span class='line'>162</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag is true when scrolling horizontally. Used in capturing touches. */</span><span class="WHIT">
<span class='line'>163</span> </span><span class="WHIT">  </span><span class="NAME">_sc_isTouchScrollingH</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>164</span> 
<span class='line'>165</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag is true when scrolling is locked to horizontal. */</span><span class="WHIT">
<span class='line'>166</span> </span><span class="WHIT">  </span><span class="NAME">_sc_isTouchScrollingHOnly</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>167</span> 
<span class='line'>168</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag is true when scrolling vertically. Used in capturing touches. */</span><span class="WHIT">
<span class='line'>169</span> </span><span class="WHIT">  </span><span class="NAME">_sc_isTouchScrollingV</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>170</span> 
<span class='line'>171</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag is true when scrolling is locked to vertical. */</span><span class="WHIT">
<span class='line'>172</span> </span><span class="WHIT">  </span><span class="NAME">_sc_isTouchScrollingVOnly</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>173</span> 
<span class='line'>174</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The minimum delay before applying a fade transition. */</span><span class="WHIT">
<span class='line'>175</span> </span><span class="WHIT">  </span><span class="NAME">_sc_minimumFadeOutDelay</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>176</span> </span><span class="WHIT">    </span><span class="COMM">// The fade out delay is never less than 100ms (so that the current run loop can complete) and is never less than the fade in duration (so that it can fade fully in).</span><span class="WHIT">
<span class='line'>177</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'fadeOutDelay'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0.1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'fadeInDuration'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">1000</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>178</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="STRN">'fadeOutDelay'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cacheable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>179</span> 
<span class='line'>180</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The amount of slip while over dragging (drag past bounds). 1.0 or 100% would slip completely, and 0.0 or 0% would not slip at all.  */</span><span class="WHIT">
<span class='line'>181</span> </span><span class="WHIT">  </span><span class="NAME">_sc_overDragSlip</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>182</span> 
<span class='line'>183</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Timer used to pass a touch through to its content if we don't start scrolling in that time. */</span><span class="WHIT">
<span class='line'>184</span> </span><span class="WHIT">  </span><span class="NAME">_sc_passTouchToContentTimer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>185</span> 
<span class='line'>186</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The actual scale. */</span><span class="WHIT">
<span class='line'>187</span> </span><span class="WHIT">  </span><span class="NAME">_sc_scale</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>188</span> 
<span class='line'>189</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag used to indicate when we should resize the content width manually. */</span><span class="WHIT">
<span class='line'>190</span> </span><span class="WHIT">  </span><span class="COMM">// _sc_shouldResizeContentWidth: false,</span><span class="WHIT">
<span class='line'>191</span> 
<span class='line'>192</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Flag used to indicate when we should resize the content height manually. */</span><span class="WHIT">
<span class='line'>193</span> </span><span class="WHIT">  </span><span class="COMM">// _sc_shouldResizeContentHeight: false,</span><span class="WHIT">
<span class='line'>194</span> 
<span class='line'>195</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The offset center x of a multi-touch gesture. */</span><span class="WHIT">
<span class='line'>196</span> </span><span class="WHIT">  </span><span class="NAME">_sc_touchCenterX</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>197</span> 
<span class='line'>198</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The offset center y of a multi-touch gesture. */</span><span class="WHIT">
<span class='line'>199</span> </span><span class="WHIT">  </span><span class="NAME">_sc_touchCenterY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>200</span> 
<span class='line'>201</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The timer used to fade out this scroller. */</span><span class="WHIT">
<span class='line'>202</span> </span><span class="WHIT">  </span><span class="NAME">_sc_verticalFadeOutTimer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>203</span> 
<span class='line'>204</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The actual vertical scroll offset. */</span><span class="WHIT">
<span class='line'>205</span> </span><span class="WHIT">  </span><span class="NAME">_sc_verticalScrollOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>206</span> 
<span class='line'>207</span> </span><span class="WHIT">  </span><span class="COMM">/** @private The percentage offset scrolled vertically. Used to maintain the vertical position when the content size changes. */</span><span class="WHIT">
<span class='line'>208</span> </span><span class="WHIT">  </span><span class="NAME">_sc_verticalPct</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>209</span> 
<span class='line'>210</span> </span><span class="WHIT">  </span><span class="COMM">/** @see SC.View.prototype.acceptsMultitouch
<span class='line'>211</span> 
<span class='line'>212</span>     @type Boolean
<span class='line'>213</span>     @default true
<span class='line'>214</span>   */</span><span class="WHIT">
<span class='line'>215</span> </span><span class="WHIT">  </span><span class="NAME">acceptsMultitouch</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>216</span> 
<span class='line'>217</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Animation curves. Kept private b/c it will likely become a computed property. */</span><span class="WHIT">
<span class='line'>218</span> </span><span class="WHIT">  </span><span class="NAME">animationCurveDecelerate</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.easingCurve</span><span class="PUNC">(</span><span class="NUMB">0.35</span><span class="PUNC">,</span><span class="NUMB">0.34</span><span class="PUNC">,</span><span class="NUMB">0.84</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// 'cubic-bezier(.35,.34,.84,1)',  // http://cubic-bezier.com</span><span class="WHIT">
<span class='line'>219</span> 
<span class='line'>220</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Animation curves. Kept private b/c it will likely become a computed property. */</span><span class="WHIT">
<span class='line'>221</span> </span><span class="WHIT">  </span><span class="NAME">animationCurveReverse</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.easingCurve</span><span class="PUNC">(</span><span class="NUMB">0.45</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">0.47</span><span class="PUNC">,</span><span class="NUMB">0.73</span><span class="PUNC">,</span><span class="NUMB">1.3</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// 'cubic-bezier(0.45,-0.47,0.73,1.3)',</span><span class="WHIT">
<span class='line'>222</span> 
<span class='line'>223</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Animation curves. Kept private b/c it will likely become a computed property. */</span><span class="WHIT">
<span class='line'>224</span> </span><span class="WHIT">  </span><span class="NAME">animationCurveSnap</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.easingCurve</span><span class="PUNC">(</span><span class="NUMB">0.28</span><span class="PUNC">,</span><span class="NUMB">0.36</span><span class="PUNC">,</span><span class="NUMB">0.52</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// 'cubic-bezier(.28,.36,.52,1)',</span><span class="WHIT">
<span class='line'>225</span> 
<span class='line'>226</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>227</span>     If true, the horizontal scroller will automatically hide if the contentView is smaller than the
<span class='line'>228</span>     visible area.  The `hasHorizontalScroller` property must be set to true in order for this property
<span class='line'>229</span>     to have any effect.
<span class='line'>230</span> 
<span class='line'>231</span>     @type Boolean
<span class='line'>232</span>     @default true
<span class='line'>233</span>   */</span><span class="WHIT">
<span class='line'>234</span> </span><span class="WHIT">  </span><span class="NAME">autohidesHorizontalScroller</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>235</span> 
<span class='line'>236</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>237</span>     If true, the vertical scroller will automatically hide if the contentView is smaller than the
<span class='line'>238</span>     visible area.  The `hasVerticalScroller` property must be set to true in order for this property
<span class='line'>239</span>     to have any effect.
<span class='line'>240</span> 
<span class='line'>241</span>     @type Boolean
<span class='line'>242</span>     @default true
<span class='line'>243</span>   */</span><span class="WHIT">
<span class='line'>244</span> </span><span class="WHIT">  </span><span class="NAME">autohidesVerticalScroller</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>245</span> 
<span class='line'>246</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>247</span>     Determines whether scaling is allowed.
<span class='line'>248</span> 
<span class='line'>249</span>     @type Boolean
<span class='line'>250</span>     @default false
<span class='line'>251</span>   */</span><span class="WHIT">
<span class='line'>252</span> </span><span class="WHIT">  </span><span class="NAME">canScale</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>253</span> 
<span class='line'>254</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>255</span>     Returns true if the view has both a horizontal scroller and the scroller is visible.
<span class='line'>256</span> 
<span class='line'>257</span>     @field
<span class='line'>258</span>     @type Boolean
<span class='line'>259</span>     @readonly
<span class='line'>260</span>   */</span><span class="WHIT">
<span class='line'>261</span> </span><span class="WHIT">  </span><span class="NAME">canScrollHorizontal</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>262</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'hasHorizontalScroller'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="COMM">// This property isn't bindable.</span><span class="WHIT">
<span class='line'>263</span> </span><span class="WHIT">      </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollerView'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="COMM">// This property isn't bindable.</span><span class="WHIT">
<span class='line'>264</span> </span><span class="WHIT">      </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'isHorizontalScrollerVisible'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>265</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="STRN">'isHorizontalScrollerVisible'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cacheable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>266</span> 
<span class='line'>267</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>268</span>     Returns true if the view has both a vertical scroller and the scroller is visible.
<span class='line'>269</span> 
<span class='line'>270</span>     @field
<span class='line'>271</span>     @type Boolean
<span class='line'>272</span>     @readonly
<span class='line'>273</span>   */</span><span class="WHIT">
<span class='line'>274</span> </span><span class="WHIT">  </span><span class="NAME">canScrollVertical</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>275</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'hasVerticalScroller'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="COMM">// This property isn't bindable.</span><span class="WHIT">
<span class='line'>276</span> </span><span class="WHIT">      </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollerView'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="COMM">// This property isn't bindable.</span><span class="WHIT">
<span class='line'>277</span> </span><span class="WHIT">      </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'isVerticalScrollerVisible'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>278</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="STRN">'isVerticalScrollerVisible'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cacheable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>279</span> 
<span class='line'>280</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>281</span>     @type Array
<span class='line'>282</span>     @default ['sc-scroll-view']
<span class='line'>283</span>     @see SC.View#classNames
<span class='line'>284</span>   */</span><span class="WHIT">
<span class='line'>285</span> </span><span class="WHIT">  </span><span class="NAME">classNames</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'sc-scroll-view'</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>286</span> 
<span class='line'>287</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>288</span>     The container view that will wrap your content view.  You can replace this property with your own
<span class='line'>289</span>     custom class if you prefer.
<span class='line'>290</span> 
<span class='line'>291</span>     @type SC.ContainerView
<span class='line'>292</span>     @default SC.ContainerView
<span class='line'>293</span>   */</span><span class="WHIT">
<span class='line'>294</span> </span><span class="WHIT">  </span><span class="NAME">containerView</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.ContainerView</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>295</span> 
<span class='line'>296</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>297</span>     The content view you want the scroll view to manage.
<span class='line'>298</span> 
<span class='line'>299</span>     @type SC.View
<span class='line'>300</span>     @default null
<span class='line'>301</span>   */</span><span class="WHIT">
<span class='line'>302</span> </span><span class="WHIT">  </span><span class="NAME">contentView</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>303</span> 
<span class='line'>304</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>305</span>     The scroll deceleration rate.
<span class='line'>306</span> 
<span class='line'>307</span>     @type Number
<span class='line'>308</span>     @default SC.SCROLL.DRAG_SCROLL_DECELERATION
<span class='line'>309</span>   */</span><span class="WHIT">
<span class='line'>310</span> </span><span class="WHIT">  </span><span class="NAME">decelerationRate</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.SCROLL.DRAG_SCROLL_DECELERATION</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>311</span> 
<span class='line'>312</span> </span><span class="WHIT">  </span><span class="COMM">/** @private
<span class='line'>313</span>     Whether to delay touches from passing through to the content. By default, if the touch moves enough to
<span class='line'>314</span>     trigger a scroll within 150ms, this view will retain control of the touch, and content views will not
<span class='line'>315</span>     have a chance to handle it. This is generally the behavior you want.
<span class='line'>316</span> 
<span class='line'>317</span>     If you set this to NO, the touch will not trigger a scroll until you pass control back to this view via
<span class='line'>318</span>     `touch.restoreLastTouchResponder`, for example when the touch has dragged by a certain amount. You should
<span class='line'>319</span>     use this option only if you know what you're doing.
<span class='line'>320</span> 
<span class='line'>321</span>     @type Boolean
<span class='line'>322</span>     @default true
<span class='line'>323</span>   */</span><span class="WHIT">
<span class='line'>324</span> </span><span class="WHIT">  </span><span class="NAME">delaysContentTouches</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>325</span> 
<span class='line'>326</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>327</span>     Determines how long (in seconds) scrollbars wait before fading out.
<span class='line'>328</span> 
<span class='line'>329</span>     @property Number
<span class='line'>330</span>     @default 0.4
<span class='line'>331</span>    */</span><span class="WHIT">
<span class='line'>332</span> </span><span class="WHIT">  </span><span class="NAME">fadeOutDelay</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0.4</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>333</span> 
<span class='line'>334</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>335</span>     True if the view should maintain a horizontal scroller.   This property must be set when the
<span class='line'>336</span>     view is created.
<span class='line'>337</span> 
<span class='line'>338</span>     @type Boolean
<span class='line'>339</span>     @default true
<span class='line'>340</span>   */</span><span class="WHIT">
<span class='line'>341</span> </span><span class="WHIT">  </span><span class="NAME">hasHorizontalScroller</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>342</span> 
<span class='line'>343</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>344</span>     True if the view should maintain a vertical scroller.   This property must be set when the
<span class='line'>345</span>     view is created.
<span class='line'>346</span> 
<span class='line'>347</span>     @type Boolean
<span class='line'>348</span>     @default true
<span class='line'>349</span>   */</span><span class="WHIT">
<span class='line'>350</span> </span><span class="WHIT">  </span><span class="NAME">hasVerticalScroller</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>351</span> 
<span class='line'>352</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>353</span>     The horizontal alignment for non-filling content inside of the ScrollView. Possible values:
<span class='line'>354</span> 
<span class='line'>355</span>       - SC.ALIGN_LEFT
<span class='line'>356</span>       - SC.ALIGN_RIGHT
<span class='line'>357</span>       - SC.ALIGN_CENTER
<span class='line'>358</span> 
<span class='line'>359</span>     @type String
<span class='line'>360</span>     @default SC.ALIGN_CENTER
<span class='line'>361</span>   */</span><span class="WHIT">
<span class='line'>362</span> </span><span class="WHIT">  </span><span class="NAME">horizontalAlign</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_CENTER</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>363</span> 
<span class='line'>364</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>365</span>     Determines whether the horizontal scroller should fade out while in overlay mode. Has no effect
<span class='line'>366</span>     if `horizontalOverlay` is set to false.
<span class='line'>367</span> 
<span class='line'>368</span>     @property Boolean
<span class='line'>369</span>     @default true
<span class='line'>370</span>    */</span><span class="WHIT">
<span class='line'>371</span> </span><span class="WHIT">  </span><span class="NAME">horizontalFade</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>372</span> 
<span class='line'>373</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>374</span>     Amount to scroll one horizontal line.
<span class='line'>375</span> 
<span class='line'>376</span>     Used by the default implementation of scrollLeftLine() and
<span class='line'>377</span>     scrollRightLine().
<span class='line'>378</span> 
<span class='line'>379</span>     @type Number
<span class='line'>380</span>     @default 20
<span class='line'>381</span>   */</span><span class="WHIT">
<span class='line'>382</span> </span><span class="WHIT">  </span><span class="NAME">horizontalLineScroll</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">20</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>383</span> 
<span class='line'>384</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>385</span>     Use this to overlay the horizontal scroller.
<span class='line'>386</span> 
<span class='line'>387</span>     This ensures that the content container will not resize to accommodate the horizontal scroller,
<span class='line'>388</span>     hence overlaying the scroller on top of the container.
<span class='line'>389</span> 
<span class='line'>390</span>     @field
<span class='line'>391</span>     @type Boolean
<span class='line'>392</span>     @default true
<span class='line'>393</span>   */</span><span class="WHIT">
<span class='line'>394</span> </span><span class="WHIT">  </span><span class="NAME">horizontalOverlay</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>395</span> 
<span class='line'>396</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>397</span>     Amount to scroll one horizontal page.
<span class='line'>398</span> 
<span class='line'>399</span>     Used by the default implementation of scrollLeftPage() and scrollRightPage().
<span class='line'>400</span> 
<span class='line'>401</span>     @field
<span class='line'>402</span>     @type Number
<span class='line'>403</span>     @default value of frame.width
<span class='line'>404</span>     @observes frame
<span class='line'>405</span>   */</span><span class="WHIT">
<span class='line'>406</span> </span><span class="WHIT">  </span><span class="NAME">horizontalPageScroll</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>407</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'frame'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">width</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>408</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="STRN">'frame'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>409</span> 
<span class='line'>410</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>411</span>     The current horizontal scroll offset. Changing this value will update both the position of the
<span class='line'>412</span>     contentView and the horizontal scroller, if there is one.
<span class='line'>413</span> 
<span class='line'>414</span>     @field
<span class='line'>415</span>     @type Number
<span class='line'>416</span>     @default 0
<span class='line'>417</span>   */</span><span class="WHIT">
<span class='line'>418</span> </span><span class="WHIT">  </span><span class="NAME">horizontalScrollOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>419</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_containerWidth</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>420</span> </span><span class="WHIT">        </span><span class="NAME">contentWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentWidth</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>421</span> </span><span class="WHIT">        </span><span class="NAME">min</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>422</span> </span><span class="WHIT">        </span><span class="NAME">max</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>423</span> 
<span class='line'>424</span> </span><span class="WHIT">    </span><span class="COMM">/* jshint eqnull:true */</span><span class="WHIT">
<span class='line'>425</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>426</span> </span><span class="WHIT">      </span><span class="COMM">// When touch scrolling, we allow scroll to pass the limits by a small amount.</span><span class="WHIT">
<span class='line'>427</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._sc_isTouchScrollingH</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>428</span> </span><span class="WHIT">        </span><span class="COMM">// Constrain to the set limits.</span><span class="WHIT">
<span class='line'>429</span> </span><span class="WHIT">        </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">min</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">max</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>430</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>431</span> 
<span class='line'>432</span> </span><span class="WHIT">      </span><span class="COMM">// Record the relative percentage offset for maintaining position while scaling.</span><span class="WHIT">
<span class='line'>433</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentWidth</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>434</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_horizontalPct</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">containerWidth</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>435</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>436</span> 
<span class='line'>437</span> </span><span class="WHIT">    </span><span class="COMM">// Use the cached value.</span><span class="WHIT">
<span class='line'>438</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>439</span> </span><span class="WHIT">      </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_horizontalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>440</span> 
<span class='line'>441</span> </span><span class="WHIT">      </span><span class="COMM">// Default value.</span><span class="WHIT">
<span class='line'>442</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>443</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">horizontalAlign</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'initialHorizontalAlign'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>444</span> 
<span class='line'>445</span> </span><span class="WHIT">        </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_alignedHorizontalOffset</span><span class="PUNC">(</span><span class="NAME">horizontalAlign</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>446</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>447</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>448</span> 
<span class='line'>449</span> </span><span class="WHIT">    </span><span class="COMM">// Update the actual value.</span><span class="WHIT">
<span class='line'>450</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>451</span> 
<span class='line'>452</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>453</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cacheable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>454</span> 
<span class='line'>455</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>456</span>     Use to control the positioning of the horizontal scroller. If you do not set 'horizontalOverlay' to
<span class='line'>457</span>     true, then the content view will be automatically sized to meet the left edge of the vertical
<span class='line'>458</span>     scroller, wherever it may be.
<span class='line'>459</span> 
<span class='line'>460</span>     This allows you to easily, for example, have “one pixel higher and one pixel lower” scroll bars
<span class='line'>461</span>     that blend into their parent views.
<span class='line'>462</span> 
<span class='line'>463</span>     If you do set 'horizontalOverlay' to true, then the scroller view will “float on top” of the content view.
<span class='line'>464</span> 
<span class='line'>465</span>     Example: { left: -1, bottom: 0, right: -1 }
<span class='line'>466</span> 
<span class='line'>467</span>     @type Object
<span class='line'>468</span>     @default null
<span class='line'>469</span>   */</span><span class="WHIT">
<span class='line'>470</span> </span><span class="WHIT">  </span><span class="NAME">horizontalScrollerLayout</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>471</span> 
<span class='line'>472</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>473</span>     The horizontal scroller view class. This will be replaced with a view instance when the
<span class='line'>474</span>     ScrollView is created unless `hasHorizontalScroller` is false.
<span class='line'>475</span> 
<span class='line'>476</span>     If `horizontalOverlay` is `true`, the default view used will be an SC.OverlayScrollerView,
<span class='line'>477</span>     otherwise SC.ScrollerView will be used.
<span class='line'>478</span> 
<span class='line'>479</span>     @type SC.View
<span class='line'>480</span>     @default SC.ScrollerView | SC.OverlayScrollerView
<span class='line'>481</span>   */</span><span class="WHIT">
<span class='line'>482</span> </span><span class="WHIT">  </span><span class="NAME">horizontalScrollerView</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>483</span> 
<span class='line'>484</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>485</span>     Your content view's initial horizontal alignment, if wider than the container. This allows you to e.g.
<span class='line'>486</span>     center the content view when zoomed out, but begin with it zoomed in and left-aligned. If not specified,
<span class='line'>487</span>     defaults to value of `horizontalAlign`. May be:
<span class='line'>488</span> 
<span class='line'>489</span>       - SC.ALIGN_LEFT
<span class='line'>490</span>       - SC.ALIGN_RIGHT
<span class='line'>491</span>       - SC.ALIGN_CENTER
<span class='line'>492</span> 
<span class='line'>493</span>     @type String
<span class='line'>494</span>     @default SC.ALIGN_LEFT
<span class='line'>495</span>   */</span><span class="WHIT">
<span class='line'>496</span> </span><span class="WHIT">  </span><span class="NAME">initialHorizontalAlign</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.outlet</span><span class="PUNC">(</span><span class="STRN">'horizontalAlign'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>497</span> 
<span class='line'>498</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>499</span>     Your content view's initial vertical alignment, if taller than the container. This allows you to e.g.
<span class='line'>500</span>     center the content view when zoomed out, but begin with it zoomed in and top-aligned. If not specified,
<span class='line'>501</span>     defaults to the value of `verticalAlign`. May be:
<span class='line'>502</span> 
<span class='line'>503</span>       - SC.ALIGN_TOP
<span class='line'>504</span>       - SC.ALIGN_BOTTOM
<span class='line'>505</span>       - SC.ALIGN_MIDDLE
<span class='line'>506</span> 
<span class='line'>507</span>     @type String
<span class='line'>508</span>     @default SC.ALIGN_TOP
<span class='line'>509</span>   */</span><span class="WHIT">
<span class='line'>510</span> </span><span class="WHIT">  </span><span class="NAME">initialVerticalAlign</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.outlet</span><span class="PUNC">(</span><span class="STRN">'verticalAlign'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>511</span> 
<span class='line'>512</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>513</span>     True if the horizontal scroller should be visible. You can change this property value anytime to
<span class='line'>514</span>     show or hide the horizontal scroller.  If you do not want to use a horizontal scroller at all, you
<span class='line'>515</span>     should instead set `hasHorizontalScroller` to false to avoid creating a scroller view in the first
<span class='line'>516</span>     place.
<span class='line'>517</span> 
<span class='line'>518</span>     @type Boolean
<span class='line'>519</span>     @default true
<span class='line'>520</span>   */</span><span class="WHIT">
<span class='line'>521</span> </span><span class="WHIT">  </span><span class="NAME">isHorizontalScrollerVisible</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>522</span> 
<span class='line'>523</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>524</span>     Walk like a duck.
<span class='line'>525</span> 
<span class='line'>526</span>     @type Boolean
<span class='line'>527</span>     @default true
<span class='line'>528</span>     @readOnly
<span class='line'>529</span>   */</span><span class="WHIT">
<span class='line'>530</span> </span><span class="WHIT">  </span><span class="NAME">isScrollable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>531</span> 
<span class='line'>532</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>533</span>     True if the vertical scroller should be visible. You can change this property value anytime to
<span class='line'>534</span>     show or hide the vertical scroller.  If you do not want to use a vertical scroller at all, you
<span class='line'>535</span>     should instead set `hasVerticalScroller` to false to avoid creating a scroller view in the first
<span class='line'>536</span>     place.
<span class='line'>537</span> 
<span class='line'>538</span>     @type Boolean
<span class='line'>539</span>     @default true
<span class='line'>540</span>   */</span><span class="WHIT">
<span class='line'>541</span> </span><span class="WHIT">  </span><span class="NAME">isVerticalScrollerVisible</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>542</span> 
<span class='line'>543</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>544</span>     The maximum horizontal scroll offset allowed given the current contentView size and the size of
<span class='line'>545</span>     the scroll view.  If horizontal scrolling is disabled, this will always return 0.
<span class='line'>546</span> 
<span class='line'>547</span>     @field
<span class='line'>548</span>     @type Number
<span class='line'>549</span>     @default 0
<span class='line'>550</span>   */</span><span class="WHIT">
<span class='line'>551</span> </span><span class="WHIT">  </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>552</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">this._sc_contentWidth</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_containerWidth</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>553</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="STRN">'_sc_containerWidth'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'_sc_contentWidth'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cacheable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>554</span> 
<span class='line'>555</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>556</span>     The maximum scale.
<span class='line'>557</span> 
<span class='line'>558</span>     @type Number
<span class='line'>559</span>     @default 2.0
<span class='line'>560</span>   */</span><span class="WHIT">
<span class='line'>561</span> </span><span class="WHIT">  </span><span class="NAME">maximumScale</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2.0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>562</span> 
<span class='line'>563</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>564</span>     The maximum vertical scroll offset allowed given the current contentView size and the size of
<span class='line'>565</span>     the scroll view.  If vertical scrolling is disabled, this will always return 0 (or whatever
<span class='line'>566</span>     alignment dictates).
<span class='line'>567</span> 
<span class='line'>568</span>     @field
<span class='line'>569</span>     @type Number
<span class='line'>570</span>     @default 0
<span class='line'>571</span>   */</span><span class="WHIT">
<span class='line'>572</span> </span><span class="WHIT">  </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>573</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">this._sc_contentHeight</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_containerHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>574</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="STRN">'_sc_containerHeight'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'_sc_contentHeight'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cacheable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>575</span> 
<span class='line'>576</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>577</span>     The minimum horizontal scroll offset allowed given the current contentView size and the size of
<span class='line'>578</span>     the scroll view.  If horizontal scrolling is disabled, this will always return 0 (or whatever alignment dictates).
<span class='line'>579</span> 
<span class='line'>580</span>     @field
<span class='line'>581</span>     @type Number
<span class='line'>582</span>     @default 0
<span class='line'>583</span>   */</span><span class="WHIT">
<span class='line'>584</span> </span><span class="WHIT">  </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>585</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">this._sc_contentWidth</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_containerWidth</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>586</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="STRN">'_sc_containerWidth'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'_sc_contentWidth'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cacheable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>587</span> 
<span class='line'>588</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>589</span>     The minimum scale.
<span class='line'>590</span> 
<span class='line'>591</span>     @type Number
<span class='line'>592</span>     @default 0.25
<span class='line'>593</span>   */</span><span class="WHIT">
<span class='line'>594</span> </span><span class="WHIT">  </span><span class="NAME">minimumScale</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0.25</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>595</span> 
<span class='line'>596</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>597</span>     The minimum vertical scroll offset allowed given the current contentView size and the size of
<span class='line'>598</span>     the scroll view.  If vertical scrolling is disabled, this will always return 0 (or whatever alignment dictates).
<span class='line'>599</span> 
<span class='line'>600</span>     @field
<span class='line'>601</span>     @type Number
<span class='line'>602</span>     @default 0
<span class='line'>603</span>   */</span><span class="WHIT">
<span class='line'>604</span> </span><span class="WHIT">  </span><span class="NAME">minimumVerticalScrollOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>605</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">this._sc_contentHeight</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_containerHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>606</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="STRN">'_sc_containerHeight'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'_sc_contentHeight'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cacheable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>607</span> 
<span class='line'>608</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>609</span>     The current scale. Setting this will adjust the scale of the contentView.
<span class='line'>610</span> 
<span class='line'>611</span>     If the contentView implements the SC.Scalable protocol, it will instead pass the scale to the contentView's
<span class='line'>612</span>     `applyScale` method instead.
<span class='line'>613</span> 
<span class='line'>614</span>     Note that on platforms that allow bounce, setting scale outside of the minimum/maximumScale bounds will
<span class='line'>615</span>     result in a bounce. It is up to the developer to alert this view when the action is over and it should
<span class='line'>616</span>     bounce back.
<span class='line'>617</span> 
<span class='line'>618</span>     @field
<span class='line'>619</span>     @type Number
<span class='line'>620</span>     @default 1.0
<span class='line'>621</span>   */</span><span class="WHIT">
<span class='line'>622</span> </span><span class="WHIT">  </span><span class="NAME">scale</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>623</span> </span><span class="WHIT">    </span><span class="COMM">/* jshint eqnull:true */</span><span class="WHIT">
<span class='line'>624</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>625</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScale'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>626</span> </span><span class="WHIT">        </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>627</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>628</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">min</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumScale'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>629</span> </span><span class="WHIT">          </span><span class="NAME">max</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumScale'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>630</span> 
<span class='line'>631</span> </span><span class="WHIT">        </span><span class="COMM">// When touch scaling, we allow scaling to pass the limits by a small amount.</span><span class="WHIT">
<span class='line'>632</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_isTouchScaling</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>633</span> </span><span class="WHIT">          </span><span class="NAME">min</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">min</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">min</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">0.1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>634</span> </span><span class="WHIT">          </span><span class="NAME">max</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">max</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">max</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">0.1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>635</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">min</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">max</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>636</span> </span><span class="WHIT">            </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">min</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">max</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>637</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>638</span> 
<span class='line'>639</span> </span><span class="WHIT">        </span><span class="COMM">// Constrain to the set limits.</span><span class="WHIT">
<span class='line'>640</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>641</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">min</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">max</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>642</span> </span><span class="WHIT">            </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">min</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">max</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>643</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>644</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>645</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>646</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>647</span> </span><span class="WHIT">      </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_scale</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>648</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>649</span> 
<span class='line'>650</span> </span><span class="WHIT">    </span><span class="COMM">// Update the actual value.</span><span class="WHIT">
<span class='line'>651</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>652</span> 
<span class='line'>653</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>654</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="STRN">'canScale'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'minimumScale'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'maximumScale'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cacheable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>655</span> 
<span class='line'>656</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>657</span>     This determines how much a gesture must pinch or spread apart (in pixels) before it is registered as a scale action.
<span class='line'>658</span> 
<span class='line'>659</span>     You can change this value for all instances of SC.ScrollView in your application by overriding
<span class='line'>660</span>     `SC.SCROLL.SCALE_GESTURE_THRESHOLD` at launch time.
<span class='line'>661</span> 
<span class='line'>662</span>     @type Number
<span class='line'>663</span>     @default SC.SCROLL.SCALE_GESTURE_THRESHOLD
<span class='line'>664</span>   */</span><span class="WHIT">
<span class='line'>665</span> </span><span class="WHIT">  </span><span class="NAME">scaleGestureThreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.SCROLL.SCALE_GESTURE_THRESHOLD</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>666</span> 
<span class='line'>667</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>668</span>     This determines how far (in pixels) a gesture must move before it is registered as a scroll.
<span class='line'>669</span> 
<span class='line'>670</span>     You can change this value for all instances of SC.ScrollView in your application by overriding
<span class='line'>671</span>     `SC.SCROLL.SCROLL_THRESHOLD` at launch time.
<span class='line'>672</span> 
<span class='line'>673</span>     @type Number
<span class='line'>674</span>     @default SC.SCROLL.SCROLL_GESTURE_THRESHOLD
<span class='line'>675</span>   */</span><span class="WHIT">
<span class='line'>676</span> </span><span class="WHIT">  </span><span class="NAME">scrollGestureThreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.SCROLL.SCROLL_GESTURE_THRESHOLD</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>677</span> 
<span class='line'>678</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>679</span>     Once a vertical or horizontal scroll has been triggered, this determines how far (in pixels) the gesture
<span class='line'>680</span>     must move on the other axis to trigger a two-axis scroll. If your scroll view's content is omnidirectional
<span class='line'>681</span>     (e.g. a map) you should set this value to 0.
<span class='line'>682</span> 
<span class='line'>683</span>     You can change this value for all instances of SC.ScrollView in your application by overriding
<span class='line'>684</span>     `SC.SCROLL.SCROLL_LOCK_GESTURE_THRESHOLD` at launch time.
<span class='line'>685</span> 
<span class='line'>686</span>     @type Number
<span class='line'>687</span>     @default SC.SCROLL.SCROLL_LOCK_GESTURE_THRESHOLD
<span class='line'>688</span>   */</span><span class="WHIT">
<span class='line'>689</span> </span><span class="WHIT">  </span><span class="NAME">scrollLockGestureThreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.SCROLL.SCROLL_LOCK_GESTURE_THRESHOLD</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>690</span> 
<span class='line'>691</span> </span><span class="WHIT">  </span><span class="COMM">/** @private
<span class='line'>692</span>     Once a vertical or horizontal scroll has been triggered, this determines how far (in pixels) the gesture
<span class='line'>693</span>     must move on the other axis to trigger a two-axis scroll. If your scroll view's content is omnidirectional
<span class='line'>694</span>     (e.g. a map) you should set this value to 0.
<span class='line'>695</span> 
<span class='line'>696</span>     You can change this value for all instances of SC.ScrollView in your application by overriding
<span class='line'>697</span>     `SC.SCROLL.TOUCH.DEFAULT_SECONDARY_SCROLL_THRESHOLD` at launch time.
<span class='line'>698</span> 
<span class='line'>699</span>     @type Number
<span class='line'>700</span>     @default SC.SCROLL.TOUCH.DEFAULT_SECONDARY_SCROLL_THRESHOLD
<span class='line'>701</span>   */</span><span class="WHIT">
<span class='line'>702</span> </span><span class="WHIT">  </span><span class="COMM">// scrollSecondaryGestureThreshold: SC.SCROLL.TOUCH.DEFAULT_SECONDARY_SCROLL_THRESHOLD,</span><span class="WHIT">
<span class='line'>703</span> 
<span class='line'>704</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>705</span>     The vertical alignment for non-filling content inside of the ScrollView. Possible values:
<span class='line'>706</span> 
<span class='line'>707</span>       - SC.ALIGN_TOP
<span class='line'>708</span>       - SC.ALIGN_BOTTOM
<span class='line'>709</span>       - SC.ALIGN_MIDDLE
<span class='line'>710</span> 
<span class='line'>711</span>     @type String
<span class='line'>712</span>     @default SC.ALIGN_TOP
<span class='line'>713</span>   */</span><span class="WHIT">
<span class='line'>714</span> </span><span class="WHIT">  </span><span class="NAME">verticalAlign</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_TOP</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>715</span> 
<span class='line'>716</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>717</span>     Determines whether the vertical scroller should fade out while in overlay mode. Has no effect if
<span class='line'>718</span>     `verticalOverlay` is set to false.
<span class='line'>719</span> 
<span class='line'>720</span>     @property Boolean
<span class='line'>721</span>     @default true
<span class='line'>722</span>    */</span><span class="WHIT">
<span class='line'>723</span> </span><span class="WHIT">  </span><span class="NAME">verticalFade</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>724</span> 
<span class='line'>725</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>726</span>     Amount to scroll one vertical line.
<span class='line'>727</span> 
<span class='line'>728</span>     Used by the default implementation of scrollDownLine() and scrollUpLine().
<span class='line'>729</span> 
<span class='line'>730</span>     @type Number
<span class='line'>731</span>     @default 20
<span class='line'>732</span>   */</span><span class="WHIT">
<span class='line'>733</span> </span><span class="WHIT">  </span><span class="NAME">verticalLineScroll</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">20</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>734</span> 
<span class='line'>735</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>736</span>     Use this to overlay the vertical scroller.
<span class='line'>737</span> 
<span class='line'>738</span>     This ensures that the content container will not resize to accommodate the vertical scroller,
<span class='line'>739</span>     hence overlaying the scroller on top of the container.
<span class='line'>740</span> 
<span class='line'>741</span>     @field
<span class='line'>742</span>     @type Boolean
<span class='line'>743</span>     @default true
<span class='line'>744</span>   */</span><span class="WHIT">
<span class='line'>745</span> </span><span class="WHIT">  </span><span class="NAME">verticalOverlay</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>746</span> 
<span class='line'>747</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>748</span>     Amount to scroll one vertical page.
<span class='line'>749</span> 
<span class='line'>750</span>     Used by the default implementation of scrollUpPage() and scrollDownPage().
<span class='line'>751</span> 
<span class='line'>752</span>     @field
<span class='line'>753</span>     @type Number
<span class='line'>754</span>     @default value of frame.height
<span class='line'>755</span>     @observes frame
<span class='line'>756</span>   */</span><span class="WHIT">
<span class='line'>757</span> </span><span class="WHIT">  </span><span class="NAME">verticalPageScroll</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>758</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'frame'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">height</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>759</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="STRN">'frame'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>760</span> 
<span class='line'>761</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>762</span>     The current vertical scroll offset. Changing this value will update both the position of the
<span class='line'>763</span>     contentView and the vertical scroller, if there is one.
<span class='line'>764</span> 
<span class='line'>765</span>     @field
<span class='line'>766</span>     @type Number
<span class='line'>767</span>     @default 0
<span class='line'>768</span>   */</span><span class="WHIT">
<span class='line'>769</span> </span><span class="WHIT">  </span><span class="NAME">verticalScrollOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>770</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">containerHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_containerHeight</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>771</span> </span><span class="WHIT">      </span><span class="NAME">contentHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentHeight</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>772</span> </span><span class="WHIT">      </span><span class="NAME">min</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>773</span> </span><span class="WHIT">      </span><span class="NAME">max</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>774</span> 
<span class='line'>775</span> </span><span class="WHIT">    </span><span class="COMM">/* jshint eqnull:true */</span><span class="WHIT">
<span class='line'>776</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>777</span> 
<span class='line'>778</span> </span><span class="WHIT">      </span><span class="COMM">// When touch scrolling, we allow scroll to pass the limits by a small amount.</span><span class="WHIT">
<span class='line'>779</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._sc_isTouchScrollingV</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>780</span> </span><span class="WHIT">        </span><span class="COMM">// Constrain to the set limits.</span><span class="WHIT">
<span class='line'>781</span> </span><span class="WHIT">        </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">min</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">max</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>782</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>783</span> 
<span class='line'>784</span> </span><span class="WHIT">      </span><span class="COMM">// Record the relative percentage offset for maintaining position while scaling.</span><span class="WHIT">
<span class='line'>785</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentHeight</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>786</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_verticalPct</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">containerHeight</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">contentHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>787</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>788</span> 
<span class='line'>789</span> </span><span class="WHIT">    </span><span class="COMM">// Use the cached value.</span><span class="WHIT">
<span class='line'>790</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>791</span> </span><span class="WHIT">      </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_verticalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>792</span> 
<span class='line'>793</span> </span><span class="WHIT">      </span><span class="COMM">// Default value.</span><span class="WHIT">
<span class='line'>794</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>795</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">verticalAlign</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'initialVerticalAlign'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>796</span> 
<span class='line'>797</span> </span><span class="WHIT">        </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_alignedVerticalOffset</span><span class="PUNC">(</span><span class="NAME">verticalAlign</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">contentHeight</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>798</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>799</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>800</span> 
<span class='line'>801</span> </span><span class="WHIT">    </span><span class="COMM">// Update the actual value.</span><span class="WHIT">
<span class='line'>802</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>803</span> 
<span class='line'>804</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>805</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">property</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cacheable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>806</span> 
<span class='line'>807</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>808</span>     Use to control the positioning of the vertical scroller. If you do not set 'verticalOverlay' to
<span class='line'>809</span>     true, then the content view will be automatically sized to meet the left edge of the vertical
<span class='line'>810</span>     scroller, wherever it may be.
<span class='line'>811</span> 
<span class='line'>812</span>     This allows you to easily, for example, have “one pixel higher and one pixel lower” scroll bars
<span class='line'>813</span>     that blend into their parent views.
<span class='line'>814</span> 
<span class='line'>815</span>     If you do set 'verticalOverlay' to true, then the scroller view will “float on top” of the content view.
<span class='line'>816</span> 
<span class='line'>817</span>     Example: { top: -1, bottom: -1, right: 0 }
<span class='line'>818</span> 
<span class='line'>819</span>     @type Object
<span class='line'>820</span>     @default null
<span class='line'>821</span>   */</span><span class="WHIT">
<span class='line'>822</span> </span><span class="WHIT">  </span><span class="NAME">verticalScrollerLayout</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>823</span> 
<span class='line'>824</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>825</span>     The vertical scroller view class. This will be replaced with a view instance when the
<span class='line'>826</span>     ScrollView is created unless `hasVerticalScroller` is false.
<span class='line'>827</span> 
<span class='line'>828</span>     If `verticalOverlay` is `true`, the default view used will be an SC.OverlayScrollerView,
<span class='line'>829</span>     otherwise SC.ScrollerView will be used.
<span class='line'>830</span> 
<span class='line'>831</span>     @type SC.View
<span class='line'>832</span>     @default SC.ScrollerView | SC.OverlayScrollerView
<span class='line'>833</span>   */</span><span class="WHIT">
<span class='line'>834</span> </span><span class="WHIT">  </span><span class="NAME">verticalScrollerView</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>835</span> 
<span class='line'>836</span> </span><span class="WHIT">  </span><span class="COMM">// ---------------------------------------------------------------------------------------------</span><span class="WHIT">
<span class='line'>837</span> </span><span class="WHIT">  </span><span class="COMM">// Methods</span><span class="WHIT">
<span class='line'>838</span> </span><span class="WHIT">  </span><span class="COMM">//</span><span class="WHIT">
<span class='line'>839</span> 
<span class='line'>840</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Aligns the content horizontally. */</span><span class="WHIT">
<span class='line'>841</span> </span><span class="WHIT">  </span><span class="NAME">_sc_alignedHorizontalOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalAlign</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>842</span> </span><span class="WHIT">    </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalAlign</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>843</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_RIGHT</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>844</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">containerWidth</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>845</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_CENTER</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>846</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">containerWidth</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>847</span> </span><span class="WHIT">    </span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">// SC.ALIGN_LEFT</span><span class="WHIT">
<span class='line'>848</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>849</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>850</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>851</span> 
<span class='line'>852</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Aligns the content vertically. */</span><span class="WHIT">
<span class='line'>853</span> </span><span class="WHIT">  </span><span class="NAME">_sc_alignedVerticalOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalAlign</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">contentHeight</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>854</span> </span><span class="WHIT">    </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalAlign</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>855</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_BOTTOM</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>856</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">containerHeight</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">contentHeight</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>857</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_MIDDLE</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>858</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">containerHeight</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">contentHeight</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>859</span> </span><span class="WHIT">    </span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">// SC.ALIGN_TOP</span><span class="WHIT">
<span class='line'>860</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>861</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>862</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>863</span> 
<span class='line'>864</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Manually animates the content view. */</span><span class="WHIT">
<span class='line'>865</span> </span><span class="WHIT">  </span><span class="NAME">_sc_animateContentView</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentAdjustMap</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>866</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">easingCurve</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_animationTiming</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>867</span> </span><span class="WHIT">      </span><span class="NAME">totalDuration</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_animationDuration</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>868</span> </span><span class="WHIT">      </span><span class="NAME">start</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>869</span> </span><span class="WHIT">      </span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>870</span> </span><span class="WHIT">      </span><span class="NAME">contentViewLayout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">contentView.get</span><span class="PUNC">(</span><span class="STRN">'layout'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>871</span> </span><span class="WHIT">      </span><span class="NAME">leftStart</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">contentViewLayout.left</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>872</span> </span><span class="WHIT">      </span><span class="NAME">leftDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">contentAdjustMap.left</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">leftStart</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>873</span> </span><span class="WHIT">      </span><span class="NAME">scaleStart</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">contentViewLayout.scale</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">contentViewLayout.scale</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>874</span> </span><span class="WHIT">      </span><span class="NAME">scaleDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">contentAdjustMap.scale</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">scaleStart</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>875</span> </span><span class="WHIT">      </span><span class="NAME">topStart</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">contentViewLayout.top</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>876</span> </span><span class="WHIT">      </span><span class="NAME">topDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">contentAdjustMap.top</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">topStart</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>877</span> </span><span class="WHIT">      </span><span class="NAME">self</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>878</span> 
<span class='line'>879</span> </span><span class="WHIT">    </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">animationFrame</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>880</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">self._sc_isAnimating</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>881</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">duration</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">start</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>882</span> </span><span class="WHIT">            </span><span class="NAME">percent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">duration</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">totalDuration</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Capped at 100%</span><span class="WHIT">
<span class='line'>883</span> 
<span class='line'>884</span> </span><span class="WHIT">        </span><span class="NAME">SC.run</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>885</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">currentLeft</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">leftStart</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">leftDelta</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">easingCurve.value</span><span class="PUNC">(</span><span class="NAME">percent</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>886</span> </span><span class="WHIT">              </span><span class="NAME">currentScale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scaleStart</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">scaleDelta</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">easingCurve.value</span><span class="PUNC">(</span><span class="NAME">percent</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>887</span> </span><span class="WHIT">              </span><span class="NAME">currentTop</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">topStart</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">topDelta</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">easingCurve.value</span><span class="PUNC">(</span><span class="NAME">percent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>888</span> 
<span class='line'>889</span> </span><span class="WHIT">          </span><span class="NAME">contentAdjustMap.left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">currentLeft</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>890</span> </span><span class="WHIT">          </span><span class="NAME">contentAdjustMap.top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">currentTop</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>891</span> </span><span class="WHIT">          </span><span class="NAME">contentAdjustMap.scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">currentScale</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>892</span> 
<span class='line'>893</span> </span><span class="WHIT">          </span><span class="NAME">contentView.adjust</span><span class="PUNC">(</span><span class="NAME">contentAdjustMap</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>894</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>895</span> 
<span class='line'>896</span> </span><span class="WHIT">        </span><span class="COMM">// Keep animating as long as we haven't hit 100%.</span><span class="WHIT">
<span class='line'>897</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">percent</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>898</span> </span><span class="WHIT">          </span><span class="NAME">window.requestAnimationFrame</span><span class="PUNC">(</span><span class="NAME">animationFrame</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>899</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>900</span> </span><span class="WHIT">          </span><span class="COMM">// Clear out the animation flags.</span><span class="WHIT">
<span class='line'>901</span> </span><span class="WHIT">          </span><span class="NAME">self._sc_isAnimating</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>902</span> </span><span class="WHIT">          </span><span class="NAME">self._sc_animationDuration</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>903</span> </span><span class="WHIT">          </span><span class="NAME">self._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>904</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>905</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>906</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>907</span> 
<span class='line'>908</span> </span><span class="WHIT">    </span><span class="COMM">// Start the animation.</span><span class="WHIT">
<span class='line'>909</span> </span><span class="WHIT">    </span><span class="NAME">self._sc_isAnimating</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>910</span> </span><span class="WHIT">    </span><span class="NAME">animationFrame</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>911</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>912</span> 
<span class='line'>913</span> </span><span class="WHIT">  </span><span class="COMM">/* @private Cancels any content view animation if it exists. */</span><span class="WHIT">
<span class='line'>914</span> </span><span class="WHIT">  </span><span class="NAME">_sc_cancelAnimation</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>915</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_isAnimating</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>916</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>917</span> 
<span class='line'>918</span> </span><span class="WHIT">    </span><span class="COMM">// UNUSED. Animate using SC.View.prototype.animate. Cancelling the animation in place proved problematic.</span><span class="WHIT">
<span class='line'>919</span> </span><span class="WHIT">    </span><span class="COMM">// if (contentView.get('viewState') === SC.CoreView.ATTACHED_SHOWN_ANIMATING) {</span><span class="WHIT">
<span class='line'>920</span> </span><span class="WHIT">    </span><span class="COMM">//   // Stop the animation in place.</span><span class="WHIT">
<span class='line'>921</span> </span><span class="WHIT">    </span><span class="COMM">//   contentView.cancelAnimation(SC.LayoutState.CURRENT);</span><span class="WHIT">
<span class='line'>922</span> 
<span class='line'>923</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">curLayout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">contentView.get</span><span class="PUNC">(</span><span class="STRN">'layout'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>924</span> 
<span class='line'>925</span> </span><span class="WHIT">      </span><span class="COMM">// Update offsets to match actual placement.</span><span class="WHIT">
<span class='line'>926</span> </span><span class="WHIT">      </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NAME">curLayout.left</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>927</span> </span><span class="WHIT">      </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NAME">curLayout.top</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>928</span> </span><span class="WHIT">      </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">curLayout.scale</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>929</span> 
<span class='line'>930</span> </span><span class="WHIT">      </span><span class="COMM">// Clear out the animation flags.</span><span class="WHIT">
<span class='line'>931</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_isAnimating</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>932</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_animationDuration</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>933</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>934</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>935</span> 
<span class='line'>936</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>937</span> 
<span class='line'>938</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Reposition our content view if necessary according to aligment. */</span><span class="WHIT">
<span class='line'>939</span> </span><span class="WHIT">  </span><span class="NAME">_sc_containerViewFrameDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>940</span> </span><span class="WHIT">    </span><span class="COMM">// Run the content view size change code (updates min & max offsets, sets content alignment if necessary, shows scrollers if necessary)</span><span class="WHIT">
<span class='line'>941</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">containerFrame</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getPath</span><span class="PUNC">(</span><span class="STRN">'containerView.frame'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>942</span> </span><span class="WHIT">      </span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>943</span> </span><span class="WHIT">      </span><span class="NAME">lastMaximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>944</span> </span><span class="WHIT">      </span><span class="NAME">lastMaximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>945</span> </span><span class="WHIT">      </span><span class="NAME">lastMinimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>946</span> </span><span class="WHIT">      </span><span class="NAME">lastMinimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>947</span> 
<span class='line'>948</span> </span><span class="WHIT">    </span><span class="COMM">// Cache the current height and width of the container view, so we can only watch for size changes.</span><span class="WHIT">
<span class='line'>949</span> </span><span class="WHIT">    </span><span class="COMM">// This will update the maximum scroll offsets when they are requested.</span><span class="WHIT">
<span class='line'>950</span> </span><span class="WHIT">    </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'_sc_containerHeight'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerFrame.height</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>951</span> </span><span class="WHIT">    </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'_sc_containerWidth'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerFrame.width</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>952</span> 
<span class='line'>953</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentView</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>954</span> </span><span class="WHIT">      </span><span class="COMM">// var didAdjust = false;</span><span class="WHIT">
<span class='line'>955</span> 
<span class='line'>956</span> </span><span class="WHIT">      </span><span class="COMM">// if (this._sc_shouldResizeContentHeight) {</span><span class="WHIT">
<span class='line'>957</span> </span><span class="WHIT">      </span><span class="COMM">//   contentView.adjust('height', containerFrame.height);</span><span class="WHIT">
<span class='line'>958</span> </span><span class="WHIT">      </span><span class="COMM">//   didAdjust = true;</span><span class="WHIT">
<span class='line'>959</span> </span><span class="WHIT">      </span><span class="COMM">// }</span><span class="WHIT">
<span class='line'>960</span> 
<span class='line'>961</span> </span><span class="WHIT">      </span><span class="COMM">// if (this._sc_shouldResizeContentWidth) {</span><span class="WHIT">
<span class='line'>962</span> </span><span class="WHIT">      </span><span class="COMM">//   contentView.adjust('width', containerFrame.width);</span><span class="WHIT">
<span class='line'>963</span> </span><span class="WHIT">      </span><span class="COMM">//   didAdjust = true;</span><span class="WHIT">
<span class='line'>964</span> </span><span class="WHIT">      </span><span class="COMM">// }</span><span class="WHIT">
<span class='line'>965</span> 
<span class='line'>966</span> </span><span class="WHIT">      </span><span class="COMM">// Update the scrollers regardless.</span><span class="WHIT">
<span class='line'>967</span> </span><span class="WHIT">      </span><span class="COMM">// if (!didAdjust) {</span><span class="WHIT">
<span class='line'>968</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_contentViewSizeDidChange</span><span class="PUNC">(</span><span class="NAME">lastMinimumHorizontalScrollOffset</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">lastMaximumHorizontalScrollOffset</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">lastMinimumVerticalScrollOffset</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">lastMaximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>969</span> </span><span class="WHIT">      </span><span class="COMM">// }</span><span class="WHIT">
<span class='line'>970</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>971</span> 
<span class='line'>972</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>973</span> 
<span class='line'>974</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Whenever the contentView of the container changes, set up new observers and clean up old observers. */</span><span class="WHIT">
<span class='line'>975</span> </span><span class="WHIT">  </span><span class="NAME">_sc_contentViewDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>976</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">newView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// Our content view.</span><span class="WHIT">
<span class='line'>977</span> </span><span class="WHIT">      </span><span class="NAME">containerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'containerView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>978</span> </span><span class="WHIT">      </span><span class="NAME">frameChangeFunc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentViewFrameDidChange</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>979</span> 
<span class='line'>980</span> </span><span class="WHIT">    </span><span class="COMM">// Clean up observers on the previous content view.</span><span class="WHIT">
<span class='line'>981</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_removeContentViewObservers</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>982</span> 
<span class='line'>983</span> </span><span class="WHIT">    </span><span class="COMM">// Reset caches.</span><span class="WHIT">
<span class='line'>984</span> </span><span class="WHIT">    </span><span class="COMM">// this._sc_shouldResizeContentWidth = false;</span><span class="WHIT">
<span class='line'>985</span> </span><span class="WHIT">    </span><span class="COMM">// this._sc_shouldResizeContentHeight = false;</span><span class="WHIT">
<span class='line'>986</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_contentHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>987</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_contentWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>988</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_contentScale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>989</span> 
<span class='line'>990</span> </span><span class="WHIT">    </span><span class="COMM">// Assign the content view to our container view. This ensures that it is instantiated.</span><span class="WHIT">
<span class='line'>991</span> </span><span class="WHIT">    </span><span class="NAME">containerView.set</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newView</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>992</span> </span><span class="WHIT">    </span><span class="NAME">newView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">containerView.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Actual content view.</span><span class="WHIT">
<span class='line'>993</span> 
<span class='line'>994</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">newView</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>995</span> </span><span class="WHIT">      </span><span class="COMM">/* jshint eqnull:true */</span><span class="WHIT">
<span class='line'>996</span> 
<span class='line'>997</span> </span><span class="WHIT">      </span><span class="COMM">// Be wary of content views that replace their layers.</span><span class="WHIT">
<span class='line'>998</span> </span><span class="WHIT">      </span><span class="COMM">// newView.addObserver('layer', this, layerChangeFunc);</span><span class="WHIT">
<span class='line'>999</span> 
<span class='line'>1000</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">newView.useStaticLayout</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1001</span> </span><span class="WHIT">        </span><span class="COMM">// When a view wants an accelerated layer and isn't a fixed size, we convert it to a fixed</span><span class="WHIT">
<span class='line'>1002</span> </span><span class="WHIT">        </span><span class="COMM">// size and resize it when our container resizes.</span><span class="WHIT">
<span class='line'>1003</span> </span><span class="WHIT">        </span><span class="COMM">// if (newView.get('wantsAcceleratedLayer') && !newView.get('isFixedSize')) {</span><span class="WHIT">
<span class='line'>1004</span> </span><span class="WHIT">        </span><span class="COMM">//   var contentViewLayout = newView.get('layout');</span><span class="WHIT">
<span class='line'>1005</span> 
<span class='line'>1006</span> </span><span class="WHIT">        </span><span class="COMM">//   // Fix the width.</span><span class="WHIT">
<span class='line'>1007</span> </span><span class="WHIT">        </span><span class="COMM">//   if (contentViewLayout.width == null) {</span><span class="WHIT">
<span class='line'>1008</span> </span><span class="WHIT">        </span><span class="COMM">//     this._sc_shouldResizeContentWidth = true; // Flag to indicate that when the container's width changes, we should update the content's width.</span><span class="WHIT">
<span class='line'>1009</span> 
<span class='line'>1010</span> </span><span class="WHIT">        </span><span class="COMM">//     newView.adjust({</span><span class="WHIT">
<span class='line'>1011</span> </span><span class="WHIT">        </span><span class="COMM">//       right: null,</span><span class="WHIT">
<span class='line'>1012</span> </span><span class="WHIT">        </span><span class="COMM">//       width: this._sc_containerWidth</span><span class="WHIT">
<span class='line'>1013</span> </span><span class="WHIT">        </span><span class="COMM">//     });</span><span class="WHIT">
<span class='line'>1014</span> </span><span class="WHIT">        </span><span class="COMM">//   }</span><span class="WHIT">
<span class='line'>1015</span> 
<span class='line'>1016</span> </span><span class="WHIT">        </span><span class="COMM">//   // Fix the height.</span><span class="WHIT">
<span class='line'>1017</span> </span><span class="WHIT">        </span><span class="COMM">//   if (contentViewLayout.height == null) {</span><span class="WHIT">
<span class='line'>1018</span> </span><span class="WHIT">        </span><span class="COMM">//     this._sc_shouldResizeContentHeight = true; // Flag to indicate that when the container's height changes, we should update the content's height.</span><span class="WHIT">
<span class='line'>1019</span> 
<span class='line'>1020</span> </span><span class="WHIT">        </span><span class="COMM">//     newView.adjust({</span><span class="WHIT">
<span class='line'>1021</span> </span><span class="WHIT">        </span><span class="COMM">//       bottom: null,</span><span class="WHIT">
<span class='line'>1022</span> </span><span class="WHIT">        </span><span class="COMM">//       height: this._sc_containerHeight</span><span class="WHIT">
<span class='line'>1023</span> </span><span class="WHIT">        </span><span class="COMM">//     });</span><span class="WHIT">
<span class='line'>1024</span> </span><span class="WHIT">        </span><span class="COMM">//   }</span><span class="WHIT">
<span class='line'>1025</span> </span><span class="WHIT">        </span><span class="COMM">// }</span><span class="WHIT">
<span class='line'>1026</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1027</span> 
<span class='line'>1028</span> </span><span class="WHIT">      </span><span class="COMM">// TODO: Can we remove this if a calculated property exists?</span><span class="WHIT">
<span class='line'>1029</span> </span><span class="WHIT">      </span><span class="NAME">newView.addObserver</span><span class="PUNC">(</span><span class="STRN">'frame'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">frameChangeFunc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1030</span> 
<span class='line'>1031</span> </span><span class="WHIT">      </span><span class="COMM">// Initialize once.</span><span class="WHIT">
<span class='line'>1032</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_contentViewFrameDidChange</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1033</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1034</span> 
<span class='line'>1035</span> </span><span class="WHIT">    </span><span class="COMM">// Cache the current content view so that we can properly clean up when it changes.</span><span class="WHIT">
<span class='line'>1036</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">newView</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1037</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1038</span> 
<span class='line'>1039</span> </span><span class="WHIT">  </span><span class="COMM">/** @private */</span><span class="WHIT">
<span class='line'>1040</span> </span><span class="WHIT">  </span><span class="COMM">// _sc_contentViewLayerDidChange: function () {</span><span class="WHIT">
<span class='line'>1041</span> </span><span class="WHIT">  </span><span class="COMM">//   ???</span><span class="WHIT">
<span class='line'>1042</span> </span><span class="WHIT">  </span><span class="COMM">// },</span><span class="WHIT">
<span class='line'>1043</span> 
<span class='line'>1044</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Check frame changes for size changes. */</span><span class="WHIT">
<span class='line'>1045</span> </span><span class="WHIT">  </span><span class="NAME">_sc_contentViewFrameDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1046</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">lastHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentHeight</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1047</span> </span><span class="WHIT">        </span><span class="NAME">lastScale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentScale</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1048</span> </span><span class="WHIT">        </span><span class="NAME">lastWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentWidth</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1049</span> </span><span class="WHIT">        </span><span class="NAME">newFrame</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getPath</span><span class="PUNC">(</span><span class="STRN">'contentView.borderFrame'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1050</span> </span><span class="WHIT">        </span><span class="NAME">lastMaximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1051</span> </span><span class="WHIT">        </span><span class="NAME">lastMaximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1052</span> </span><span class="WHIT">        </span><span class="NAME">lastMinimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1053</span> </span><span class="WHIT">        </span><span class="NAME">lastMinimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1054</span> 
<span class='line'>1055</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">newFrame</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1056</span> </span><span class="WHIT">      </span><span class="COMM">// Determine whether the scale has changed.</span><span class="WHIT">
<span class='line'>1057</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lastScale</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">newFrame.scale</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1058</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_contentScaleDidChange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1059</span> </span><span class="WHIT">        </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'_sc_contentScale'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newFrame.scale</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1060</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1061</span> 
<span class='line'>1062</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lastWidth</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">newFrame.width</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1063</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_contentWidthDidChange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1064</span> </span><span class="WHIT">        </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'_sc_contentWidth'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newFrame.width</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1065</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1066</span> 
<span class='line'>1067</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lastHeight</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">newFrame.height</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1068</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_contentHeightDidChange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1069</span> </span><span class="WHIT">        </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'_sc_contentHeight'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newFrame.height</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1070</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1071</span> 
<span class='line'>1072</span> </span><span class="WHIT">      </span><span class="COMM">// If any of the size values changed, update.</span><span class="WHIT">
<span class='line'>1073</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_contentScaleDidChange</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._sc_contentWidthDidChange</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._sc_contentHeightDidChange</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1074</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_contentViewSizeDidChange</span><span class="PUNC">(</span><span class="NAME">lastMinimumHorizontalScrollOffset</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">lastMaximumHorizontalScrollOffset</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">lastMinimumVerticalScrollOffset</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">lastMaximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1075</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1076</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1077</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1078</span> 
<span class='line'>1079</span> </span><span class="WHIT">  </span><span class="COMM">/** @private When the content view's size changes, we need to update our scroll offset properties. */</span><span class="WHIT">
<span class='line'>1080</span> </span><span class="WHIT">  </span><span class="NAME">_sc_contentViewSizeDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lastMinimumHorizontalScrollOffset</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">lastMaximumHorizontalScrollOffset</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">lastMinimumVerticalScrollOffset</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">lastMaximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1081</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1082</span> </span><span class="WHIT">      </span><span class="NAME">maximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1083</span> </span><span class="WHIT">      </span><span class="NAME">containerHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1084</span> </span><span class="WHIT">      </span><span class="NAME">contentHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1085</span> 
<span class='line'>1086</span> </span><span class="WHIT">    </span><span class="NAME">containerHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_containerHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1087</span> </span><span class="WHIT">    </span><span class="NAME">containerWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_containerWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1088</span> </span><span class="WHIT">    </span><span class="NAME">contentHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1089</span> </span><span class="WHIT">    </span><span class="NAME">contentWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1090</span> 
<span class='line'>1091</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1092</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentWidth</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1093</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">maximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1094</span> </span><span class="WHIT">        </span><span class="COMM">// Align horizontally.</span><span class="WHIT">
<span class='line'>1095</span> </span><span class="WHIT">        </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_alignedHorizontalOffset</span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalAlign'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1096</span> </span><span class="WHIT">        </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Note: Trigger for _sc_scrollOffsetHorizontalDidChange</span><span class="WHIT">
<span class='line'>1097</span> 
<span class='line'>1098</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1099</span> </span><span class="WHIT">        </span><span class="COMM">/* jshint eqnull:true */</span><span class="WHIT">
<span class='line'>1100</span> </span><span class="WHIT">        </span><span class="COMM">// If the horizontal position has never been set, use the initial alignment.</span><span class="WHIT">
<span class='line'>1101</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_horizontalPct</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1102</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1103</span> </span><span class="WHIT">          </span><span class="NAME">this.notifyPropertyChange</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1104</span> 
<span class='line'>1105</span> </span><span class="WHIT">        </span><span class="COMM">// If the scale of the content view changes, we want to maintain relative position so that zooming remains centered.</span><span class="WHIT">
<span class='line'>1106</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_contentScaleDidChange</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1107</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_touchCenterX</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1108</span> </span><span class="WHIT">            </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_horizontalPct</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_touchCenterX</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1109</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1110</span> </span><span class="WHIT">            </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_horizontalPct</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">containerWidth</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1111</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1112</span> </span><span class="WHIT">          </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Note: Trigger for _sc_scrollOffsetHorizontalDidChange</span><span class="WHIT">
<span class='line'>1113</span> 
<span class='line'>1114</span> </span><span class="WHIT">          </span><span class="COMM">// Live scale gesture. Update the anchor so that the scroll deltas are calculated correctly.</span><span class="WHIT">
<span class='line'>1115</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_gestureAnchorHOffset</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1116</span> </span><span class="WHIT">            </span><span class="NAME">this._sc_gestureAnchorHOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1117</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1118</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScrollHorizontal'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1119</span> </span><span class="WHIT">          </span><span class="COMM">// Take alignment into account.</span><span class="WHIT">
<span class='line'>1120</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">horizontalAlign</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalAlign'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1121</span> </span><span class="WHIT">              </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_horizontalScrollOffset</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1122</span> </span><span class="WHIT">              </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1123</span> 
<span class='line'>1124</span> </span><span class="WHIT">          </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalAlign</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1125</span> </span><span class="WHIT">          </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_CENTER</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1126</span> </span><span class="WHIT">            </span><span class="COMM">// Switched to scrolling horizontally, stick to center OR was scrolled at center and size changed.</span><span class="WHIT">
<span class='line'>1127</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">lastMinimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>1128</span> </span><span class="WHIT">              </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">lastMaximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1129</span> </span><span class="WHIT">              </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1130</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1131</span> 
<span class='line'>1132</span> </span><span class="WHIT">            </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1133</span> </span><span class="WHIT">          </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_RIGHT</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1134</span> </span><span class="WHIT">            </span><span class="COMM">// Switched to scrolling horizontally, stick to right side OR was scrolled to right and size changed.</span><span class="WHIT">
<span class='line'>1135</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">lastMinimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>1136</span> </span><span class="WHIT">              </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">lastMaximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1137</span> </span><span class="WHIT">              </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1138</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1139</span> 
<span class='line'>1140</span> </span><span class="WHIT">            </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1141</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1142</span> 
<span class='line'>1143</span> </span><span class="WHIT">          </span><span class="COMM">// Was at right side and size shrunk.</span><span class="WHIT">
<span class='line'>1144</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1145</span> </span><span class="WHIT">            </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1146</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1147</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1148</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1149</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1150</span> 
<span class='line'>1151</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentHeight</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1152</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">maximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1153</span> </span><span class="WHIT">        </span><span class="COMM">// Align vertically.</span><span class="WHIT">
<span class='line'>1154</span> </span><span class="WHIT">        </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_alignedVerticalOffset</span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalAlign'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">contentHeight</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1155</span> </span><span class="WHIT">        </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Note: Trigger for _sc_scrollOffsetHorizontalDidChange</span><span class="WHIT">
<span class='line'>1156</span> 
<span class='line'>1157</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1158</span> </span><span class="WHIT">        </span><span class="COMM">/* jshint eqnull:true */</span><span class="WHIT">
<span class='line'>1159</span> </span><span class="WHIT">        </span><span class="COMM">// If the vertical position has never been set, use the initial alignment.</span><span class="WHIT">
<span class='line'>1160</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_verticalPct</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1161</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1162</span> </span><span class="WHIT">          </span><span class="NAME">this.notifyPropertyChange</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1163</span> 
<span class='line'>1164</span> </span><span class="WHIT">        </span><span class="COMM">// If the scale of the content view changes, we want to maintain relative position so that zooming remains centered.</span><span class="WHIT">
<span class='line'>1165</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_contentScaleDidChange</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1166</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_touchCenterY</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1167</span> </span><span class="WHIT">            </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_verticalPct</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">contentHeight</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_touchCenterY</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1168</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1169</span> </span><span class="WHIT">            </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_verticalPct</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">contentHeight</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">containerHeight</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1170</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1171</span> </span><span class="WHIT">          </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Note: Trigger for _sc_scrollOffsetVerticalDidChange</span><span class="WHIT">
<span class='line'>1172</span> 
<span class='line'>1173</span> </span><span class="WHIT">          </span><span class="COMM">// Live scale gesture. Update the anchor so that the scroll deltas are calculated correctly.</span><span class="WHIT">
<span class='line'>1174</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_gestureAnchorVOffset</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1175</span> </span><span class="WHIT">            </span><span class="NAME">this._sc_gestureAnchorVOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1176</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1177</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScrollVertical'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1178</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">verticalAlign</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalAlign'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1179</span> </span><span class="WHIT">              </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_verticalScrollOffset</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1180</span> </span><span class="WHIT">              </span><span class="NAME">minimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1181</span> 
<span class='line'>1182</span> </span><span class="WHIT">          </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalAlign</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1183</span> </span><span class="WHIT">          </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_MIDDLE</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1184</span> </span><span class="WHIT">            </span><span class="COMM">// Switched to scrolling vertically, stick to middle OR was scrolled at middle and size changed.</span><span class="WHIT">
<span class='line'>1185</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">lastMinimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">minimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>1186</span> </span><span class="WHIT">              </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">lastMaximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1187</span> </span><span class="WHIT">              </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1188</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1189</span> 
<span class='line'>1190</span> </span><span class="WHIT">            </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1191</span> </span><span class="WHIT">          </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_BOTTOM</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1192</span> </span><span class="WHIT">            </span><span class="COMM">// Switched to scrolling vertically, stick to bottom side OR was scrolled to bottom and size changed.</span><span class="WHIT">
<span class='line'>1193</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">lastMinimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">minimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>1194</span> </span><span class="WHIT">              </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">lastMaximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1195</span> </span><span class="WHIT">              </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1196</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1197</span> 
<span class='line'>1198</span> </span><span class="WHIT">            </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1199</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1200</span> 
<span class='line'>1201</span> </span><span class="WHIT">          </span><span class="COMM">// Was at bottom side and size shrunk.</span><span class="WHIT">
<span class='line'>1202</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1203</span> </span><span class="WHIT">            </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1204</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1205</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1206</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1207</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1208</span> 
<span class='line'>1209</span> </span><span class="WHIT">    </span><span class="COMM">// Reset our flags.</span><span class="WHIT">
<span class='line'>1210</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_contentScaleDidChange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1211</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_contentHeightDidChange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1212</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_contentWidthDidChange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1213</span> 
<span class='line'>1214</span> </span><span class="WHIT">    </span><span class="COMM">// TODO: Updating scrollers may change the container size, which will cause this to run again. Can we bring</span><span class="WHIT">
<span class='line'>1215</span> </span><span class="WHIT">    </span><span class="COMM">// this into a single call?</span><span class="WHIT">
<span class='line'>1216</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_updateScrollers</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1217</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1218</span> 
<span class='line'>1219</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Fade in the horizontal scroller. Each scroller fades in/out independently. */</span><span class="WHIT">
<span class='line'>1220</span> </span><span class="WHIT">  </span><span class="NAME">_sc_fadeInHorizontalScroller</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1221</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">canScrollHorizontal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScrollHorizontal'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1222</span> </span><span class="WHIT">      </span><span class="NAME">horizontalScroller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollerView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1223</span> </span><span class="WHIT">      </span><span class="NAME">delay</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1224</span> 
<span class='line'>1225</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScrollHorizontal</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">horizontalScroller</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">horizontalScroller.get</span><span class="PUNC">(</span><span class="STRN">'fadeIn'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1226</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_horizontalFadeOutTimer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1227</span> </span><span class="WHIT">        </span><span class="COMM">// Reschedule the current timer (avoid creating a new instance).</span><span class="WHIT">
<span class='line'>1228</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_horizontalFadeOutTimer.startTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1229</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_horizontalFadeOutTimer.schedule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1230</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1231</span> </span><span class="WHIT">        </span><span class="COMM">// Fade in.</span><span class="WHIT">
<span class='line'>1232</span> </span><span class="WHIT">        </span><span class="NAME">horizontalScroller.fadeIn</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1233</span> 
<span class='line'>1234</span> </span><span class="WHIT">        </span><span class="COMM">// Wait the minimum time before fading out again.</span><span class="WHIT">
<span class='line'>1235</span> </span><span class="WHIT">        </span><span class="NAME">delay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'_sc_minimumFadeOutDelay'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1236</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_horizontalFadeOutTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.invokeLater</span><span class="PUNC">(</span><span class="NAME">this._sc_fadeOutHorizontalScroller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">delay</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1237</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1238</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1239</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1240</span> 
<span class='line'>1241</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Fade in the vertical scroller. Each scroller fades in/out independently. */</span><span class="WHIT">
<span class='line'>1242</span> </span><span class="WHIT">  </span><span class="NAME">_sc_fadeInVerticalScroller</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1243</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">canScrollVertical</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScrollVertical'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1244</span> </span><span class="WHIT">      </span><span class="NAME">verticalScroller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollerView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1245</span> </span><span class="WHIT">      </span><span class="NAME">delay</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1246</span> 
<span class='line'>1247</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScrollVertical</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">verticalScroller</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">verticalScroller.get</span><span class="PUNC">(</span><span class="STRN">'fadeIn'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1248</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_verticalFadeOutTimer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1249</span> </span><span class="WHIT">        </span><span class="COMM">// Reschedule the current timer (avoid creating a new instance).</span><span class="WHIT">
<span class='line'>1250</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_verticalFadeOutTimer.startTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1251</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_verticalFadeOutTimer.schedule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1252</span> 
<span class='line'>1253</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1254</span> </span><span class="WHIT">        </span><span class="COMM">// Fade in.</span><span class="WHIT">
<span class='line'>1255</span> </span><span class="WHIT">        </span><span class="NAME">verticalScroller.fadeIn</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1256</span> 
<span class='line'>1257</span> </span><span class="WHIT">        </span><span class="COMM">// Wait the minimum time before fading out again.</span><span class="WHIT">
<span class='line'>1258</span> </span><span class="WHIT">        </span><span class="NAME">delay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'_sc_minimumFadeOutDelay'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1259</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_verticalFadeOutTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.invokeLater</span><span class="PUNC">(</span><span class="NAME">this._sc_fadeOutVerticalScroller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">delay</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1260</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1261</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1262</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1263</span> 
<span class='line'>1264</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Fade out the horizontal scroller. */</span><span class="WHIT">
<span class='line'>1265</span> </span><span class="WHIT">  </span><span class="NAME">_sc_fadeOutHorizontalScroller</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1266</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">horizontalScroller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollerView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1267</span> 
<span class='line'>1268</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScroller</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">horizontalScroller.get</span><span class="PUNC">(</span><span class="STRN">'fadeOut'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1269</span> </span><span class="WHIT">      </span><span class="COMM">// Fade out.</span><span class="WHIT">
<span class='line'>1270</span> </span><span class="WHIT">      </span><span class="NAME">horizontalScroller.fadeOut</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1271</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1272</span> 
<span class='line'>1273</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_horizontalFadeOutTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1274</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1275</span> 
<span class='line'>1276</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Fade out the vertical scroller. */</span><span class="WHIT">
<span class='line'>1277</span> </span><span class="WHIT">  </span><span class="NAME">_sc_fadeOutVerticalScroller</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1278</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">verticalScroller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollerView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1279</span> 
<span class='line'>1280</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScroller</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">verticalScroller.get</span><span class="PUNC">(</span><span class="STRN">'fadeOut'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1281</span> </span><span class="WHIT">      </span><span class="COMM">// Fade out.</span><span class="WHIT">
<span class='line'>1282</span> </span><span class="WHIT">      </span><span class="NAME">verticalScroller.fadeOut</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1283</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1284</span> 
<span class='line'>1285</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_verticalFadeOutTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1286</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1287</span> 
<span class='line'>1288</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Adjust the content alignment horizontally on change. */</span><span class="WHIT">
<span class='line'>1289</span> </span><span class="WHIT">  </span><span class="NAME">_sc_horizontalAlignDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1290</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1291</span> 
<span class='line'>1292</span> </span><span class="WHIT">    </span><span class="COMM">// Align horizontally (Unless content width is zero).</span><span class="WHIT">
<span class='line'>1293</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">maximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._sc_contentWidth</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1294</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">horizontalAlign</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalAlign'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1295</span> </span><span class="WHIT">          </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1296</span> 
<span class='line'>1297</span> </span><span class="WHIT">      </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_alignedHorizontalOffset</span><span class="PUNC">(</span><span class="NAME">horizontalAlign</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_containerWidth</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_contentWidth</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1298</span> </span><span class="WHIT">      </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1299</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1300</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1301</span> 
<span class='line'>1302</span> </span><span class="WHIT">  </span><span class="COMM">/** @private
<span class='line'>1303</span>     Calculates the maximum offset given content and container sizes, and the
<span class='line'>1304</span>     alignment.
<span class='line'>1305</span>   */</span><span class="WHIT">
<span class='line'>1306</span> </span><span class="WHIT">  </span><span class="NAME">_sc_maximumScrollOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentSize</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerSize</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">align</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">canScroll</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1307</span> </span><span class="WHIT">    </span><span class="COMM">// If we can't scroll, we pretend our content size is no larger than the container.</span><span class="WHIT">
<span class='line'>1308</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScroll</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">contentSize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">contentSize</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerSize</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1309</span> 
<span class='line'>1310</span> </span><span class="WHIT">    </span><span class="COMM">// if our content size is larger than or the same size as the container, it's quite</span><span class="WHIT">
<span class='line'>1311</span> </span><span class="WHIT">    </span><span class="COMM">// simple to calculate the answer. Otherwise, we need to do some fancy-pants</span><span class="WHIT">
<span class='line'>1312</span> </span><span class="WHIT">    </span><span class="COMM">// alignment logic (read: simple math)</span><span class="WHIT">
<span class='line'>1313</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentSize</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NAME">containerSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">contentSize</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">containerSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1314</span> 
<span class='line'>1315</span> </span><span class="WHIT">    </span><span class="COMM">// alignment, yeah</span><span class="WHIT">
<span class='line'>1316</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">align</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_LEFT</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">align</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_TOP</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1317</span> </span><span class="WHIT">      </span><span class="COMM">// if we left-align something, and it is smaller than the view, does that not mean</span><span class="WHIT">
<span class='line'>1318</span> </span><span class="WHIT">      </span><span class="COMM">// that it's maximum (and minimum) offset is 0, because it should be positioned at 0?</span><span class="WHIT">
<span class='line'>1319</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1320</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">align</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_MIDDLE</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">align</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_CENTER</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1321</span> </span><span class="WHIT">      </span><span class="COMM">// middle align means the difference divided by two, because we want equal parts on each side.</span><span class="WHIT">
<span class='line'>1322</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">containerSize</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">contentSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1323</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1324</span> </span><span class="WHIT">      </span><span class="COMM">// right align means the entire difference, because we want all that space on the left</span><span class="WHIT">
<span class='line'>1325</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">containerSize</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">contentSize</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1326</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1327</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1328</span> 
<span class='line'>1329</span> </span><span class="WHIT">  </span><span class="COMM">/** @private
<span class='line'>1330</span>     Calculates the minimum offset given content and container sizes, and the
<span class='line'>1331</span>     alignment.
<span class='line'>1332</span>   */</span><span class="WHIT">
<span class='line'>1333</span> </span><span class="WHIT">  </span><span class="NAME">_sc_minimumScrollOffset</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentSize</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerSize</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">align</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">canScroll</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1334</span> </span><span class="WHIT">    </span><span class="COMM">// If we can't scroll, we pretend our content size is no larger than the container.</span><span class="WHIT">
<span class='line'>1335</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScroll</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">contentSize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">contentSize</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerSize</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1336</span> 
<span class='line'>1337</span> </span><span class="WHIT">    </span><span class="COMM">// if the content is larger than the container, we have no need to change the minimum</span><span class="WHIT">
<span class='line'>1338</span> </span><span class="WHIT">    </span><span class="COMM">// away from the natural 0 position.</span><span class="WHIT">
<span class='line'>1339</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentSize</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">containerSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1340</span> 
<span class='line'>1341</span> </span><span class="WHIT">    </span><span class="COMM">// alignment, yeah</span><span class="WHIT">
<span class='line'>1342</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">align</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_LEFT</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">align</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_TOP</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1343</span> </span><span class="WHIT">      </span><span class="COMM">// if we left-align something, and it is smaller than the view, does that not mean</span><span class="WHIT">
<span class='line'>1344</span> </span><span class="WHIT">      </span><span class="COMM">// that it's maximum (and minimum) offset is 0, because it should be positioned at 0?</span><span class="WHIT">
<span class='line'>1345</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1346</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">align</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_MIDDLE</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">align</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_CENTER</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1347</span> </span><span class="WHIT">      </span><span class="COMM">// middle align means the difference divided by two, because we want equal parts on each side.</span><span class="WHIT">
<span class='line'>1348</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">containerSize</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">contentSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1349</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1350</span> </span><span class="WHIT">      </span><span class="COMM">// right align means the entire difference, because we want all that space on the left</span><span class="WHIT">
<span class='line'>1351</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">containerSize</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">contentSize</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1352</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1353</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1354</span> 
<span class='line'>1355</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Registers/deregisters view with SC.Drag for autoscrolling. */</span><span class="WHIT">
<span class='line'>1356</span> </span><span class="WHIT">  </span><span class="NAME">_sc_registerAutoscroll</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1357</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'isVisibleInWindow'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'isEnabledInPane'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1358</span> </span><span class="WHIT">      </span><span class="NAME">SC.Drag.addScrollableView</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1359</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1360</span> </span><span class="WHIT">      </span><span class="NAME">SC.Drag.removeScrollableView</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1361</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1362</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1363</span> 
<span class='line'>1364</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Reposition the content view to match the current scroll offsets and scale. */</span><span class="WHIT">
<span class='line'>1365</span> </span><span class="WHIT">  </span><span class="NAME">_sc_repositionContentView</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1366</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1367</span> 
<span class='line'>1368</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentView</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1369</span> </span><span class="WHIT">      </span><span class="NAME">this.invokeOnce</span><span class="PUNC">(</span><span class="NAME">this._sc_repositionContentViewUnfiltered</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1370</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1371</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1372</span> 
<span class='line'>1373</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Reposition the content view to match the current scroll offsets and scale. */</span><span class="WHIT">
<span class='line'>1374</span> </span><span class="WHIT">  </span><span class="NAME">_sc_repositionContentViewUnfiltered</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1375</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">containerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'containerView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1376</span> </span><span class="WHIT">        </span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1377</span> </span><span class="WHIT">        </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1378</span> </span><span class="WHIT">        </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1379</span> </span><span class="WHIT">        </span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1380</span> 
<span class='line'>1381</span> </span><span class="WHIT">    </span><span class="COMM">// If the content is statically laid out, use margins in the container layer to move it.</span><span class="WHIT">
<span class='line'>1382</span> </span><span class="WHIT">    </span><span class="COMM">// TODO: Remove static layout support.</span><span class="WHIT">
<span class='line'>1383</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentView.useStaticLayout</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1384</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">containerViewLayer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">containerView.get</span><span class="PUNC">(</span><span class="STRN">'layer'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1385</span> 
<span class='line'>1386</span> </span><span class="WHIT">      </span><span class="COMM">// Set the margins on the layer.</span><span class="WHIT">
<span class='line'>1387</span> </span><span class="WHIT">      </span><span class="NAME">containerViewLayer.style.marginLeft</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1388</span> </span><span class="WHIT">      </span><span class="NAME">containerViewLayer.style.marginTop</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1389</span> 
<span class='line'>1390</span> </span><span class="WHIT">    </span><span class="COMM">// Otherwise call adjust on the content.</span><span class="WHIT">
<span class='line'>1391</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1392</span> </span><span class="WHIT">      </span><span class="COMM">// Constrain the offsets to full (actual) pixels to prevent blurry text et cetera. Note that this assumes</span><span class="WHIT">
<span class='line'>1393</span> </span><span class="WHIT">      </span><span class="COMM">// that the scroll view itself is living at a scale of 1, and may give blurry subpixel results if scaled.</span><span class="WHIT">
<span class='line'>1394</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">horizontalAlign</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalAlign'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1395</span> </span><span class="WHIT">        </span><span class="NAME">verticalAlign</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalAlign'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1396</span> </span><span class="WHIT">        </span><span class="NAME">left</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">top</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1397</span> 
<span class='line'>1398</span> </span><span class="WHIT">      </span><span class="NAME">left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NAME">horizontalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1399</span> 
<span class='line'>1400</span> </span><span class="WHIT">      </span><span class="COMM">// Round according to the alignment to avoid jitter at the edges. For example, we don't want 0.55 rounding up to 1 when left aligned. This also prevents implied percentage values (i.e. 0.0 > value > 1.0 == %)!</span><span class="WHIT">
<span class='line'>1401</span> </span><span class="WHIT">      </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalAlign</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1402</span> </span><span class="WHIT">      </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_CENTER</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1403</span> </span><span class="WHIT">        </span><span class="NAME">left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">left</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1404</span> </span><span class="WHIT">        </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1405</span> </span><span class="WHIT">      </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_RIGHT</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1406</span> </span><span class="WHIT">        </span><span class="NAME">left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.ceil</span><span class="PUNC">(</span><span class="NAME">left</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1407</span> </span><span class="WHIT">        </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1408</span> </span><span class="WHIT">      </span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">// SC.ALIGN_LEFT</span><span class="WHIT">
<span class='line'>1409</span> </span><span class="WHIT">        </span><span class="NAME">left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">left</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1410</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1411</span> 
<span class='line'>1412</span> </span><span class="WHIT">      </span><span class="NAME">top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NAME">verticalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1413</span> 
<span class='line'>1414</span> </span><span class="WHIT">      </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalAlign</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1415</span> </span><span class="WHIT">      </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_MIDDLE</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1416</span> </span><span class="WHIT">        </span><span class="NAME">top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">top</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1417</span> </span><span class="WHIT">        </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1418</span> </span><span class="WHIT">      </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.ALIGN_BOTTOM</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1419</span> </span><span class="WHIT">        </span><span class="NAME">top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.ceil</span><span class="PUNC">(</span><span class="NAME">top</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1420</span> </span><span class="WHIT">        </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1421</span> </span><span class="WHIT">      </span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">// SC.ALIGN_TOP</span><span class="WHIT">
<span class='line'>1422</span> </span><span class="WHIT">        </span><span class="NAME">top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">top</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1423</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1424</span> 
<span class='line'>1425</span> </span><span class="WHIT">      </span><span class="COMM">// Cancel any active animation in place.</span><span class="WHIT">
<span class='line'>1426</span> </span><span class="WHIT">      </span><span class="COMM">// this._sc_cancelAnimation();</span><span class="WHIT">
<span class='line'>1427</span> 
<span class='line'>1428</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">contentAdjustMap</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.ScrollView._SC_CONTENT_ADJUST_MAP</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Shared object used to avoid continually initializing/destroying objects.</span><span class="WHIT">
<span class='line'>1429</span> 
<span class='line'>1430</span> </span><span class="WHIT">      </span><span class="COMM">// Create the content adjust map once. Note: This is a shared object, all properties must be overwritten each time.</span><span class="WHIT">
<span class='line'>1431</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">contentAdjustMap</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1432</span> </span><span class="WHIT">        </span><span class="NAME">contentAdjustMap</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.ScrollView._SC_CONTENT_ADJUST_MAP</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1433</span> </span><span class="WHIT">          </span><span class="COMM">// Ensure that scale transforms occur from the top-left corner (per our math).</span><span class="WHIT">
<span class='line'>1434</span> </span><span class="WHIT">          </span><span class="NAME">transformOriginX</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1435</span> </span><span class="WHIT">          </span><span class="NAME">transformOriginY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT">
<span class='line'>1436</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1437</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1438</span> 
<span class='line'>1439</span> </span><span class="WHIT">      </span><span class="NAME">contentAdjustMap.left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">left</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1440</span> </span><span class="WHIT">      </span><span class="NAME">contentAdjustMap.top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">top</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1441</span> </span><span class="WHIT">      </span><span class="NAME">contentAdjustMap.scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scale</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1442</span> 
<span class='line'>1443</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_animationDuration</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1444</span> </span><span class="WHIT">        </span><span class="COMM">// UNUSED. Animate using SC.View.prototype.animate. Cancelling the animation in place proved problematic.</span><span class="WHIT">
<span class='line'>1445</span> </span><span class="WHIT">        </span><span class="COMM">// contentView.animate({ left: left, top: top, scale: scale }, {</span><span class="WHIT">
<span class='line'>1446</span> </span><span class="WHIT">        </span><span class="COMM">//   duration: this._sc_animationDuration,</span><span class="WHIT">
<span class='line'>1447</span> </span><span class="WHIT">        </span><span class="COMM">//   timing: this._sc_animationTiming</span><span class="WHIT">
<span class='line'>1448</span> </span><span class="WHIT">        </span><span class="COMM">// });</span><span class="WHIT">
<span class='line'>1449</span> 
<span class='line'>1450</span> </span><span class="WHIT">        </span><span class="COMM">// // Run the animation immediately (don't wait for next Run Loop).</span><span class="WHIT">
<span class='line'>1451</span> </span><span class="WHIT">        </span><span class="COMM">// // Note: The next run loop will be queued none-the-less, so we may want to avoid that entirely in the future.</span><span class="WHIT">
<span class='line'>1452</span> </span><span class="WHIT">        </span><span class="COMM">// contentView._animate();</span><span class="WHIT">
<span class='line'>1453</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_animateContentView</span><span class="PUNC">(</span><span class="NAME">contentAdjustMap</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1454</span> 
<span class='line'>1455</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1456</span> </span><span class="WHIT">        </span><span class="NAME">contentView.adjust</span><span class="PUNC">(</span><span class="NAME">contentAdjustMap</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1457</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1458</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1459</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1460</span> 
<span class='line'>1461</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Re-position the scrollers and content depending on the need to scroll or not. */</span><span class="WHIT">
<span class='line'>1462</span> </span><span class="WHIT">  </span><span class="NAME">_sc_repositionScrollers</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1463</span> </span><span class="WHIT">    </span><span class="NAME">this.invokeOnce</span><span class="PUNC">(</span><span class="NAME">this._sc_repositionScrollersUnfiltered</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1464</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1465</span> 
<span class='line'>1466</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Re-position the scrollers and content depending on the need to scroll or not. */</span><span class="WHIT">
<span class='line'>1467</span> </span><span class="WHIT">  </span><span class="NAME">_sc_repositionScrollersUnfiltered</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1468</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">hasHorizontalScroller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'hasHorizontalScroller'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1469</span> </span><span class="WHIT">      </span><span class="NAME">hasVerticalScroller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'hasVerticalScroller'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1470</span> </span><span class="WHIT">      </span><span class="NAME">canScrollHorizontal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScrollHorizontal'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1471</span> </span><span class="WHIT">      </span><span class="NAME">canScrollVertical</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScrollVertical'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1472</span> </span><span class="WHIT">      </span><span class="NAME">containerLayoutMap</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.ScrollView._SC_CONTAINER_LAYOUT_MAP</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// Shared object used to avoid continually initializing/destroying objects.</span><span class="WHIT">
<span class='line'>1473</span> </span><span class="WHIT">      </span><span class="NAME">horizontalScrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollerView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1474</span> </span><span class="WHIT">      </span><span class="NAME">horizontalScrollerHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerView</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">canScrollHorizontal</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerView.get</span><span class="PUNC">(</span><span class="STRN">'scrollbarThickness'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1475</span> </span><span class="WHIT">      </span><span class="NAME">verticalScrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollerView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1476</span> </span><span class="WHIT">      </span><span class="NAME">verticalScrollerWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">verticalScrollerView</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">canScrollVertical</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">verticalScrollerView.get</span><span class="PUNC">(</span><span class="STRN">'scrollbarThickness'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1477</span> </span><span class="WHIT">      </span><span class="NAME">layout</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// The new layout to be applied to each scroller.</span><span class="WHIT">
<span class='line'>1478</span> 
<span class='line'>1479</span> </span><span class="WHIT">    </span><span class="COMM">// Create the container layout map once. Note: This is a shared object, all properties must be overwritten each time.</span><span class="WHIT">
<span class='line'>1480</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">containerLayoutMap</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">containerLayoutMap</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.ScrollView._SC_CONTAINER_LAYOUT_MAP</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1481</span> 
<span class='line'>1482</span> </span><span class="WHIT">    </span><span class="COMM">// Set the standard.</span><span class="WHIT">
<span class='line'>1483</span> </span><span class="WHIT">    </span><span class="NAME">containerLayoutMap.bottom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1484</span> </span><span class="WHIT">    </span><span class="NAME">containerLayoutMap.right</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1485</span> 
<span class='line'>1486</span> </span><span class="WHIT">    </span><span class="COMM">// Adjust the horizontal scroller.</span><span class="WHIT">
<span class='line'>1487</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">hasHorizontalScroller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1488</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">horizontalOverlay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalOverlay'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1489</span> </span><span class="WHIT">        </span><span class="NAME">horizontalScrollerLayout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollerLayout'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1490</span> 
<span class='line'>1491</span> </span><span class="WHIT">      </span><span class="COMM">// Adjust the scroller view accordingly. Allow for a custom default scroller layout to be set.</span><span class="WHIT">
<span class='line'>1492</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollerLayout</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1493</span> </span><span class="WHIT">        </span><span class="NAME">layout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1494</span> </span><span class="WHIT">          </span><span class="NAME">left</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerLayout.left</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1495</span> </span><span class="WHIT">          </span><span class="NAME">bottom</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerLayout.bottom</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1496</span> </span><span class="WHIT">          </span><span class="NAME">right</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerLayout.right</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">verticalScrollerWidth</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1497</span> </span><span class="WHIT">          </span><span class="NAME">height</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerHeight</span><span class="WHIT">
<span class='line'>1498</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1499</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1500</span> </span><span class="WHIT">        </span><span class="NAME">layout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1501</span> </span><span class="WHIT">          </span><span class="NAME">left</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1502</span> </span><span class="WHIT">          </span><span class="NAME">bottom</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1503</span> </span><span class="WHIT">          </span><span class="NAME">right</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">verticalScrollerWidth</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1504</span> </span><span class="WHIT">          </span><span class="NAME">height</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerHeight</span><span class="WHIT">
<span class='line'>1505</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1506</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1507</span> </span><span class="WHIT">      </span><span class="NAME">horizontalScrollerView.set</span><span class="PUNC">(</span><span class="STRN">'layout'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">layout</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1508</span> 
<span class='line'>1509</span> </span><span class="WHIT">      </span><span class="COMM">// Adjust the content view accordingly.</span><span class="WHIT">
<span class='line'>1510</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScrollHorizontal</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">horizontalOverlay</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1511</span> </span><span class="WHIT">        </span><span class="NAME">containerLayoutMap.bottom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1512</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1513</span> 
<span class='line'>1514</span> </span><span class="WHIT">      </span><span class="COMM">// Set the visibility of the scroller immediately.</span><span class="WHIT">
<span class='line'>1515</span> </span><span class="WHIT">      </span><span class="NAME">horizontalScrollerView.set</span><span class="PUNC">(</span><span class="STRN">'isVisible'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">canScrollHorizontal</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1516</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_fadeInHorizontalScroller</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1517</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1518</span> 
<span class='line'>1519</span> </span><span class="WHIT">    </span><span class="COMM">// Adjust the vertical scroller.</span><span class="WHIT">
<span class='line'>1520</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">hasVerticalScroller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1521</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">verticalOverlay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalOverlay'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1522</span> </span><span class="WHIT">        </span><span class="NAME">verticalScrollerLayout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollerLayout'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1523</span> 
<span class='line'>1524</span> </span><span class="WHIT">      </span><span class="COMM">// Adjust the scroller view accordingly. Allow for a custom default scroller layout to be set.</span><span class="WHIT">
<span class='line'>1525</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollerLayout</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1526</span> </span><span class="WHIT">        </span><span class="NAME">layout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1527</span> </span><span class="WHIT">          </span><span class="NAME">top</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">verticalScrollerLayout.top</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1528</span> </span><span class="WHIT">          </span><span class="NAME">right</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">verticalScrollerLayout.right</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1529</span> </span><span class="WHIT">          </span><span class="NAME">bottom</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">verticalScrollerLayout.bottom</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerHeight</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1530</span> </span><span class="WHIT">          </span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">verticalScrollerWidth</span><span class="WHIT">
<span class='line'>1531</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1532</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1533</span> </span><span class="WHIT">        </span><span class="NAME">layout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1534</span> </span><span class="WHIT">          </span><span class="NAME">top</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1535</span> </span><span class="WHIT">          </span><span class="NAME">right</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1536</span> </span><span class="WHIT">          </span><span class="NAME">bottom</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerHeight</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1537</span> </span><span class="WHIT">          </span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">verticalScrollerWidth</span><span class="WHIT">
<span class='line'>1538</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1539</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1540</span> </span><span class="WHIT">      </span><span class="NAME">verticalScrollerView.set</span><span class="PUNC">(</span><span class="STRN">'layout'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">layout</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1541</span> 
<span class='line'>1542</span> </span><span class="WHIT">      </span><span class="COMM">// Prepare to adjust the content view accordingly.</span><span class="WHIT">
<span class='line'>1543</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScrollVertical</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">verticalOverlay</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1544</span> </span><span class="WHIT">        </span><span class="NAME">containerLayoutMap.right</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">verticalScrollerWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1545</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1546</span> 
<span class='line'>1547</span> </span><span class="WHIT">      </span><span class="COMM">// Set the visibility of the scroller immediately.</span><span class="WHIT">
<span class='line'>1548</span> </span><span class="WHIT">      </span><span class="NAME">verticalScrollerView.set</span><span class="PUNC">(</span><span class="STRN">'isVisible'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">canScrollVertical</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1549</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_fadeInVerticalScroller</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1550</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1551</span> 
<span class='line'>1552</span> </span><span class="WHIT">    </span><span class="COMM">// Adjust the container view accordingly (i.e. to make space for scrollers or take space back).</span><span class="WHIT">
<span class='line'>1553</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">containerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'containerView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1554</span> </span><span class="WHIT">    </span><span class="NAME">containerView.adjust</span><span class="PUNC">(</span><span class="NAME">containerLayoutMap</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1555</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1556</span> 
<span class='line'>1557</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Clean up observers on the content view. */</span><span class="WHIT">
<span class='line'>1558</span> </span><span class="WHIT">  </span><span class="NAME">_sc_removeContentViewObservers</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1559</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">oldView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentView</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1560</span> </span><span class="WHIT">      </span><span class="NAME">frameChangeFunc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentViewFrameDidChange</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1561</span> </span><span class="WHIT">      </span><span class="COMM">// layerChangeFunc = this._sc_contentViewLayerDidChange;</span><span class="WHIT">
<span class='line'>1562</span> 
<span class='line'>1563</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">oldView</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1564</span> </span><span class="WHIT">      </span><span class="NAME">oldView.removeObserver</span><span class="PUNC">(</span><span class="STRN">'frame'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">frameChangeFunc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1565</span> </span><span class="WHIT">      </span><span class="COMM">// oldView.removeObserver('layer', this, layerChangeFunc);</span><span class="WHIT">
<span class='line'>1566</span> 
<span class='line'>1567</span> </span><span class="WHIT">      </span><span class="COMM">// this._sc_shouldResizeContentWidth = false;</span><span class="WHIT">
<span class='line'>1568</span> </span><span class="WHIT">      </span><span class="COMM">// this._sc_shouldResizeContentHeight = false;</span><span class="WHIT">
<span class='line'>1569</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1570</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1571</span> 
<span class='line'>1572</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Whenever the scale changes, update the scrollers and adjust the location of the content view. */</span><span class="WHIT">
<span class='line'>1573</span> </span><span class="WHIT">  </span><span class="NAME">_sc_scaleDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1574</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1575</span> </span><span class="WHIT">      </span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1576</span> 
<span class='line'>1577</span> </span><span class="WHIT">    </span><span class="COMM">// If the content is statically laid out, use margins in the container layer to move it.</span><span class="WHIT">
<span class='line'>1578</span> </span><span class="WHIT">    </span><span class="COMM">// TODO: Remove static layout support.</span><span class="WHIT">
<span class='line'>1579</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentView</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1580</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentView.useStaticLayout</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1581</span> </span><span class="WHIT">        </span><span class="COMM">//@if(debug)</span><span class="WHIT">
<span class='line'>1582</span> </span><span class="WHIT">        </span><span class="COMM">// If the scale is not 1 then assume the developer is trying to scale static content.</span><span class="WHIT">
<span class='line'>1583</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1584</span> </span><span class="WHIT">          </span><span class="NAME">SC.warn</span><span class="PUNC">(</span><span class="STRN">"Developer Warning: SC.ScrollView's `scale` feature does not support statically laid out content views."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1585</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1586</span> </span><span class="WHIT">        </span><span class="COMM">//@endif</span><span class="WHIT">
<span class='line'>1587</span> 
<span class='line'>1588</span> </span><span class="WHIT">      </span><span class="COMM">// Reposition the content view to apply the scale.</span><span class="WHIT">
<span class='line'>1589</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1590</span> </span><span class="WHIT">        </span><span class="COMM">// Apply this change.</span><span class="WHIT">
<span class='line'>1591</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_repositionContentView</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1592</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1593</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1594</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1595</span> 
<span class='line'>1596</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Whenever the scroll offsets change, update the scrollers and adjust the location of the content view. */</span><span class="WHIT">
<span class='line'>1597</span> </span><span class="WHIT">  </span><span class="NAME">_sc_scrollOffsetHorizontalDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1598</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_repositionContentView</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1599</span> </span><span class="WHIT">    </span><span class="NAME">this.invokeLast</span><span class="PUNC">(</span><span class="NAME">this._sc_fadeInHorizontalScroller</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1600</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1601</span> 
<span class='line'>1602</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Whenever the scroll offsets change, update the scrollers and adjust the location of the content view. */</span><span class="WHIT">
<span class='line'>1603</span> </span><span class="WHIT">  </span><span class="NAME">_sc_scrollOffsetVerticalDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1604</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_repositionContentView</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1605</span> </span><span class="WHIT">    </span><span class="NAME">this.invokeLast</span><span class="PUNC">(</span><span class="NAME">this._sc_fadeInVerticalScroller</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1606</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1607</span> 
<span class='line'>1608</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Update the scrollers. */</span><span class="WHIT">
<span class='line'>1609</span> </span><span class="WHIT">  </span><span class="NAME">_sc_updateScrollers</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1610</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">horizontalScrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollerView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1611</span> </span><span class="WHIT">      </span><span class="NAME">verticalScrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollerView'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1612</span> </span><span class="WHIT">      </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1613</span> </span><span class="WHIT">      </span><span class="NAME">minimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1614</span> </span><span class="WHIT">      </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1615</span> </span><span class="WHIT">      </span><span class="NAME">maximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1616</span> </span><span class="WHIT">      </span><span class="NAME">containerHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1617</span> </span><span class="WHIT">      </span><span class="NAME">contentHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1618</span> 
<span class='line'>1619</span> </span><span class="WHIT">    </span><span class="NAME">containerHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_containerHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1620</span> </span><span class="WHIT">    </span><span class="NAME">containerWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_containerWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1621</span> </span><span class="WHIT">    </span><span class="NAME">contentHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1622</span> </span><span class="WHIT">    </span><span class="NAME">contentWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_contentWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1623</span> 
<span class='line'>1624</span> </span><span class="WHIT">    </span><span class="COMM">// Update the minimum and maximum scrollable distance on the scrollers as well as their visibility.</span><span class="WHIT">
<span class='line'>1625</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">proportion</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1626</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollerView</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1627</span> </span><span class="WHIT">      </span><span class="NAME">horizontalScrollerView.set</span><span class="PUNC">(</span><span class="STRN">'minimum'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1628</span> </span><span class="WHIT">      </span><span class="NAME">horizontalScrollerView.set</span><span class="PUNC">(</span><span class="STRN">'maximum'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1629</span> 
<span class='line'>1630</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'autohidesHorizontalScroller'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1631</span> </span><span class="WHIT">        </span><span class="NAME">this.setIfChanged</span><span class="PUNC">(</span><span class="STRN">'isHorizontalScrollerVisible'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1632</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1633</span> 
<span class='line'>1634</span> </span><span class="WHIT">      </span><span class="COMM">// Constrain the proportion to 100%.</span><span class="WHIT">
<span class='line'>1635</span> </span><span class="WHIT">      </span><span class="NAME">proportion</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">containerWidth</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">contentWidth</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1.0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1636</span> </span><span class="WHIT">      </span><span class="NAME">horizontalScrollerView.setIfChanged</span><span class="PUNC">(</span><span class="STRN">'proportion'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">proportion</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1637</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1638</span> 
<span class='line'>1639</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollerView</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1640</span> </span><span class="WHIT">      </span><span class="NAME">verticalScrollerView.set</span><span class="PUNC">(</span><span class="STRN">'minimum'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">minimumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1641</span> </span><span class="WHIT">      </span><span class="NAME">verticalScrollerView.set</span><span class="PUNC">(</span><span class="STRN">'maximum'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1642</span> 
<span class='line'>1643</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'autohidesVerticalScroller'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1644</span> </span><span class="WHIT">        </span><span class="NAME">this.setIfChanged</span><span class="PUNC">(</span><span class="STRN">'isVerticalScrollerVisible'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">contentHeight</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">containerHeight</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1645</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1646</span> 
<span class='line'>1647</span> </span><span class="WHIT">      </span><span class="COMM">// Constrain the proportion to 100%.</span><span class="WHIT">
<span class='line'>1648</span> </span><span class="WHIT">      </span><span class="NAME">proportion</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">containerHeight</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">contentHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1.0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1649</span> </span><span class="WHIT">      </span><span class="NAME">verticalScrollerView.setIfChanged</span><span class="PUNC">(</span><span class="STRN">'proportion'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">proportion</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1650</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1651</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1652</span> 
<span class='line'>1653</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Adjust the content alignment vertically on change. */</span><span class="WHIT">
<span class='line'>1654</span> </span><span class="WHIT">  </span><span class="NAME">_sc_verticalAlignDidChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1655</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1656</span> 
<span class='line'>1657</span> </span><span class="WHIT">    </span><span class="COMM">// Align vertically (Unless content height is zero).</span><span class="WHIT">
<span class='line'>1658</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">maximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._sc_contentHeight</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1659</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">verticalAlign</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalAlign'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1660</span> </span><span class="WHIT">        </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1661</span> 
<span class='line'>1662</span> </span><span class="WHIT">      </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_alignedVerticalOffset</span><span class="PUNC">(</span><span class="NAME">verticalAlign</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_containerHeight</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_contentHeight</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1663</span> </span><span class="WHIT">      </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1664</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1665</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1666</span> 
<span class='line'>1667</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Instantiate the container view and the scrollers as needed. */</span><span class="WHIT">
<span class='line'>1668</span> </span><span class="WHIT">  </span><span class="NAME">createChildViews</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1669</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">childViews</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1670</span> 
<span class='line'>1671</span> </span><span class="WHIT">    </span><span class="COMM">// Set up the container view.</span><span class="WHIT">
<span class='line'>1672</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">containerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'containerView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1673</span> 
<span class='line'>1674</span> </span><span class="WHIT">    </span><span class="COMM">//@if(debug)</span><span class="WHIT">
<span class='line'>1675</span> </span><span class="WHIT">    </span><span class="COMM">// Provide some debug-mode only developer support to prevent problems.</span><span class="WHIT">
<span class='line'>1676</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">containerView</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1677</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Developer Error: SC.ScrollView must have a containerView class set before it is instantiated."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1678</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1679</span> </span><span class="WHIT">    </span><span class="COMM">//@endif</span><span class="WHIT">
<span class='line'>1680</span> 
<span class='line'>1681</span> </span><span class="WHIT">    </span><span class="NAME">containerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.containerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.createChildView</span><span class="PUNC">(</span><span class="NAME">containerView</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1682</span> </span><span class="WHIT">      </span><span class="NAME">contentView</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.contentView</span><span class="WHIT"> </span><span class="COMM">// Initialize the view with the currently set container view.</span><span class="WHIT">
<span class='line'>1683</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1684</span> </span><span class="WHIT">    </span><span class="NAME">this.contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">containerView.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Replace our content view with the instantiated version.</span><span class="WHIT">
<span class='line'>1685</span> </span><span class="WHIT">    </span><span class="NAME">childViews.push</span><span class="PUNC">(</span><span class="NAME">containerView</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1686</span> 
<span class='line'>1687</span> </span><span class="WHIT">    </span><span class="COMM">// Set up the scrollers.</span><span class="WHIT">
<span class='line'>1688</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scrollerView</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1689</span> 
<span class='line'>1690</span> </span><span class="WHIT">    </span><span class="COMM">// Create a horizontal scroller view if needed.</span><span class="WHIT">
<span class='line'>1691</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'hasHorizontalScroller'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1692</span> </span><span class="WHIT">      </span><span class="COMM">// Remove the class entirely.</span><span class="WHIT">
<span class='line'>1693</span> </span><span class="WHIT">      </span><span class="NAME">this.horizontalScrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1694</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1695</span> </span><span class="WHIT">      </span><span class="NAME">scrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollerView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1696</span> 
<span class='line'>1697</span> </span><span class="WHIT">      </span><span class="COMM">// Use a default scroller view.</span><span class="WHIT">
<span class='line'>1698</span> </span><span class="WHIT">      </span><span class="COMM">/* jshint eqnull:true */</span><span class="WHIT">
<span class='line'>1699</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scrollerView</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1700</span> </span><span class="WHIT">        </span><span class="NAME">scrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalOverlay'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">SC.OverlayScrollerView</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.ScrollerView</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1701</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1702</span> 
<span class='line'>1703</span> </span><span class="WHIT">      </span><span class="COMM">// Replace the class property with an instance.</span><span class="WHIT">
<span class='line'>1704</span> </span><span class="WHIT">      </span><span class="NAME">scrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.horizontalScrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.createChildView</span><span class="PUNC">(</span><span class="NAME">scrollerView</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1705</span> </span><span class="WHIT">        </span><span class="NAME">isVisible</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'autohidesHorizontalScroller'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1706</span> </span><span class="WHIT">        </span><span class="NAME">layoutDirection</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.LAYOUT_HORIZONTAL</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1707</span> </span><span class="WHIT">        </span><span class="NAME">value</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1708</span> </span><span class="WHIT">        </span><span class="NAME">valueBinding</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'.owner.horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// Bind the value of the scroller to our horizontal offset.</span><span class="WHIT">
<span class='line'>1709</span> </span><span class="WHIT">        </span><span class="NAME">minimum</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1710</span> </span><span class="WHIT">        </span><span class="NAME">maximum</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1711</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1712</span> 
<span class='line'>1713</span> </span><span class="WHIT">      </span><span class="COMM">// Add the scroller view to the child views array.</span><span class="WHIT">
<span class='line'>1714</span> </span><span class="WHIT">      </span><span class="NAME">childViews.push</span><span class="PUNC">(</span><span class="NAME">scrollerView</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1715</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1716</span> 
<span class='line'>1717</span> </span><span class="WHIT">    </span><span class="COMM">// Create a vertical scroller view if needed.</span><span class="WHIT">
<span class='line'>1718</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'hasVerticalScroller'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1719</span> </span><span class="WHIT">      </span><span class="COMM">// Remove the class entirely.</span><span class="WHIT">
<span class='line'>1720</span> </span><span class="WHIT">      </span><span class="NAME">this.verticalScrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1721</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1722</span> </span><span class="WHIT">      </span><span class="NAME">scrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollerView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1723</span> 
<span class='line'>1724</span> </span><span class="WHIT">      </span><span class="COMM">// Use a default scroller view.</span><span class="WHIT">
<span class='line'>1725</span> </span><span class="WHIT">      </span><span class="COMM">/* jshint eqnull:true */</span><span class="WHIT">
<span class='line'>1726</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scrollerView</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1727</span> </span><span class="WHIT">        </span><span class="NAME">scrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalOverlay'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">SC.OverlayScrollerView</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.ScrollerView</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1728</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1729</span> 
<span class='line'>1730</span> </span><span class="WHIT">      </span><span class="COMM">// Replace the class property with an instance.</span><span class="WHIT">
<span class='line'>1731</span> </span><span class="WHIT">      </span><span class="NAME">scrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.verticalScrollerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.createChildView</span><span class="PUNC">(</span><span class="NAME">scrollerView</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1732</span> </span><span class="WHIT">        </span><span class="NAME">isVisible</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'autohidesVerticalScroller'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1733</span> </span><span class="WHIT">        </span><span class="NAME">layoutDirection</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.LAYOUT_VERTICAL</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1734</span> </span><span class="WHIT">        </span><span class="NAME">value</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1735</span> </span><span class="WHIT">        </span><span class="NAME">valueBinding</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'.owner.verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// Bind the value of the scroller to our vertical offset.</span><span class="WHIT">
<span class='line'>1736</span> </span><span class="WHIT">        </span><span class="NAME">minimum</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1737</span> </span><span class="WHIT">        </span><span class="NAME">maximum</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1738</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1739</span> 
<span class='line'>1740</span> </span><span class="WHIT">      </span><span class="COMM">// Add the scroller view to the child views array.</span><span class="WHIT">
<span class='line'>1741</span> </span><span class="WHIT">      </span><span class="NAME">childViews.push</span><span class="PUNC">(</span><span class="NAME">scrollerView</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1742</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1743</span> 
<span class='line'>1744</span> </span><span class="WHIT">    </span><span class="COMM">// Set the childViews array.</span><span class="WHIT">
<span class='line'>1745</span> </span><span class="WHIT">    </span><span class="NAME">this.childViews</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">childViews</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1746</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1747</span> 
<span class='line'>1748</span> </span><span class="WHIT">  </span><span class="COMM">/** @private */</span><span class="WHIT">
<span class='line'>1749</span> </span><span class="WHIT">  </span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1750</span> </span><span class="WHIT">    </span><span class="COMM">// Clean up.</span><span class="WHIT">
<span class='line'>1751</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_removeContentViewObservers</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1752</span> </span><span class="WHIT">    </span><span class="NAME">this.removeObserver</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_contentViewDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1753</span> 
<span class='line'>1754</span> </span><span class="WHIT">    </span><span class="NAME">this.removeObserver</span><span class="PUNC">(</span><span class="STRN">'horizontalAlign'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_horizontalAlignDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1755</span> </span><span class="WHIT">    </span><span class="NAME">this.removeObserver</span><span class="PUNC">(</span><span class="STRN">'verticalAlign'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_verticalAlignDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1756</span> 
<span class='line'>1757</span> </span><span class="WHIT">    </span><span class="NAME">sc_super</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1758</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1759</span> 
<span class='line'>1760</span> </span><span class="WHIT">  </span><span class="COMM">/** @private SC.View */</span><span class="WHIT">
<span class='line'>1761</span> </span><span class="WHIT">  </span><span class="NAME">didCreateLayer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1762</span> </span><span class="WHIT">    </span><span class="COMM">// Observe the scroll offsets for changes and initialize once.</span><span class="WHIT">
<span class='line'>1763</span> </span><span class="WHIT">    </span><span class="NAME">this.addObserver</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_scrollOffsetHorizontalDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1764</span> </span><span class="WHIT">    </span><span class="NAME">this.addObserver</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_scrollOffsetVerticalDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1765</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_scrollOffsetHorizontalDidChange</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1766</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_scrollOffsetVerticalDidChange</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1767</span> 
<span class='line'>1768</span> </span><span class="WHIT">    </span><span class="COMM">// Observe the scroller visibility properties for changes and initialize once.</span><span class="WHIT">
<span class='line'>1769</span> </span><span class="WHIT">    </span><span class="NAME">this.addObserver</span><span class="PUNC">(</span><span class="STRN">'isHorizontalScrollerVisible'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_repositionScrollers</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1770</span> </span><span class="WHIT">    </span><span class="NAME">this.addObserver</span><span class="PUNC">(</span><span class="STRN">'isVerticalScrollerVisible'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_repositionScrollers</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1771</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_repositionScrollers</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1772</span> 
<span class='line'>1773</span> </span><span class="WHIT">    </span><span class="COMM">// Observe the scale for changes and initialize once.</span><span class="WHIT">
<span class='line'>1774</span> </span><span class="WHIT">    </span><span class="NAME">this.addObserver</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_scaleDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1775</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_scaleDidChange</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1776</span> 
<span class='line'>1777</span> </span><span class="WHIT">    </span><span class="COMM">// Observe our container view frame for changes and initialize once.</span><span class="WHIT">
<span class='line'>1778</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">containerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'containerView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1779</span> </span><span class="WHIT">    </span><span class="NAME">containerView.addObserver</span><span class="PUNC">(</span><span class="STRN">'frame'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_containerViewFrameDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1780</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_containerViewFrameDidChange</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1781</span> 
<span class='line'>1782</span> </span><span class="WHIT">    </span><span class="COMM">// Observe for changes in enablement and visibility for registering with SC.Drag auto-scrolling and initialize once.</span><span class="WHIT">
<span class='line'>1783</span> </span><span class="WHIT">    </span><span class="NAME">this.addObserver</span><span class="PUNC">(</span><span class="STRN">'isVisibleInWindow'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_registerAutoscroll</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1784</span> </span><span class="WHIT">    </span><span class="NAME">this.addObserver</span><span class="PUNC">(</span><span class="STRN">'isEnabledInPane'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_registerAutoscroll</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1785</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_registerAutoscroll</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1786</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1787</span> 
<span class='line'>1788</span> </span><span class="WHIT">  </span><span class="COMM">/** SC.Object.prototype */</span><span class="WHIT">
<span class='line'>1789</span> </span><span class="WHIT">  </span><span class="NAME">init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1790</span> </span><span class="WHIT">    </span><span class="NAME">sc_super</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1791</span> 
<span class='line'>1792</span> </span><span class="WHIT">    </span><span class="COMM">// Observe the content view for changes and initialize once.</span><span class="WHIT">
<span class='line'>1793</span> </span><span class="WHIT">    </span><span class="NAME">this.addObserver</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_contentViewDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1794</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_contentViewDidChange</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1795</span> 
<span class='line'>1796</span> </span><span class="WHIT">    </span><span class="COMM">// Observe the alignment properties for changes. No need to initialize, the default alignment property</span><span class="WHIT">
<span class='line'>1797</span> </span><span class="WHIT">    </span><span class="COMM">// will be used.</span><span class="WHIT">
<span class='line'>1798</span> </span><span class="WHIT">    </span><span class="NAME">this.addObserver</span><span class="PUNC">(</span><span class="STRN">'horizontalAlign'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_horizontalAlignDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1799</span> </span><span class="WHIT">    </span><span class="NAME">this.addObserver</span><span class="PUNC">(</span><span class="STRN">'verticalAlign'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_verticalAlignDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1800</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1801</span> 
<span class='line'>1802</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>1803</span>     Scrolls the receiver in the horizontal and vertical directions by the amount specified, if
<span class='line'>1804</span>     allowed.  The actual scroll amount will be constrained by the current scroll minimums and
<span class='line'>1805</span>     maximums. (If you wish to scroll outside of those bounds, you should call `scrollTo` directly.)
<span class='line'>1806</span> 
<span class='line'>1807</span>     If you only want to scroll in one direction, pass null or 0 for the other direction.
<span class='line'>1808</span> 
<span class='line'>1809</span>     @param {Number} x change in the x direction (or hash)
<span class='line'>1810</span>     @param {Number} y change in the y direction
<span class='line'>1811</span>     @returns {SC.ScrollView} receiver
<span class='line'>1812</span>   */</span><span class="WHIT">
<span class='line'>1813</span> </span><span class="WHIT">  </span><span class="NAME">scrollBy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1814</span> </span><span class="WHIT">    </span><span class="COMM">// Normalize (deprecated).</span><span class="WHIT">
<span class='line'>1815</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">SC.typeOf</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">SC.T_HASH</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1816</span> </span><span class="WHIT">      </span><span class="COMM">//@if(debug)</span><span class="WHIT">
<span class='line'>1817</span> </span><span class="WHIT">      </span><span class="COMM">// Add some developer support. It's faster to pass the arguments individually so that we don't need to do this normalization and the</span><span class="WHIT">
<span class='line'>1818</span> </span><span class="WHIT">      </span><span class="COMM">// developer isn't creating an extra Object needlessly.</span><span class="WHIT">
<span class='line'>1819</span> </span><span class="WHIT">      </span><span class="NAME">SC.warn</span><span class="PUNC">(</span><span class="STRN">"Developer Warning: Passing an object to SC.ScrollView.scrollBy is deprecated. Please pass both the x and y arguments."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1820</span> </span><span class="WHIT">      </span><span class="COMM">//@endif</span><span class="WHIT">
<span class='line'>1821</span> 
<span class='line'>1822</span> </span><span class="WHIT">      </span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">x.y</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1823</span> </span><span class="WHIT">      </span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">x.x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1824</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1825</span> 
<span class='line'>1826</span> </span><span class="WHIT">    </span><span class="COMM">// If null, undefined, or 0, pass null; otherwise just add current offset.</span><span class="WHIT">
<span class='line'>1827</span> </span><span class="WHIT">    </span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1828</span> </span><span class="WHIT">    </span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1829</span> 
<span class='line'>1830</span> </span><span class="WHIT">    </span><span class="COMM">// Constrain within min and max. (Calls to scrollBy are generally convenience calls that should not have to</span><span class="WHIT">
<span class='line'>1831</span> </span><span class="WHIT">    </span><span class="COMM">// worry about exceeding bounds and making the followup call. Features that want to allow overscroll should call</span><span class="WHIT">
<span class='line'>1832</span> </span><span class="WHIT">    </span><span class="COMM">// scrollTo directly.)</span><span class="WHIT">
<span class='line'>1833</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1834</span> </span><span class="WHIT">      </span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1835</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1836</span> 
<span class='line'>1837</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1838</span> </span><span class="WHIT">      </span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1839</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1840</span> 
<span class='line'>1841</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.scrollTo</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1842</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1843</span> 
<span class='line'>1844</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>1845</span>     Scrolls the receiver down one or more lines if allowed.  If number of
<span class='line'>1846</span>     lines is not specified, scrolls one line.
<span class='line'>1847</span> 
<span class='line'>1848</span>     @param {Number} lines number of lines
<span class='line'>1849</span>     @returns {SC.ScrollView} receiver
<span class='line'>1850</span>   */</span><span class="WHIT">
<span class='line'>1851</span> </span><span class="WHIT">  </span><span class="NAME">scrollDownLine</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lines</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1852</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lines</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">lines</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1853</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.scrollBy</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalLineScroll'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">lines</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1854</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1855</span> 
<span class='line'>1856</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>1857</span>     Scrolls the receiver down one or more page if allowed.  If number of
<span class='line'>1858</span>     pages is not specified, scrolls one page.  The page size is determined by
<span class='line'>1859</span>     the verticalPageScroll value.  By default this is the size of the current
<span class='line'>1860</span>     scrollable area.
<span class='line'>1861</span> 
<span class='line'>1862</span>     @param {Number} pages number of lines
<span class='line'>1863</span>     @returns {SC.ScrollView} receiver
<span class='line'>1864</span>   */</span><span class="WHIT">
<span class='line'>1865</span> </span><span class="WHIT">  </span><span class="NAME">scrollDownPage</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">pages</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1866</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">pages</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">pages</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1867</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.scrollBy</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalPageScroll'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">pages</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1868</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1869</span> 
<span class='line'>1870</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>1871</span>     Scrolls the receiver left one or more lines if allowed.  If number of
<span class='line'>1872</span>     lines is not specified, scrolls one line.
<span class='line'>1873</span> 
<span class='line'>1874</span>     @param {Number} lines number of lines
<span class='line'>1875</span>     @returns {SC.ScrollView} receiver
<span class='line'>1876</span>   */</span><span class="WHIT">
<span class='line'>1877</span> </span><span class="WHIT">  </span><span class="NAME">scrollLeftLine</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lines</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1878</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lines</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">lines</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1879</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.scrollTo</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalLineScroll'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">lines</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1880</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1881</span> 
<span class='line'>1882</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>1883</span>     Scrolls the receiver left one or more page if allowed.  If number of
<span class='line'>1884</span>     pages is not specified, scrolls one page.  The page size is determined by
<span class='line'>1885</span>     the verticalPageScroll value.  By default this is the size of the current
<span class='line'>1886</span>     scrollable area.
<span class='line'>1887</span> 
<span class='line'>1888</span>     @param {Number} pages number of lines
<span class='line'>1889</span>     @returns {SC.ScrollView} receiver
<span class='line'>1890</span>   */</span><span class="WHIT">
<span class='line'>1891</span> </span><span class="WHIT">  </span><span class="NAME">scrollLeftPage</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">pages</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1892</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">pages</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">pages</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1893</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.scrollBy</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalPageScroll'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">pages</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1894</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1895</span> 
<span class='line'>1896</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>1897</span>     Scrolls the receiver right one or more lines if allowed.  If number of
<span class='line'>1898</span>     lines is not specified, scrolls one line.
<span class='line'>1899</span> 
<span class='line'>1900</span>     @param {Number} lines number of lines
<span class='line'>1901</span>     @returns {SC.ScrollView} receiver
<span class='line'>1902</span>   */</span><span class="WHIT">
<span class='line'>1903</span> </span><span class="WHIT">  </span><span class="NAME">scrollRightLine</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lines</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1904</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lines</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">lines</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1905</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.scrollTo</span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalLineScroll'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">lines</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1906</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1907</span> 
<span class='line'>1908</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>1909</span>     Scrolls the receiver right one or more page if allowed.  If number of
<span class='line'>1910</span>     pages is not specified, scrolls one page.  The page size is determined by
<span class='line'>1911</span>     the verticalPageScroll value.  By default this is the size of the current
<span class='line'>1912</span>     scrollable area.
<span class='line'>1913</span> 
<span class='line'>1914</span>     @param {Number} pages number of lines
<span class='line'>1915</span>     @returns {SC.ScrollView} receiver
<span class='line'>1916</span>   */</span><span class="WHIT">
<span class='line'>1917</span> </span><span class="WHIT">  </span><span class="NAME">scrollRightPage</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">pages</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1918</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">pages</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">pages</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1919</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.scrollBy</span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalPageScroll'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">pages</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1920</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1921</span> 
<span class='line'>1922</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>1923</span>     Scrolls to the specified x,y coordinates.  This should be the offset into the contentView that
<span class='line'>1924</span>     you want to appear at the top-left corner of the scroll view.
<span class='line'>1925</span> 
<span class='line'>1926</span>     This method will contain the actual scroll based on whether the view can scroll in the named
<span class='line'>1927</span>     direction and the maximum distance it can scroll.
<span class='line'>1928</span> 
<span class='line'>1929</span>     If you only want to scroll in one direction, pass null for the other direction.
<span class='line'>1930</span> 
<span class='line'>1931</span>     @param {Number} x the x scroll location
<span class='line'>1932</span>     @param {Number} y the y scroll location
<span class='line'>1933</span>     @returns {SC.ScrollView} receiver
<span class='line'>1934</span>   */</span><span class="WHIT">
<span class='line'>1935</span> </span><span class="WHIT">  </span><span class="NAME">scrollTo</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1936</span> </span><span class="WHIT">    </span><span class="COMM">// Normalize (deprecated).</span><span class="WHIT">
<span class='line'>1937</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">SC.typeOf</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">SC.T_HASH</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1938</span> </span><span class="WHIT">      </span><span class="COMM">//@if(debug)</span><span class="WHIT">
<span class='line'>1939</span> </span><span class="WHIT">      </span><span class="COMM">// Add some developer support. It's faster to pass the arguments individually so that we don't need to do this normalization and the</span><span class="WHIT">
<span class='line'>1940</span> </span><span class="WHIT">      </span><span class="COMM">// developer isn't creating an extra Object needlessly.</span><span class="WHIT">
<span class='line'>1941</span> </span><span class="WHIT">      </span><span class="NAME">SC.warn</span><span class="PUNC">(</span><span class="STRN">"Developer Warning: Passing an object to SC.ScrollView.scrollTo is deprecated. Please pass both the x and y arguments."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1942</span> </span><span class="WHIT">      </span><span class="COMM">//@endif</span><span class="WHIT">
<span class='line'>1943</span> 
<span class='line'>1944</span> </span><span class="WHIT">      </span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">x.y</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1945</span> </span><span class="WHIT">      </span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">x.x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1946</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1947</span> 
<span class='line'>1948</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">SC.none</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1949</span> </span><span class="WHIT">      </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1950</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1951</span> 
<span class='line'>1952</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">SC.none</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1953</span> </span><span class="WHIT">      </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1954</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1955</span> 
<span class='line'>1956</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1957</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1958</span> 
<span class='line'>1959</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>1960</span>     Scroll to the supplied rectangle.
<span class='line'>1961</span> 
<span class='line'>1962</span>     If the rectangle is bigger than the viewport, the top-left
<span class='line'>1963</span>     will be preferred.
<span class='line'>1964</span> 
<span class='line'>1965</span>     (Note that if your content is scaled, the rectangle must be
<span class='line'>1966</span>     relative to the contentView's scale, not the ScrollView's.)
<span class='line'>1967</span> 
<span class='line'>1968</span>     @param {Rect} rect Rectangle to which to scroll.
<span class='line'>1969</span>     @returns {Boolean} YES if scroll position was changed.
<span class='line'>1970</span>   */</span><span class="WHIT">
<span class='line'>1971</span> </span><span class="WHIT">  </span><span class="NAME">scrollToRect</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">rect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1972</span> </span><span class="WHIT">    </span><span class="COMM">// find current visible frame.</span><span class="WHIT">
<span class='line'>1973</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">vo</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.cloneRect</span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'containerView'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">get</span><span class="PUNC">(</span><span class="STRN">'frame'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1974</span> </span><span class="WHIT">        </span><span class="NAME">origX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1975</span> </span><span class="WHIT">        </span><span class="NAME">origY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1976</span> </span><span class="WHIT">        </span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1977</span> 
<span class='line'>1978</span> </span><span class="WHIT">    </span><span class="NAME">vo.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">origX</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1979</span> </span><span class="WHIT">    </span><span class="NAME">vo.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">origY</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1980</span> 
<span class='line'>1981</span> </span><span class="WHIT">    </span><span class="COMM">// Scale rect.</span><span class="WHIT">
<span class='line'>1982</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1983</span> </span><span class="WHIT">      </span><span class="NAME">rect</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.cloneRect</span><span class="PUNC">(</span><span class="NAME">rect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1984</span> </span><span class="WHIT">      </span><span class="NAME">rect.x</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scale</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1985</span> </span><span class="WHIT">      </span><span class="NAME">rect.y</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scale</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1986</span> </span><span class="WHIT">      </span><span class="NAME">rect.height</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scale</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1987</span> </span><span class="WHIT">      </span><span class="NAME">rect.width</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scale</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1988</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1989</span> 
<span class='line'>1990</span> </span><span class="WHIT">    </span><span class="COMM">// if bottom edge is not visible, shift origin</span><span class="WHIT">
<span class='line'>1991</span> </span><span class="WHIT">    </span><span class="NAME">vo.y</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.maxY</span><span class="PUNC">(</span><span class="NAME">rect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">SC.maxY</span><span class="PUNC">(</span><span class="NAME">vo</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1992</span> </span><span class="WHIT">    </span><span class="NAME">vo.x</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.maxX</span><span class="PUNC">(</span><span class="NAME">rect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">SC.maxX</span><span class="PUNC">(</span><span class="NAME">vo</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1993</span> 
<span class='line'>1994</span> </span><span class="WHIT">    </span><span class="COMM">// if top edge is not visible, shift origin</span><span class="WHIT">
<span class='line'>1995</span> </span><span class="WHIT">    </span><span class="NAME">vo.y</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.minY</span><span class="PUNC">(</span><span class="NAME">vo</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">SC.minY</span><span class="PUNC">(</span><span class="NAME">rect</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1996</span> </span><span class="WHIT">    </span><span class="NAME">vo.x</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.minX</span><span class="PUNC">(</span><span class="NAME">vo</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">SC.minX</span><span class="PUNC">(</span><span class="NAME">rect</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1997</span> 
<span class='line'>1998</span> </span><span class="WHIT">    </span><span class="COMM">// scroll to that origin.</span><span class="WHIT">
<span class='line'>1999</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">origX</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">vo.x</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">origY</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">vo.y</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2000</span> </span><span class="WHIT">      </span><span class="NAME">this.scrollTo</span><span class="PUNC">(</span><span class="NAME">vo.x</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">vo.y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2001</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2002</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2003</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2004</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2005</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2006</span> 
<span class='line'>2007</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>2008</span>     Scrolls the receiver up one or more lines if allowed.  If number of
<span class='line'>2009</span>     lines is not specified, scrolls one line.
<span class='line'>2010</span> 
<span class='line'>2011</span>     @param {Number} lines number of lines
<span class='line'>2012</span>     @returns {SC.ScrollView} receiver
<span class='line'>2013</span>   */</span><span class="WHIT">
<span class='line'>2014</span> </span><span class="WHIT">  </span><span class="NAME">scrollUpLine</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lines</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2015</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lines</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">lines</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2016</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.scrollBy</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalLineScroll'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">lines</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2017</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2018</span> 
<span class='line'>2019</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>2020</span>     Scrolls the receiver up one or more page if allowed.  If number of
<span class='line'>2021</span>     pages is not specified, scrolls one page.  The page size is determined by
<span class='line'>2022</span>     the verticalPageScroll value.  By default this is the size of the current
<span class='line'>2023</span>     scrollable area.
<span class='line'>2024</span> 
<span class='line'>2025</span>     @param {Number} pages number of lines
<span class='line'>2026</span>     @returns {SC.ScrollView} receiver
<span class='line'>2027</span>   */</span><span class="WHIT">
<span class='line'>2028</span> </span><span class="WHIT">  </span><span class="NAME">scrollUpPage</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">pages</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2029</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">pages</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">pages</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2030</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.scrollBy</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalPageScroll'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">pages</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2031</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2032</span> 
<span class='line'>2033</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>2034</span>     Scroll the view to make the view's frame visible.  For this to make sense,
<span class='line'>2035</span>     the view should be a subview of the contentView.  Otherwise the results
<span class='line'>2036</span>     will be undefined.
<span class='line'>2037</span> 
<span class='line'>2038</span>     @param {SC.View} view view to scroll or null to scroll receiver visible
<span class='line'>2039</span>     @returns {Boolean} YES if scroll position was changed
<span class='line'>2040</span>   */</span><span class="WHIT">
<span class='line'>2041</span> </span><span class="WHIT">  </span><span class="NAME">scrollToVisible</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">view</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2042</span> 
<span class='line'>2043</span> </span><span class="WHIT">    </span><span class="COMM">// if no view is passed, do default</span><span class="WHIT">
<span class='line'>2044</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">arguments.length</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">sc_super</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2045</span> 
<span class='line'>2046</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2047</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">contentView</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// nothing to do if no contentView.</span><span class="WHIT">
<span class='line'>2048</span> 
<span class='line'>2049</span> </span><span class="WHIT">    </span><span class="COMM">// get the frame for the view - should work even for views with static</span><span class="WHIT">
<span class='line'>2050</span> </span><span class="WHIT">    </span><span class="COMM">// layout, assuming it has been added to the screen.</span><span class="WHIT">
<span class='line'>2051</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">viewFrame</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">view.get</span><span class="PUNC">(</span><span class="STRN">'borderFrame'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2052</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">viewFrame</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// nothing to do</span><span class="WHIT">
<span class='line'>2053</span> 
<span class='line'>2054</span> </span><span class="WHIT">    </span><span class="COMM">// convert view's frame to an offset from the contentView origin.  This</span><span class="WHIT">
<span class='line'>2055</span> </span><span class="WHIT">    </span><span class="COMM">// will become the new scroll offset after some adjustment.</span><span class="WHIT">
<span class='line'>2056</span> </span><span class="WHIT">    </span><span class="NAME">viewFrame</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">contentView.convertFrameFromView</span><span class="PUNC">(</span><span class="NAME">viewFrame</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">view.get</span><span class="PUNC">(</span><span class="STRN">'parentView'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2057</span> 
<span class='line'>2058</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.scrollToRect</span><span class="PUNC">(</span><span class="NAME">viewFrame</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2059</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2060</span> 
<span class='line'>2061</span> </span><span class="WHIT">  </span><span class="COMM">/** @private SC.View */</span><span class="WHIT">
<span class='line'>2062</span> </span><span class="WHIT">  </span><span class="NAME">willDestroyLayer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2063</span> </span><span class="WHIT">    </span><span class="COMM">// Clean up.</span><span class="WHIT">
<span class='line'>2064</span> </span><span class="WHIT">    </span><span class="NAME">this.removeObserver</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_scrollOffsetHorizontalDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2065</span> </span><span class="WHIT">    </span><span class="NAME">this.removeObserver</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_scrollOffsetVerticalDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2066</span> </span><span class="WHIT">    </span><span class="NAME">this.removeObserver</span><span class="PUNC">(</span><span class="STRN">'isHorizontalScrollerVisible'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_repositionScrollers</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2067</span> </span><span class="WHIT">    </span><span class="NAME">this.removeObserver</span><span class="PUNC">(</span><span class="STRN">'isVerticalScrollerVisible'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_repositionScrollers</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2068</span> 
<span class='line'>2069</span> </span><span class="WHIT">    </span><span class="NAME">this.removeObserver</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_scaleDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2070</span> 
<span class='line'>2071</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">containerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'containerView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2072</span> </span><span class="WHIT">    </span><span class="NAME">containerView.removeObserver</span><span class="PUNC">(</span><span class="STRN">'frame'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_containerViewFrameDidChange</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2073</span> 
<span class='line'>2074</span> </span><span class="WHIT">    </span><span class="COMM">// Be sure to remove this view as a scrollable view for SC.Drag.</span><span class="WHIT">
<span class='line'>2075</span> </span><span class="WHIT">    </span><span class="NAME">this.removeObserver</span><span class="PUNC">(</span><span class="STRN">'isVisibleInWindow'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_registerAutoscroll</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2076</span> </span><span class="WHIT">    </span><span class="NAME">this.removeObserver</span><span class="PUNC">(</span><span class="STRN">'isEnabledInPane'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._sc_registerAutoscroll</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2077</span> </span><span class="WHIT">    </span><span class="NAME">SC.Drag.removeScrollableView</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2078</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2079</span> 
<span class='line'>2080</span> </span><span class="WHIT">  </span><span class="COMM">// ---------------------------------------------------------------------------------------------</span><span class="WHIT">
<span class='line'>2081</span> </span><span class="WHIT">  </span><span class="COMM">// Interaction</span><span class="WHIT">
<span class='line'>2082</span> </span><span class="WHIT">  </span><span class="COMM">//</span><span class="WHIT">
<span class='line'>2083</span> 
<span class='line'>2084</span> </span><span class="WHIT">  </span><span class="COMM">/** @private
<span class='line'>2085</span>     This method gives our descendent views a chance to capture the touch via captureTouch, and subsequently to handle the
<span class='line'>2086</span>     touch, via touchStart. If no view elects to do so, control is returned to the scroll view for standard scrolling.
<span class='line'>2087</span>   */</span><span class="WHIT">
<span class='line'>2088</span> </span><span class="WHIT">  </span><span class="NAME">_sc_beginTouchesInContent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2089</span> </span><span class="WHIT">    </span><span class="COMM">// Clean up.</span><span class="WHIT">
<span class='line'>2090</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_passTouchToContentTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2091</span> 
<span class='line'>2092</span> </span><span class="WHIT">    </span><span class="COMM">// If the touch is not a scroll or scale, see if any of our descendent views want to handle the touch. If not,</span><span class="WHIT">
<span class='line'>2093</span> </span><span class="WHIT">    </span><span class="COMM">// we keep our existing respondership and all is well.</span><span class="WHIT">
<span class='line'>2094</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">touch.captureTouch</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2095</span> </span><span class="WHIT">      </span><span class="NAME">touch.makeTouchResponder</span><span class="PUNC">(</span><span class="NAME">touch.targetView</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2096</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2097</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2098</span> 
<span class='line'>2099</span> </span><span class="WHIT">  </span><span class="COMM">/** @private */</span><span class="WHIT">
<span class='line'>2100</span> </span><span class="WHIT">  </span><span class="NAME">_sc_touchEnded</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">wasCancelled</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2101</span> </span><span class="WHIT">    </span><span class="COMM">// When the last touch ends, we stop touch scrolling.</span><span class="WHIT">
<span class='line'>2102</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">hasTouch</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'hasTouch'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2103</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">hasTouch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2104</span> </span><span class="WHIT">      </span><span class="COMM">// Update the average distance to center of the touch to include the new touch. This is used to recognize pinch/zoom movement of the touch.</span><span class="WHIT">
<span class='line'>2105</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">avgTouch</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">touch.averagedTouchesForView</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2106</span> 
<span class='line'>2107</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorD</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorTotalD</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.d</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2108</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorTotalX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2109</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorTotalY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.y</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2110</span> 
<span class='line'>2111</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_containerOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2112</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_touchCenterX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.x</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_containerOffset.x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2113</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_touchCenterY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.y</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_containerOffset.y</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2114</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2115</span> 
<span class='line'>2116</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2117</span> 
<span class='line'>2118</span> </span><span class="WHIT">      </span><span class="COMM">// If we were scrolling, continue scrolling at present velocity with deceleration.</span><span class="WHIT">
<span class='line'>2119</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_isTouchScrollingV</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._sc_isTouchScrollingH</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._sc_isTouchScaling</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2120</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">decelerationRate</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'decelerationRate'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2121</span> </span><span class="WHIT">          </span><span class="NAME">containerHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_containerHeight</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2122</span> </span><span class="WHIT">          </span><span class="NAME">containerWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_containerWidth</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2123</span> </span><span class="WHIT">          </span><span class="NAME">durationH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2124</span> </span><span class="WHIT">          </span><span class="NAME">durationV</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2125</span> </span><span class="WHIT">          </span><span class="NAME">c2x</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">c2y</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2126</span> 
<span class='line'>2127</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_isTouchScrollingH</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2128</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2129</span> </span><span class="WHIT">            </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2130</span> </span><span class="WHIT">            </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2131</span> </span><span class="WHIT">            </span><span class="NAME">horizontalVelocity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_touchVelocityH</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2132</span> 
<span class='line'>2133</span> </span><span class="WHIT">          </span><span class="COMM">// Past the maximum.</span><span class="WHIT">
<span class='line'>2134</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2135</span> </span><span class="WHIT">            </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2136</span> 
<span class='line'>2137</span> </span><span class="WHIT">            </span><span class="COMM">// Moving away from maximum. Change direction.</span><span class="WHIT">
<span class='line'>2138</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalVelocity</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0.2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2139</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'animationCurveReverse'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2140</span> 
<span class='line'>2141</span> </span><span class="WHIT">            </span><span class="COMM">// Stopped or moving back towards maximum. Maintain direction, snap at the end.</span><span class="WHIT">
<span class='line'>2142</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2143</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'animationCurveSnap'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2144</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2145</span> 
<span class='line'>2146</span> </span><span class="WHIT">            </span><span class="COMM">// 0.8 seconds for a full screen animation (most will be 50% or less of screen)</span><span class="WHIT">
<span class='line'>2147</span> </span><span class="WHIT">            </span><span class="NAME">durationH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0.8</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2148</span> 
<span class='line'>2149</span> </span><span class="WHIT">          </span><span class="COMM">// Bounce back from min.</span><span class="WHIT">
<span class='line'>2150</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2151</span> </span><span class="WHIT">            </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2152</span> 
<span class='line'>2153</span> </span><span class="WHIT">            </span><span class="COMM">// Moving away from minimum. Change direction.</span><span class="WHIT">
<span class='line'>2154</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalVelocity</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0.2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2155</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'animationCurveReverse'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2156</span> 
<span class='line'>2157</span> </span><span class="WHIT">            </span><span class="COMM">// Stopped or moving back towards minimum. Maintain direction, snap at the end.</span><span class="WHIT">
<span class='line'>2158</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2159</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'animationCurveSnap'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2160</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2161</span> 
<span class='line'>2162</span> </span><span class="WHIT">            </span><span class="COMM">// 0.8 seconds for a full screen animation (most will be 50% or less of screen)</span><span class="WHIT">
<span class='line'>2163</span> </span><span class="WHIT">            </span><span class="NAME">durationH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0.8</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">minimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2164</span> 
<span class='line'>2165</span> </span><span class="WHIT">          </span><span class="COMM">// Slide.</span><span class="WHIT">
<span class='line'>2166</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2167</span> </span><span class="WHIT">            </span><span class="COMM">// Set the final position we should slide to as we decelerate based on last velocity.</span><span class="WHIT">
<span class='line'>2168</span> </span><span class="WHIT">            </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">horizontalVelocity</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">horizontalVelocity</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">1000</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">decelerationRate</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2169</span> 
<span class='line'>2170</span> </span><span class="WHIT">            </span><span class="COMM">// Constrain within bounds.</span><span class="WHIT">
<span class='line'>2171</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2172</span> </span><span class="WHIT">              </span><span class="COMM">// Generate an animation curve that bounces past the end point.</span><span class="WHIT">
<span class='line'>2173</span> </span><span class="WHIT">              </span><span class="NAME">c2x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2174</span> </span><span class="WHIT">              </span><span class="NAME">c2y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">c2x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2175</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.easingCurve</span><span class="PUNC">(</span><span class="NUMB">0.0</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NAME">c2x.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">c2y.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// 'cubic-bezier(0.0,0.5,%@,%@)'.fmt(c2x.toFixed(1), c2y.toFixed(1));</span><span class="WHIT">
<span class='line'>2176</span> 
<span class='line'>2177</span> </span><span class="WHIT">              </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2178</span> 
<span class='line'>2179</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2180</span> </span><span class="WHIT">              </span><span class="COMM">// Generate an animation curve that bounces past the end point.</span><span class="WHIT">
<span class='line'>2181</span> </span><span class="WHIT">              </span><span class="NAME">c2x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">minimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">containerWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2182</span> </span><span class="WHIT">              </span><span class="NAME">c2y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">c2x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2183</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.easingCurve</span><span class="PUNC">(</span><span class="NUMB">0.0</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NAME">c2x.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">c2y.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// 'cubic-bezier(0.0,0.5,%@,%@)'.fmt(c2x.toFixed(1), c2y.toFixed(1));</span><span class="WHIT">
<span class='line'>2184</span> 
<span class='line'>2185</span> </span><span class="WHIT">              </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2186</span> 
<span class='line'>2187</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2188</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'animationCurveDecelerate'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2189</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2190</span> 
<span class='line'>2191</span> </span><span class="WHIT">            </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2192</span> 
<span class='line'>2193</span> </span><span class="WHIT">            </span><span class="NAME">durationH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">horizontalVelocity</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">decelerationRate</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2194</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2195</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2196</span> 
<span class='line'>2197</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_isTouchScrollingV</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2198</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2199</span> </span><span class="WHIT">            </span><span class="NAME">maximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2200</span> </span><span class="WHIT">            </span><span class="NAME">minimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2201</span> </span><span class="WHIT">            </span><span class="NAME">verticalVelocity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_touchVelocityV</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2202</span> 
<span class='line'>2203</span> </span><span class="WHIT">          </span><span class="COMM">// Past the maximum.</span><span class="WHIT">
<span class='line'>2204</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2205</span> </span><span class="WHIT">            </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2206</span> 
<span class='line'>2207</span> </span><span class="WHIT">            </span><span class="COMM">// Moving away from maximum. Change direction.</span><span class="WHIT">
<span class='line'>2208</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalVelocity</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0.2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2209</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'animationCurveReverse'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2210</span> 
<span class='line'>2211</span> </span><span class="WHIT">            </span><span class="COMM">// Stopped or moving back towards maximum. Maintain direction, snap at the end.</span><span class="WHIT">
<span class='line'>2212</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2213</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'animationCurveSnap'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2214</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2215</span> 
<span class='line'>2216</span> </span><span class="WHIT">            </span><span class="COMM">// 0.8 seconds for a full screen animation (most will be 50% or less of screen)</span><span class="WHIT">
<span class='line'>2217</span> </span><span class="WHIT">            </span><span class="NAME">durationV</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0.8</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">containerHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2218</span> 
<span class='line'>2219</span> </span><span class="WHIT">          </span><span class="COMM">// Bounce back from min.</span><span class="WHIT">
<span class='line'>2220</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">minimumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2221</span> </span><span class="WHIT">            </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">minimumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2222</span> 
<span class='line'>2223</span> </span><span class="WHIT">            </span><span class="COMM">// Moving away from minimum. Change direction.</span><span class="WHIT">
<span class='line'>2224</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalVelocity</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0.2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2225</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'animationCurveReverse'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2226</span> 
<span class='line'>2227</span> </span><span class="WHIT">            </span><span class="COMM">// Stopped or moving back towards minimum. Maintain direction, snap at the end.</span><span class="WHIT">
<span class='line'>2228</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2229</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'animationCurveSnap'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2230</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2231</span> 
<span class='line'>2232</span> </span><span class="WHIT">            </span><span class="COMM">// 0.8 seconds for a full screen animation (most will be 50% or less of screen)</span><span class="WHIT">
<span class='line'>2233</span> </span><span class="WHIT">            </span><span class="NAME">durationV</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0.8</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">minimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">containerHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2234</span> 
<span class='line'>2235</span> </span><span class="WHIT">          </span><span class="COMM">// Slide.</span><span class="WHIT">
<span class='line'>2236</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2237</span> </span><span class="WHIT">            </span><span class="COMM">// Set the final position we should slide to as we decelerate based on last velocity.</span><span class="WHIT">
<span class='line'>2238</span> </span><span class="WHIT">            </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">verticalVelocity</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">verticalVelocity</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">1000</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">decelerationRate</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2239</span> 
<span class='line'>2240</span> </span><span class="WHIT">            </span><span class="COMM">// Constrain within bounds.</span><span class="WHIT">
<span class='line'>2241</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2242</span> </span><span class="WHIT">              </span><span class="COMM">// Generate an animation curve that bounces past the end point.</span><span class="WHIT">
<span class='line'>2243</span> </span><span class="WHIT">              </span><span class="NAME">c2x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">containerHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2244</span> </span><span class="WHIT">              </span><span class="NAME">c2y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">c2x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2245</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.easingCurve</span><span class="PUNC">(</span><span class="NUMB">0.0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NAME">c2x.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">c2y.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="STRN">'cubic-bezier(0.0,0.5,%@,%@)'</span><span class="PUNC">.</span><span class="NAME">fmt</span><span class="PUNC">(</span><span class="NAME">c2x.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">c2y.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2246</span> 
<span class='line'>2247</span> </span><span class="WHIT">              </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2248</span> 
<span class='line'>2249</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">minimumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2250</span> </span><span class="WHIT">              </span><span class="COMM">// Generate an animation curve that bounces past the end point.</span><span class="WHIT">
<span class='line'>2251</span> </span><span class="WHIT">              </span><span class="NAME">c2x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">minimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">containerHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2252</span> </span><span class="WHIT">              </span><span class="NAME">c2y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">c2x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2253</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.easingCurve</span><span class="PUNC">(</span><span class="NUMB">0.0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NAME">c2x.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">c2y.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="STRN">'cubic-bezier(0.0,0.5,%@,%@)'</span><span class="PUNC">.</span><span class="NAME">fmt</span><span class="PUNC">(</span><span class="NAME">c2x.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">c2y.toFixed</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2254</span> 
<span class='line'>2255</span> </span><span class="WHIT">              </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">minimumVerticalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2256</span> 
<span class='line'>2257</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2258</span> </span><span class="WHIT">              </span><span class="NAME">this._sc_animationTiming</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'animationCurveDecelerate'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2259</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2260</span> 
<span class='line'>2261</span> </span><span class="WHIT">            </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2262</span> 
<span class='line'>2263</span> </span><span class="WHIT">            </span><span class="NAME">durationV</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">verticalVelocity</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">decelerationRate</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2264</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2265</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2266</span> 
<span class='line'>2267</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2268</span> </span><span class="WHIT">          </span><span class="NAME">maximumScale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumScale'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2269</span> </span><span class="WHIT">          </span><span class="NAME">minimumScale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumScale'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2270</span> </span><span class="WHIT">          </span><span class="NAME">durationS</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2271</span> 
<span class='line'>2272</span> </span><span class="WHIT">        </span><span class="COMM">// Bounce back from max.</span><span class="WHIT">
<span class='line'>2273</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">maximumScale</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2274</span> </span><span class="WHIT">          </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maximumScale</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2275</span> </span><span class="WHIT">          </span><span class="NAME">durationS</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0.25</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2276</span> 
<span class='line'>2277</span> </span><span class="WHIT">        </span><span class="COMM">// Bounce back from min.</span><span class="WHIT">
<span class='line'>2278</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">minimumScale</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2279</span> </span><span class="WHIT">          </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">minimumScale</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2280</span> </span><span class="WHIT">          </span><span class="NAME">durationS</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0.25</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2281</span> 
<span class='line'>2282</span> </span><span class="WHIT">        </span><span class="COMM">// Slide.</span><span class="WHIT">
<span class='line'>2283</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2284</span> 
<span class='line'>2285</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2286</span> 
<span class='line'>2287</span> </span><span class="WHIT">        </span><span class="COMM">// Determine how long the deceleration should take (we can't animate left/top separately, so use the largest duration for both).</span><span class="WHIT">
<span class='line'>2288</span> </span><span class="WHIT">        </span><span class="COMM">// This variable also acts as a flag so that when the content view is repositioned, it will be animated.</span><span class="WHIT">
<span class='line'>2289</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_animationDuration</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">durationH</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">durationV</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">durationS</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2290</span> 
<span class='line'>2291</span> </span><span class="WHIT">        </span><span class="COMM">// Clear up all caches from touchesDragged.</span><span class="WHIT">
<span class='line'>2292</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_touchVelocityH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2293</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_touchVelocityV</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2294</span> 
<span class='line'>2295</span> </span><span class="WHIT">      </span><span class="COMM">// Pass the initial touch on to the content view if it hasn't tried yet (i.e. a tap) and the touch wasn't cancelled.</span><span class="WHIT">
<span class='line'>2296</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_passTouchToContentTimer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2297</span> </span><span class="WHIT">        </span><span class="COMM">// Clean up.</span><span class="WHIT">
<span class='line'>2298</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_passTouchToContentTimer.invalidate</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2299</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_passTouchToContentTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2300</span> 
<span class='line'>2301</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">wasCancelled</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2302</span> </span><span class="WHIT">          </span><span class="COMM">// If the content has handled the touch, then immediately end it.</span><span class="WHIT">
<span class='line'>2303</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch.makeTouchResponder</span><span class="PUNC">(</span><span class="NAME">touch.targetView</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2304</span> </span><span class="WHIT">            </span><span class="NAME">touch.end</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2305</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2306</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2307</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2308</span> 
<span class='line'>2309</span> </span><span class="WHIT">      </span><span class="COMM">// Clean up all caches from touchStart & touchesDragged</span><span class="WHIT">
<span class='line'>2310</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorD</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2311</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorTotalX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorTotalY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorTotalD</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2312</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorScale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2313</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorHOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2314</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorVOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2315</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_containerOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2316</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_touchCenterX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2317</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_touchCenterY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2318</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2319</span> 
<span class='line'>2320</span> </span><span class="WHIT">    </span><span class="COMM">// Force recalculation of scrolling and scaling.</span><span class="WHIT">
<span class='line'>2321</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_isTouchScrollingH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2322</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_isTouchScrollingHOnly</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2323</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_isTouchScrollingV</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2324</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_isTouchScrollingVOnly</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2325</span> </span><span class="WHIT">    </span><span class="NAME">this._sc_isTouchScaling</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2326</span> 
<span class='line'>2327</span> </span><span class="WHIT">    </span><span class="COMM">// TODO: What happens when isEnabledInPane goes false while interacting? Statechart would help solve this.</span><span class="WHIT">
<span class='line'>2328</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2329</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2330</span> 
<span class='line'>2331</span> </span><span class="WHIT">  </span><span class="COMM">/** @private @see SC.RootResponder.prototype.captureTouch */</span><span class="WHIT">
<span class='line'>2332</span> </span><span class="WHIT">  </span><span class="NAME">captureTouch</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2333</span> </span><span class="WHIT">    </span><span class="COMM">// Capture the touch and begin determination of actual scroll or not.</span><span class="WHIT">
<span class='line'>2334</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'delaysContentTouches'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2335</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2336</span> 
<span class='line'>2337</span> </span><span class="WHIT">    </span><span class="COMM">// Otherwise, suggest ourselves as a reasonable fallback responder. If none of our children capture</span><span class="WHIT">
<span class='line'>2338</span> </span><span class="WHIT">    </span><span class="COMM">// the touch or handle touchStart, we'll get another crack at it in touchStart.</span><span class="WHIT">
<span class='line'>2339</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2340</span> </span><span class="WHIT">      </span><span class="NAME">touch.stackCandidateTouchResponder</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2341</span> 
<span class='line'>2342</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2343</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2344</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2345</span> 
<span class='line'>2346</span> </span><span class="WHIT">  </span><span class="COMM">/** @private */</span><span class="WHIT">
<span class='line'>2347</span> </span><span class="WHIT">  </span><span class="NAME">mouseWheel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">evt</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2348</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">handled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2349</span> </span><span class="WHIT">      </span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2350</span> 
<span class='line'>2351</span> </span><span class="WHIT">    </span><span class="COMM">// Ignore it if not enabled.</span><span class="WHIT">
<span class='line'>2352</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'isEnabledInPane'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2353</span> 
<span class='line'>2354</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2355</span> </span><span class="WHIT">        </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2356</span> </span><span class="WHIT">        </span><span class="NAME">minimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2357</span> </span><span class="WHIT">        </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2358</span> </span><span class="WHIT">        </span><span class="NAME">maximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2359</span> </span><span class="WHIT">        </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2360</span> </span><span class="WHIT">        </span><span class="NAME">wheelDeltaX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">evt.wheelDeltaX</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2361</span> </span><span class="WHIT">        </span><span class="NAME">wheelDeltaY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">evt.wheelDeltaY</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2362</span> 
<span class='line'>2363</span> </span><span class="WHIT">      </span><span class="COMM">// If we can't scroll in one direction, limit that direction.</span><span class="WHIT">
<span class='line'>2364</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScrollHorizontal'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// Don't allow inverted scrolling for now.</span><span class="WHIT">
<span class='line'>2365</span> </span><span class="WHIT">        </span><span class="NAME">wheelDeltaX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2366</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2367</span> 
<span class='line'>2368</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScrollVertical'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// Don't allow inverted scrolling for now.</span><span class="WHIT">
<span class='line'>2369</span> </span><span class="WHIT">        </span><span class="NAME">wheelDeltaY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2370</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2371</span> 
<span class='line'>2372</span> </span><span class="WHIT">      </span><span class="COMM">// Only attempt to scroll if we are allowed to scroll in the direction and have room to scroll</span><span class="WHIT">
<span class='line'>2373</span> </span><span class="WHIT">      </span><span class="COMM">// in the direction. Otherwise, ignore the event so that an outer ScrollView may capture it.</span><span class="WHIT">
<span class='line'>2374</span> </span><span class="WHIT">      </span><span class="NAME">handled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">wheelDeltaX</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>2375</span> </span><span class="WHIT">                 </span><span class="PUNC">(</span><span class="NAME">wheelDeltaX</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>2376</span> </span><span class="WHIT">                </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">wheelDeltaY</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">minimumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>2377</span> </span><span class="WHIT">                  </span><span class="PUNC">(</span><span class="NAME">wheelDeltaY</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2378</span> 
<span class='line'>2379</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">handled</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2380</span> </span><span class="WHIT">        </span><span class="NAME">this.scrollBy</span><span class="PUNC">(</span><span class="NAME">wheelDeltaX</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">wheelDeltaY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2381</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2382</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2383</span> 
<span class='line'>2384</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">handled</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2385</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2386</span> 
<span class='line'>2387</span> </span><span class="WHIT">  </span><span class="COMM">/** @private */</span><span class="WHIT">
<span class='line'>2388</span> </span><span class="WHIT">  </span><span class="NAME">touchesDragged</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">evt</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touchesForView</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2389</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">avgTouch</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">evt.averagedTouchesForView</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2390</span> </span><span class="WHIT">        </span><span class="NAME">canScale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScale'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2391</span> </span><span class="WHIT">        </span><span class="NAME">canScrollHorizontal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScrollHorizontal'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2392</span> </span><span class="WHIT">        </span><span class="NAME">canScrollVertical</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'canScrollVertical'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2393</span> </span><span class="WHIT">        </span><span class="NAME">scrollThreshold</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'scrollGestureThreshold'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2394</span> </span><span class="WHIT">        </span><span class="NAME">scaleThreshold</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'scaleGestureThreshold'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2395</span> </span><span class="WHIT">        </span><span class="NAME">scrollLockThreshold</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'scrollLockGestureThreshold'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2396</span> </span><span class="WHIT">        </span><span class="NAME">horizontalScrollOffset</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2397</span> </span><span class="WHIT">        </span><span class="NAME">verticalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2398</span> 
<span class='line'>2399</span> 
<span class='line'>2400</span> </span><span class="WHIT">    </span><span class="COMM">// Determine if we've moved enough to claim horizontal or vertical scrolling.</span><span class="WHIT">
<span class='line'>2401</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">this._sc_isTouchScrollingH</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._sc_isTouchScrollingV</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT">
<span class='line'>2402</span> </span><span class="WHIT">      </span><span class="PUNC">!</span><span class="NAME">this._sc_isTouchScrollingHOnly</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this._sc_isTouchScrollingVOnly</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2403</span> 
<span class='line'>2404</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScrollHorizontal</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2405</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">totalAbsDeltaX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">this._sc_gestureAnchorTotalX</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">avgTouch.x</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2406</span> 
<span class='line'>2407</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._sc_isTouchScrollingH</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2408</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_isTouchScrollingH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">totalAbsDeltaX</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NAME">scrollThreshold</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2409</span> 
<span class='line'>2410</span> </span><span class="WHIT">        </span><span class="COMM">// Determine if we've moved enough to lock scrolling to only this direction.</span><span class="WHIT">
<span class='line'>2411</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2412</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_isTouchScrollingHOnly</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">totalAbsDeltaX</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NAME">scrollLockThreshold</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2413</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2414</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2415</span> 
<span class='line'>2416</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScrollVertical</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2417</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">totalAbsDeltaY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">this._sc_gestureAnchorTotalY</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">avgTouch.y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2418</span> 
<span class='line'>2419</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._sc_isTouchScrollingV</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2420</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_isTouchScrollingV</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">totalAbsDeltaY</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NAME">scrollThreshold</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2421</span> 
<span class='line'>2422</span> </span><span class="WHIT">        </span><span class="COMM">// Determine if we've moved enough to lock scrolling to only this direction.</span><span class="WHIT">
<span class='line'>2423</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2424</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_isTouchScrollingVOnly</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">totalAbsDeltaY</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NAME">scrollLockThreshold</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2425</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2426</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2427</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2428</span> 
<span class='line'>2429</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">touchDeltaX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorX</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">avgTouch.x</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2430</span> </span><span class="WHIT">        </span><span class="NAME">absDeltaX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">touchDeltaX</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2431</span> 
<span class='line'>2432</span> </span><span class="WHIT">    </span><span class="COMM">// Adjust scroll.</span><span class="WHIT">
<span class='line'>2433</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScrollHorizontal</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">absDeltaX</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this._sc_isTouchScrollingVOnly</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2434</span> </span><span class="WHIT">      </span><span class="COMM">// Record the last velocity.</span><span class="WHIT">
<span class='line'>2435</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_touchVelocityH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.velocityX</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2436</span> 
<span class='line'>2437</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2438</span> </span><span class="WHIT">        </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumHorizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2439</span> 
<span class='line'>2440</span> </span><span class="WHIT">      </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorHOffset</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">touchDeltaX</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2441</span> 
<span class='line'>2442</span> </span><span class="WHIT">      </span><span class="COMM">// Reset the anchor. Note: Do this before degrading the offset.</span><span class="WHIT">
<span class='line'>2443</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2444</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorHOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2445</span> 
<span class='line'>2446</span> </span><span class="WHIT">      </span><span class="COMM">// Degrade the offset as we pass maximum.</span><span class="WHIT">
<span class='line'>2447</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2448</span> </span><span class="WHIT">        </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_overDragSlip</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">maximumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2449</span> 
<span class='line'>2450</span> </span><span class="WHIT">      </span><span class="COMM">// Degrade the offset as we pass minimum.</span><span class="WHIT">
<span class='line'>2451</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">minimumHorizontalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2452</span> </span><span class="WHIT">        </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._sc_overDragSlip</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">minimumHorizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2453</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2454</span> 
<span class='line'>2455</span> </span><span class="WHIT">      </span><span class="COMM">// Update the scroll offset.</span><span class="WHIT">
<span class='line'>2456</span> </span><span class="WHIT">      </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">horizontalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2457</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2458</span> 
<span class='line'>2459</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">touchDeltaY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorY</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">avgTouch.y</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2460</span> </span><span class="WHIT">        </span><span class="NAME">absDeltaY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">touchDeltaY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2461</span> 
<span class='line'>2462</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScrollVertical</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">absDeltaY</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this._sc_isTouchScrollingHOnly</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2463</span> </span><span class="WHIT">      </span><span class="COMM">// Record the last velocity.</span><span class="WHIT">
<span class='line'>2464</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_touchVelocityV</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.velocityY</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2465</span> 
<span class='line'>2466</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">minimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'minimumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2467</span> </span><span class="WHIT">          </span><span class="NAME">maximumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'maximumVerticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2468</span> 
<span class='line'>2469</span> </span><span class="WHIT">      </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorVOffset</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">touchDeltaY</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2470</span> 
<span class='line'>2471</span> </span><span class="WHIT">      </span><span class="COMM">// Reset the anchor. Note: Do this before degrading the offset.</span><span class="WHIT">
<span class='line'>2472</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.y</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2473</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorVOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2474</span> 
<span class='line'>2475</span> </span><span class="WHIT">      </span><span class="COMM">// Degrade the offset as we pass maximum.</span><span class="WHIT">
<span class='line'>2476</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2477</span> </span><span class="WHIT">        </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_overDragSlip</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">maximumVerticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2478</span> 
<span class='line'>2479</span> </span><span class="WHIT">      </span><span class="COMM">// Degrade the offset as we pass minimum.</span><span class="WHIT">
<span class='line'>2480</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">minimumVerticalScrollOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2481</span> </span><span class="WHIT">        </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._sc_overDragSlip</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">minimumVerticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2482</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2483</span> 
<span class='line'>2484</span> </span><span class="WHIT">      </span><span class="COMM">// Update the scroll offset.</span><span class="WHIT">
<span class='line'>2485</span> </span><span class="WHIT">      </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">verticalScrollOffset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2486</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2487</span> 
<span class='line'>2488</span> </span><span class="WHIT">    </span><span class="COMM">// Adjust scale.</span><span class="WHIT">
<span class='line'>2489</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">canScale</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2490</span> 
<span class='line'>2491</span> </span><span class="WHIT">      </span><span class="COMM">// Determine if we've moved enough to claim scaling.</span><span class="WHIT">
<span class='line'>2492</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._sc_isTouchScaling</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2493</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">totalAbsDeltaD</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">this._sc_gestureAnchorTotalD</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">avgTouch.d</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2494</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_isTouchScaling</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">avgTouch.d</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">totalAbsDeltaD</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">scaleThreshold</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2495</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2496</span> 
<span class='line'>2497</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">touchDeltaD</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorD</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">avgTouch.d</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2498</span> </span><span class="WHIT">          </span><span class="NAME">absDeltaD</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">touchDeltaD</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2499</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">absDeltaD</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2500</span> </span><span class="WHIT">        </span><span class="COMM">// The percentage difference in touch distance.</span><span class="WHIT">
<span class='line'>2501</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scalePercentChange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.d</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorD</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2502</span> </span><span class="WHIT">            </span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorScale</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">scalePercentChange</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2503</span> 
<span class='line'>2504</span> </span><span class="WHIT">        </span><span class="COMM">// Adjust the center of the zoom to the center of the gesture.</span><span class="WHIT">
<span class='line'>2505</span> </span><span class="WHIT">        </span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_horizontalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2506</span> </span><span class="WHIT">        </span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_verticalScrollOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2507</span> 
<span class='line'>2508</span> </span><span class="WHIT">        </span><span class="COMM">// Cache the current offset of the container view in the document. Calculated each time touch scaling begins.</span><span class="WHIT">
<span class='line'>2509</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._sc_containerOffset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2510</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">el</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getPath</span><span class="PUNC">(</span><span class="STRN">'containerView.layer'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2511</span> 
<span class='line'>2512</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_containerOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.offset</span><span class="PUNC">(</span><span class="NAME">el</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2513</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_touchCenterX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.x</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_containerOffset.x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2514</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_touchCenterY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.y</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._sc_containerOffset.y</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2515</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2516</span> 
<span class='line'>2517</span> </span><span class="WHIT">        </span><span class="COMM">// Compute the relative center of the scale gesture.</span><span class="WHIT">
<span class='line'>2518</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_horizontalPct</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">horizontalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._sc_touchCenterX</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">this._sc_contentWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2519</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_verticalPct</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">verticalScrollOffset</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._sc_touchCenterY</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">this._sc_contentHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2520</span> 
<span class='line'>2521</span> </span><span class="WHIT">        </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scale</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2522</span> 
<span class='line'>2523</span> </span><span class="WHIT">        </span><span class="COMM">// Reset the anchor.</span><span class="WHIT">
<span class='line'>2524</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_gestureAnchorD</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.d</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2525</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_gestureAnchorScale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scale</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2526</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2527</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2528</span> 
<span class='line'>2529</span> </span><span class="WHIT">    </span><span class="COMM">// No longer pass the initial touch on to the content view if it was still about to.</span><span class="WHIT">
<span class='line'>2530</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_passTouchToContentTimer</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_isTouchScrollingV</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._sc_isTouchScrollingH</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._sc_isTouchScaling</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2531</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_passTouchToContentTimer.invalidate</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2532</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_passTouchToContentTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2533</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2534</span> 
<span class='line'>2535</span> </span><span class="WHIT">    </span><span class="COMM">// Note: If the content view has already accepted the initial touch, it will be sent a touchCancelled event.</span><span class="WHIT">
<span class='line'>2536</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2537</span> 
<span class='line'>2538</span> </span><span class="WHIT">  </span><span class="COMM">/** @private
<span class='line'>2539</span>     If we're in hand-holding mode and our content claims the touch, we will receive a touchCancelled
<span class='line'>2540</span>     event at its completion. We still need to do most of our touch-ending wrap up, for example to finish
<span class='line'>2541</span>     bouncing back from a previous gesture.
<span class='line'>2542</span>   */</span><span class="WHIT">
<span class='line'>2543</span> </span><span class="WHIT">  </span><span class="NAME">touchCancelled</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2544</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._sc_touchEnded</span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2545</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2546</span> 
<span class='line'>2547</span> </span><span class="WHIT">  </span><span class="COMM">/** @private
<span class='line'>2548</span>     If we are the touch's responder at its completion, we'll get a touchEnd event. If this is the
<span class='line'>2549</span>     gesture's last touch, we wrap up in spectacular fashion.
<span class='line'>2550</span>   */</span><span class="WHIT">
<span class='line'>2551</span> </span><span class="WHIT">  </span><span class="NAME">touchEnd</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2552</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._sc_touchEnded</span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2553</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2554</span> 
<span class='line'>2555</span> </span><span class="WHIT">  </span><span class="COMM">// /** @private */</span><span class="WHIT">
<span class='line'>2556</span> </span><span class="WHIT">  </span><span class="NAME">touchStart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2557</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">handled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2558</span> </span><span class="WHIT">      </span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'contentView'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2559</span> 
<span class='line'>2560</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">contentView</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'isEnabledInPane'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2561</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">hasTouch</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'hasTouch'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2562</span> 
<span class='line'>2563</span> </span><span class="WHIT">      </span><span class="COMM">// Additional touches can be used for pinching gestures.</span><span class="WHIT">
<span class='line'>2564</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">hasTouch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2565</span> 
<span class='line'>2566</span> </span><span class="WHIT">        </span><span class="COMM">// If a new touch has appeared, force scrolling to recalculate.</span><span class="WHIT">
<span class='line'>2567</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_isTouchScrollingV</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_isTouchScrollingH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2568</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_isTouchScrollingHOnly</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_isTouchScrollingHOnly</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2569</span> 
<span class='line'>2570</span> </span><span class="WHIT">        </span><span class="COMM">// No longer pass the initial touch on to the content view if it was still about to.</span><span class="WHIT">
<span class='line'>2571</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._sc_passTouchToContentTimer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2572</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_passTouchToContentTimer.invalidate</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2573</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_passTouchToContentTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2574</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2575</span> 
<span class='line'>2576</span> </span><span class="WHIT">      </span><span class="COMM">// The first touch is used to set up initial state.</span><span class="WHIT">
<span class='line'>2577</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2578</span> </span><span class="WHIT">        </span><span class="COMM">// Cancel any active animation in place.</span><span class="WHIT">
<span class='line'>2579</span> </span><span class="WHIT">        </span><span class="NAME">this._sc_cancelAnimation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2580</span> 
<span class='line'>2581</span> </span><span class="WHIT">        </span><span class="COMM">// If we have captured the touch and are not yet scrolling, we may want to delay a moment to test for</span><span class="WHIT">
<span class='line'>2582</span> </span><span class="WHIT">        </span><span class="COMM">// scrolling and if not scrolling, we will pass the touch through to the content.</span><span class="WHIT">
<span class='line'>2583</span> </span><span class="WHIT">        </span><span class="COMM">// If configured to do so, delay 150ms to verify that the user is not scrolling before passing touches through to the content.</span><span class="WHIT">
<span class='line'>2584</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'delaysContentTouches'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2585</span> </span><span class="WHIT">          </span><span class="NAME">this._sc_passTouchToContentTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.invokeLater</span><span class="PUNC">(</span><span class="NAME">this._sc_beginTouchesInContent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">150</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touch</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2586</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="COMM">// Else do nothing.</span><span class="WHIT">
<span class='line'>2587</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2588</span> 
<span class='line'>2589</span> </span><span class="WHIT">      </span><span class="COMM">// Update the average distance to center of the touch, which is used to recognize pinch/zoom movement of the touch.</span><span class="WHIT">
<span class='line'>2590</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">avgTouch</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">touch.averagedTouchesForView</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2591</span> 
<span class='line'>2592</span> </span><span class="WHIT">      </span><span class="COMM">/* A note on these variables:
<span class='line'>2593</span> 
<span class='line'>2594</span>         _sc_gestureAnchorX: the last x position (so that we don't update horizontal scroll if the change since last is 0)
<span class='line'>2595</span>         _sc_gestureAnchorTotalX: the initial x position (so that we can determine whether to take total control of touches and possibly lock the position)
<span class='line'>2596</span>       */</span><span class="WHIT">
<span class='line'>2597</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorTotalX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.x</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2598</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorTotalY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.y</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2599</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorD</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._sc_gestureAnchorTotalD</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">avgTouch.d</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2600</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorScale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'scale'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2601</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorHOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'horizontalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2602</span> </span><span class="WHIT">      </span><span class="NAME">this._sc_gestureAnchorVOffset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'verticalScrollOffset'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2603</span> 
<span class='line'>2604</span> </span><span class="WHIT">      </span><span class="NAME">handled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2605</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2606</span> 
<span class='line'>2607</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">handled</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2608</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2609</span> 
<span class='line'>2610</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2611</span> 
<span class='line'>2612</span> 
<span class='line'>2613</span> </span><span class="NAME">SC.ScrollView.mixin</span><span class="PUNC">(</span><span class="WHIT">
<span class='line'>2614</span> </span><span class="COMM">/** @scope SC.ScrollView */</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2615</span> 
<span class='line'>2616</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Shared object used to avoid continually initializing/destroying objects. */</span><span class="WHIT">
<span class='line'>2617</span> </span><span class="WHIT">  </span><span class="NAME">_SC_CONTAINER_LAYOUT_MAP</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2618</span> 
<span class='line'>2619</span> </span><span class="WHIT">  </span><span class="COMM">/** @private Shared object used to avoid continually initializing/destroying objects. */</span><span class="WHIT">
<span class='line'>2620</span> </span><span class="WHIT">  </span><span class="NAME">_SC_CONTENT_ADJUST_MAP</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT">
<span class='line'>2621</span> 
<span class='line'>2622</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2623</span> </span></pre></body></html>